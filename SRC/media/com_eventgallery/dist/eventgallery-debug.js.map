{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:////var/www/eventgallery/build/node_modules/@babel/runtime-corejs2/core-js/array/from.js","webpack:////var/www/eventgallery/build/node_modules/@babel/runtime-corejs2/core-js/array/is-array.js","webpack:////var/www/eventgallery/build/node_modules/@babel/runtime-corejs2/core-js/get-iterator.js","webpack:////var/www/eventgallery/build/node_modules/@babel/runtime-corejs2/core-js/is-iterable.js","webpack:////var/www/eventgallery/build/node_modules/@babel/runtime-corejs2/core-js/map.js","webpack:////var/www/eventgallery/build/node_modules/@babel/runtime-corejs2/core-js/object/assign.js","webpack:////var/www/eventgallery/build/node_modules/@babel/runtime-corejs2/core-js/object/create.js","webpack:////var/www/eventgallery/build/node_modules/@babel/runtime-corejs2/core-js/object/define-property.js","webpack:////var/www/eventgallery/build/node_modules/@babel/runtime-corejs2/core-js/object/get-prototype-of.js","webpack:////var/www/eventgallery/build/node_modules/@babel/runtime-corejs2/core-js/object/set-prototype-of.js","webpack:////var/www/eventgallery/build/node_modules/@babel/runtime-corejs2/core-js/parse-float.js","webpack:////var/www/eventgallery/build/node_modules/@babel/runtime-corejs2/core-js/parse-int.js","webpack:////var/www/eventgallery/build/node_modules/@babel/runtime-corejs2/core-js/set.js","webpack:////var/www/eventgallery/build/node_modules/@babel/runtime-corejs2/core-js/symbol.js","webpack:////var/www/eventgallery/build/node_modules/@babel/runtime-corejs2/core-js/symbol/iterator.js","webpack:////var/www/eventgallery/build/node_modules/@babel/runtime-corejs2/helpers/esm/arrayWithHoles.js","webpack:////var/www/eventgallery/build/node_modules/@babel/runtime-corejs2/helpers/esm/arrayWithoutHoles.js","webpack:////var/www/eventgallery/build/node_modules/@babel/runtime-corejs2/helpers/esm/assertThisInitialized.js","webpack:////var/www/eventgallery/build/node_modules/@babel/runtime-corejs2/helpers/esm/classCallCheck.js","webpack:////var/www/eventgallery/build/node_modules/@babel/runtime-corejs2/helpers/esm/createClass.js","webpack:////var/www/eventgallery/build/node_modules/@babel/runtime-corejs2/helpers/esm/getPrototypeOf.js","webpack:////var/www/eventgallery/build/node_modules/@babel/runtime-corejs2/helpers/esm/inherits.js","webpack:////var/www/eventgallery/build/node_modules/@babel/runtime-corejs2/helpers/esm/iterableToArray.js","webpack:////var/www/eventgallery/build/node_modules/@babel/runtime-corejs2/helpers/esm/iterableToArrayLimit.js","webpack:////var/www/eventgallery/build/node_modules/@babel/runtime-corejs2/helpers/esm/nonIterableRest.js","webpack:////var/www/eventgallery/build/node_modules/@babel/runtime-corejs2/helpers/esm/nonIterableSpread.js","webpack:////var/www/eventgallery/build/node_modules/@babel/runtime-corejs2/helpers/esm/possibleConstructorReturn.js","webpack:////var/www/eventgallery/build/node_modules/@babel/runtime-corejs2/helpers/esm/setPrototypeOf.js","webpack:////var/www/eventgallery/build/node_modules/@babel/runtime-corejs2/helpers/esm/slicedToArray.js","webpack:////var/www/eventgallery/build/node_modules/@babel/runtime-corejs2/helpers/esm/toConsumableArray.js","webpack:////var/www/eventgallery/build/node_modules/@babel/runtime-corejs2/helpers/esm/typeof.js","webpack:////var/www/eventgallery/build/node_modules/@glidejs/glide/dist/glide.modular.esm.js","webpack:////var/www/eventgallery/build/node_modules/@glidejs/glide/src/assets/sass/glide.core.scss?bf28","webpack:////var/www/eventgallery/build/node_modules/core-js/library/fn/array/from.js","webpack:////var/www/eventgallery/build/node_modules/core-js/library/fn/array/is-array.js","webpack:////var/www/eventgallery/build/node_modules/core-js/library/fn/get-iterator.js","webpack:////var/www/eventgallery/build/node_modules/core-js/library/fn/is-iterable.js","webpack:////var/www/eventgallery/build/node_modules/core-js/library/fn/map.js","webpack:////var/www/eventgallery/build/node_modules/core-js/library/fn/object/assign.js","webpack:////var/www/eventgallery/build/node_modules/core-js/library/fn/object/create.js","webpack:////var/www/eventgallery/build/node_modules/core-js/library/fn/object/define-property.js","webpack:////var/www/eventgallery/build/node_modules/core-js/library/fn/object/get-prototype-of.js","webpack:////var/www/eventgallery/build/node_modules/core-js/library/fn/object/set-prototype-of.js","webpack:////var/www/eventgallery/build/node_modules/core-js/library/fn/parse-float.js","webpack:////var/www/eventgallery/build/node_modules/core-js/library/fn/parse-int.js","webpack:////var/www/eventgallery/build/node_modules/core-js/library/fn/set.js","webpack:////var/www/eventgallery/build/node_modules/core-js/library/fn/symbol/index.js","webpack:////var/www/eventgallery/build/node_modules/core-js/library/fn/symbol/iterator.js","webpack:////var/www/eventgallery/build/node_modules/core-js/library/modules/_a-function.js","webpack:////var/www/eventgallery/build/node_modules/core-js/library/modules/_add-to-unscopables.js","webpack:////var/www/eventgallery/build/node_modules/core-js/library/modules/_an-instance.js","webpack:////var/www/eventgallery/build/node_modules/core-js/library/modules/_an-object.js","webpack:////var/www/eventgallery/build/node_modules/core-js/library/modules/_array-from-iterable.js","webpack:////var/www/eventgallery/build/node_modules/core-js/library/modules/_array-includes.js","webpack:////var/www/eventgallery/build/node_modules/core-js/library/modules/_array-methods.js","webpack:////var/www/eventgallery/build/node_modules/core-js/library/modules/_array-species-constructor.js","webpack:////var/www/eventgallery/build/node_modules/core-js/library/modules/_array-species-create.js","webpack:////var/www/eventgallery/build/node_modules/core-js/library/modules/_classof.js","webpack:////var/www/eventgallery/build/node_modules/core-js/library/modules/_cof.js","webpack:////var/www/eventgallery/build/node_modules/core-js/library/modules/_collection-strong.js","webpack:////var/www/eventgallery/build/node_modules/core-js/library/modules/_collection-to-json.js","webpack:////var/www/eventgallery/build/node_modules/core-js/library/modules/_collection.js","webpack:////var/www/eventgallery/build/node_modules/core-js/library/modules/_core.js","webpack:////var/www/eventgallery/build/node_modules/core-js/library/modules/_create-property.js","webpack:////var/www/eventgallery/build/node_modules/core-js/library/modules/_ctx.js","webpack:////var/www/eventgallery/build/node_modules/core-js/library/modules/_defined.js","webpack:////var/www/eventgallery/build/node_modules/core-js/library/modules/_descriptors.js","webpack:////var/www/eventgallery/build/node_modules/core-js/library/modules/_dom-create.js","webpack:////var/www/eventgallery/build/node_modules/core-js/library/modules/_enum-bug-keys.js","webpack:////var/www/eventgallery/build/node_modules/core-js/library/modules/_enum-keys.js","webpack:////var/www/eventgallery/build/node_modules/core-js/library/modules/_export.js","webpack:////var/www/eventgallery/build/node_modules/core-js/library/modules/_fails.js","webpack:////var/www/eventgallery/build/node_modules/core-js/library/modules/_for-of.js","webpack:////var/www/eventgallery/build/node_modules/core-js/library/modules/_global.js","webpack:////var/www/eventgallery/build/node_modules/core-js/library/modules/_has.js","webpack:////var/www/eventgallery/build/node_modules/core-js/library/modules/_hide.js","webpack:////var/www/eventgallery/build/node_modules/core-js/library/modules/_html.js","webpack:////var/www/eventgallery/build/node_modules/core-js/library/modules/_ie8-dom-define.js","webpack:////var/www/eventgallery/build/node_modules/core-js/library/modules/_iobject.js","webpack:////var/www/eventgallery/build/node_modules/core-js/library/modules/_is-array-iter.js","webpack:////var/www/eventgallery/build/node_modules/core-js/library/modules/_is-array.js","webpack:////var/www/eventgallery/build/node_modules/core-js/library/modules/_is-object.js","webpack:////var/www/eventgallery/build/node_modules/core-js/library/modules/_iter-call.js","webpack:////var/www/eventgallery/build/node_modules/core-js/library/modules/_iter-create.js","webpack:////var/www/eventgallery/build/node_modules/core-js/library/modules/_iter-define.js","webpack:////var/www/eventgallery/build/node_modules/core-js/library/modules/_iter-detect.js","webpack:////var/www/eventgallery/build/node_modules/core-js/library/modules/_iter-step.js","webpack:////var/www/eventgallery/build/node_modules/core-js/library/modules/_iterators.js","webpack:////var/www/eventgallery/build/node_modules/core-js/library/modules/_keyof.js","webpack:////var/www/eventgallery/build/node_modules/core-js/library/modules/_library.js","webpack:////var/www/eventgallery/build/node_modules/core-js/library/modules/_meta.js","webpack:////var/www/eventgallery/build/node_modules/core-js/library/modules/_object-assign.js","webpack:////var/www/eventgallery/build/node_modules/core-js/library/modules/_object-create.js","webpack:////var/www/eventgallery/build/node_modules/core-js/library/modules/_object-dp.js","webpack:////var/www/eventgallery/build/node_modules/core-js/library/modules/_object-dps.js","webpack:////var/www/eventgallery/build/node_modules/core-js/library/modules/_object-gopd.js","webpack:////var/www/eventgallery/build/node_modules/core-js/library/modules/_object-gopn-ext.js","webpack:////var/www/eventgallery/build/node_modules/core-js/library/modules/_object-gopn.js","webpack:////var/www/eventgallery/build/node_modules/core-js/library/modules/_object-gops.js","webpack:////var/www/eventgallery/build/node_modules/core-js/library/modules/_object-gpo.js","webpack:////var/www/eventgallery/build/node_modules/core-js/library/modules/_object-keys-internal.js","webpack:////var/www/eventgallery/build/node_modules/core-js/library/modules/_object-keys.js","webpack:////var/www/eventgallery/build/node_modules/core-js/library/modules/_object-pie.js","webpack:////var/www/eventgallery/build/node_modules/core-js/library/modules/_object-sap.js","webpack:////var/www/eventgallery/build/node_modules/core-js/library/modules/_parse-float.js","webpack:////var/www/eventgallery/build/node_modules/core-js/library/modules/_parse-int.js","webpack:////var/www/eventgallery/build/node_modules/core-js/library/modules/_property-desc.js","webpack:////var/www/eventgallery/build/node_modules/core-js/library/modules/_redefine-all.js","webpack:////var/www/eventgallery/build/node_modules/core-js/library/modules/_redefine.js","webpack:////var/www/eventgallery/build/node_modules/core-js/library/modules/_set-proto.js","webpack:////var/www/eventgallery/build/node_modules/core-js/library/modules/_set-species.js","webpack:////var/www/eventgallery/build/node_modules/core-js/library/modules/_set-to-string-tag.js","webpack:////var/www/eventgallery/build/node_modules/core-js/library/modules/_shared-key.js","webpack:////var/www/eventgallery/build/node_modules/core-js/library/modules/_shared.js","webpack:////var/www/eventgallery/build/node_modules/core-js/library/modules/_string-at.js","webpack:////var/www/eventgallery/build/node_modules/core-js/library/modules/_string-trim.js","webpack:////var/www/eventgallery/build/node_modules/core-js/library/modules/_string-ws.js","webpack:////var/www/eventgallery/build/node_modules/core-js/library/modules/_to-index.js","webpack:////var/www/eventgallery/build/node_modules/core-js/library/modules/_to-integer.js","webpack:////var/www/eventgallery/build/node_modules/core-js/library/modules/_to-iobject.js","webpack:////var/www/eventgallery/build/node_modules/core-js/library/modules/_to-length.js","webpack:////var/www/eventgallery/build/node_modules/core-js/library/modules/_to-object.js","webpack:////var/www/eventgallery/build/node_modules/core-js/library/modules/_to-primitive.js","webpack:////var/www/eventgallery/build/node_modules/core-js/library/modules/_uid.js","webpack:////var/www/eventgallery/build/node_modules/core-js/library/modules/_wks-define.js","webpack:////var/www/eventgallery/build/node_modules/core-js/library/modules/_wks-ext.js","webpack:////var/www/eventgallery/build/node_modules/core-js/library/modules/_wks.js","webpack:////var/www/eventgallery/build/node_modules/core-js/library/modules/core.get-iterator-method.js","webpack:////var/www/eventgallery/build/node_modules/core-js/library/modules/core.get-iterator.js","webpack:////var/www/eventgallery/build/node_modules/core-js/library/modules/core.is-iterable.js","webpack:////var/www/eventgallery/build/node_modules/core-js/library/modules/es6.array.from.js","webpack:////var/www/eventgallery/build/node_modules/core-js/library/modules/es6.array.is-array.js","webpack:////var/www/eventgallery/build/node_modules/core-js/library/modules/es6.array.iterator.js","webpack:////var/www/eventgallery/build/node_modules/core-js/library/modules/es6.map.js","webpack:////var/www/eventgallery/build/node_modules/core-js/library/modules/es6.object.assign.js","webpack:////var/www/eventgallery/build/node_modules/core-js/library/modules/es6.object.create.js","webpack:////var/www/eventgallery/build/node_modules/core-js/library/modules/es6.object.define-property.js","webpack:////var/www/eventgallery/build/node_modules/core-js/library/modules/es6.object.get-prototype-of.js","webpack:////var/www/eventgallery/build/node_modules/core-js/library/modules/es6.object.set-prototype-of.js","webpack:////var/www/eventgallery/build/node_modules/core-js/library/modules/es6.parse-float.js","webpack:////var/www/eventgallery/build/node_modules/core-js/library/modules/es6.parse-int.js","webpack:////var/www/eventgallery/build/node_modules/core-js/library/modules/es6.set.js","webpack:////var/www/eventgallery/build/node_modules/core-js/library/modules/es6.string.iterator.js","webpack:////var/www/eventgallery/build/node_modules/core-js/library/modules/es6.symbol.js","webpack:////var/www/eventgallery/build/node_modules/core-js/library/modules/es7.map.to-json.js","webpack:////var/www/eventgallery/build/node_modules/core-js/library/modules/es7.set.to-json.js","webpack:////var/www/eventgallery/build/node_modules/core-js/library/modules/es7.symbol.async-iterator.js","webpack:////var/www/eventgallery/build/node_modules/core-js/library/modules/es7.symbol.observable.js","webpack:////var/www/eventgallery/build/node_modules/core-js/library/modules/web.dom.iterable.js","webpack:////var/www/eventgallery/build/node_modules/custom-event-polyfill/polyfill.js","webpack:///./common/js/EventgalleryTools.js","webpack:///./common/js/Helpers.js","webpack:///./eventgallery.js","webpack:///./frontend/js/EventgalleryBehavior.js","webpack:///./frontend/js/EventgalleryCart.js","webpack:///./frontend/js/EventgalleryEventsList.js","webpack:///./frontend/js/EventgalleryEventsTiles.js","webpack:///./frontend/js/EventgalleryGooglePhotosProcessor.js","webpack:///./frontend/js/EventgalleryImage.js","webpack:///./frontend/js/EventgalleryImageList.js","webpack:///./frontend/js/EventgalleryJSGallery2.js","webpack:///./frontend/js/EventgalleryLazyload.js","webpack:///./frontend/js/EventgalleryRow.js","webpack:///./frontend/js/EventgallerySizeCalculator.js","webpack:///./frontend/js/EventgallerySocialShareButton.js","webpack:///./frontend/js/EventgallerySquareList.js","webpack:///./frontend/js/EventgalleryTilesCollection.js","webpack:///./frontend/js/EventgalleryTouch.js","webpack:///./frontend/js/Modules.js","webpack:///./frontend/js/Overlay.js","webpack:///./frontend/js/PhotoSwipeGallery.js","webpack:///./frontend/js/PhotoSwipeGallerySlide.js","webpack:///./frontend/js/Polyfill.js","webpack:///./frontend/js/SlideShow.js","webpack:///./frontend/js/URLHelper.js","webpack:///./frontend/js/glide_modules/anchor.js","webpack:///./frontend/js/slider/SliderOptions.js","webpack:///./frontend/js/slider/SliderStarter.js","webpack:///./frontend/js/slider/SliderTransformator.js","webpack:///./frontend/js/utils/ElementSize.js","webpack:///./frontend/js/utils/camelCaseConverter.js","webpack:///./frontend/js/utils/eventshandler.js","webpack:///./frontend/js/utils/units.js","webpack:///./frontend/less/eventgallery.less?d7e6","webpack:///./frontend/less/font-awesome/font-awesome.less","webpack:///./frontend/sass/glide/glide.theme.scss?bcf8","webpack:///./photoswipe/default-skin/default-skin.css","webpack:///./photoswipe/photoswipe-ui-default.js","webpack:///./photoswipe/photoswipe.css","webpack:///./photoswipe/photoswipe.js"],"names":["window","Eventgallery","jQuery","eventgallery","Tools","mergeObjects","calcBorderWidth","addUrlHashParameter","getUrlHashParameterValue","removeUrlHashParameter","addUrlParameter","removeUrlParameter","setCSSStyle","removeElement","array","elm","index","indexOf","splice","defaults","options","key","elements","properties","sum","i","length","j","value","css","isNaN","initialUrl","url","fragments","split","urlpart","hashparts","result","push","encodeURIComponent","join","prefix","replace","newHashParts","urlparts","pars","nodes","style","require","document","ready","each","container","$container","$thumbnails","find","rowHeightPercentage","imagesetContainer","first","imageset","lazyloader","initComplete","lazyLoadOptions","eventgalleryLazyloader","Lazyload","resizeStart","removeClass","addClass","resizeComplete","initialize","trigger","EventsList","eventgalleryTilesCollection","tilesOptions","tiles","tilesContainer","TilesCollection","calculate","load","EventsTiles","adjustMode","gridOptions","thumbSelector","thumbContainerSelector","$imagesetContainer","rowHeight","data","rowHeightJitter","firstImageRowHeight","doFillLastRow","Imagelist","SquareList","click","e","$target","target","closest","prop","on","preventDefault","stopPropagation","link","attr","parent","location","href","lightbox","PhotoSwipeGallery","initPhotoSwipe","item","contentId","getAttribute","overlay","Overlay","openOverlay","getElementById","innerHTML","EventGalleryLightboxConfiguration","doPreventRightClick","googlePhotosProcessor","GooglePhotosProcessor","dispatchEvent","Polyfill","createNewEvent","sliderElements","querySelectorAll","sliderStarter","SliderStarter","timer","start","addEventListener","clearTimeout","setTimeout","Cart","newOptions","cart","isMultiline","buttonShowType","emptyCartSelector","cartSelector","cartItemContainerSelector","cartItemsSelector","cartItemSelector","cartCountSelector","buttonDownSelector","buttonUpSelector","cartItemsMinHeight","removeUrl","add2cartUrl","getCartUrl","removeLinkTitle","prototype","slideUp","animate","height","slideDown","proxy","event","$document","off","updateQuantity","openCart","quantityPlus","quantityMinus","removeFromCart","populateCart","updateCart","EventGalleryCartConfiguration","add2carturl","$button","tagName","updateCartItemContainer","y","currentObject","posY","position","top","down","up","linksOnly","cartHTML","html","id","folder","file","count","imagetag","lineitemid","undefined","reload","getJSON","json","doRequest","$inputFild","imagetypeid","quantity","val","fieldName","inputField","currentVal","maxOrderQuantity","change","linkElement","iconElement","children","call","constructor","processList","width","images","Math","ceil","setSize","newHeight","round","newWidth","LOADING_MATCHER","MARKER_IMAGE_IS_IN_PROGRESS_ATTRIBUTE","albumUrl","albumsUrl","EventGalleryGooglePhotosConfiguration","processImages","albums","_groupByAlbum","_collectHTMLElements","_markImagesAsInProgress","_getMainImageDataFromServer","htmlCollection","getElementsByTagName","foundImageHTMLElements","filter","img","backgroundImage","longDesc","src","foundLinkHTMLElements","concat","a","rel","foldername","album","forEach","parsedHTMLElement","getHTMLElement","setAttribute","htmlElements","imageHTMLElement","_parseHTMLElement","updateParameters","parameters","get","set","htmlElement","ParsedImageHTMLElement","ParsedLinkHTMLElement","_doAlbumRequest","_processAlbumResult","_replaceImages","albumsWithMainImagesOnly","_filterForAlbumsWithMainImageOnly","size","_doAlbumsRequest","delete","_getAlbumDataFromServer","_processAlbumsResult","newAlbums","mainImages","image","isMainImage","serverResult","parsedImageHTMLElement","imageUrl","getFile","replaceElementLinks","isOpen","getCurrentSlide","thumbnailContainer","_gallery","close","ParsedHTMLElement","attributeNames","styleAttributeNames","parameterString","substring","URLHelper","parseURLParameter","n","updateParametersWithUrl","extractBackgroudUrl","getImageUrl","getWidth","Image","tag","calculatedWidth","calcSize","glueLeft","glueRight","glueTop","glueBottom","getImageTagHeight","getComputedStyle","isFlickr","ratio","sizeCalculator","SizeCalculator","backgroundImageStyle","secret","secret_o","secret_h","secret_k","farm","server","getFlickrURL","googleWidth","getSize","adjustImageURL","minImageWidth","eventgalleryPageWidth","images_tags","resize","eventgalleryTimer","new_width","getRowWidth","rowWidth","floor","imagesToProcess","slice","shift","imageHeight","imageWidth","rowHeightForRightSideImages","maxWidth","maxHeight","adjustHeight","generateRows","heightJitter","numberOfRowsToCreate","finalRows","currentRow","Row","addSuccessfull","add","processRow","isLastRow","JSGallery2","thumbs","bigImageContainer","pageContainer","pages","running","currentPageNumber","blockKeys","imagesPerFirstPage","imagesPerPage","bigImage","convertThumbs","lastPage","initialIndex","createControls","createGallerySlides","gotoPage","unBlockKeys","selectByIndex","slides","thumbContainer","lightboxLinkElement","newSrc","title","decodeURIComponent","slide","w","h","prevLink","bind","prevImage","mouseleave","mouseLeaveHandler","mouseover","focusControl","zoomLink","nextLink","nextImage","append","showBigImage","showCartButton","add2cartLink","showCartConnector","cartConnectorLink","cartConnectorLinkRel","showSocialMediaButton","socialmediabutton","SocialShareButton","openShareDialog","keydown","keyboardHandler","dragLockToAxis","dragBlockHorizontal","swipeVelocityX","swipeleft","swiperight","tabaction","Touch","addTouch","touchContainerSelector","control","keyCode","getDistanceToMouse","element","s","xDiff","abs","clientX","left","yDiff","clientY","sqrt","pow","resetThumbs","select","selectedContainer","convertThumb","forceReload","deselect","history","pushState","targetPage","activeClass","source","setImage","unbind","currentIndex","openPhotoSwipe","setAfterChangeEventListener","gid","getCurrentIndex","gotoSlide","titleTarget","prevPage","nextPage","zoomImage","pageNumber","selectImage","page","updateHandles","dummy","prevHandle","fadeOut","fadeIn","nextHandle","countHandle","updatePagingBar","currentPage","pageCount","createCountLink","pageSpeed","skipFromRight","skipFromLeft","spaceToRight","spaceToLeft","gallery","myAnchor","myListItem","range","startPosition","onScroll","onLoad","onComplete","EventGalleryLazyloadRange","body","$elements","containerDimension","$offset","self","el","$el","action","currentPosition","scrollTop","elPos","offset","random","eventgalleryImage","addThisImage","gap","gapToClose","availableSizes","flickrSizes","originalwidth","originalheight","longSideSize","originalLongSideSize","sizeCode","secretString","sizeString","minSizes","getMinSizes","widthOkay","heightOkay","lastItem","boxWidth","boxHeight","originalWidth","originalHeight","DownloadButton","download","createElement","appendChild","removeChild","ClickableButton","targetPos","myDiv","closeFunction","remove","closeFunction2","mouseenter","parents","myDivs","tilesPerRow","tile","columnHeight","columnWidth","outerWidth","$tile","outerHeight","smallestColumn","getSmallestColumn","getHighestColumn","smallestColumnValue","smallestColumnNumber","columnValue","columnNumber","removeTouch","elementSelector","leftAction","rightAction","tabAction","allowScrolling","hDistance","vDistance","hDistanceLast","vDistanceLast","hDistancePercent","vSwipe","hSwipe","hSwipMinDistance","vSwipMinDistance","startCoords","endCoords","winWidth","innerWidth","$","winHeight","innerHeight","originalEvent","targetTouches","pageX","pageY","background","$body","onClosed","repositionTimer","windowWidth","dataUrl","onclick","closeOverlay","reposition","startsWith","_getRemoteData","_addContent","_setRositionTimer","force","content","getElementsByClassName","hide","show","callback","ajax","done","PSWP_CONTROLS_MAIN_ELEMENT_CLASS","PSW_CONTROLS_SLIDESHOW_BUTTON_ELEMENT_CLASS","PSW_HIDE_CLASS","PSWP_CONTROLS","_isOpen","galleries","getGalleries","values","l","map","hash","thumbnails","getThumbnailContainers","parseThumbnailElement","returnValue","eTarget","srcElement","iconContainer","classList","contains","clickedListItem","toUpperCase","getSlideBy","getIndexOfSlide","disableAnimation","fromURL","pswpElement","galleryPIDs","galleryUID","shareEl","add2cartEl","getThumbBoundsFn","thumbnail","pageYScroll","pageYOffset","documentElement","rect","getBoundingClientRect","x","overlayClass","pinchToClose","closeOnVerticalDrag","closeOnScroll","navigationFadeDelay","timeToIdle","timeToIdleOutside","pid","showAnimationDuration","PhotoSwipe","PhotoSwipeUIDefault","init","initSlideShow","listen","appendControlls","_registerClickEvents","hashData","parseHash","onThumbnailsClick","currItem","afterChangeFunction","goTo","items","pop","invalidateCurrItems","updateSize","next","doUseSlideshow","slideShow","SlideShow","setDelay","slideshowSpeed","doUseAutoplay","toggleSlideShowState","eventName","fn","tc","parentNode","input","KEY_CLOSE","KEY_SHARE","KEY_BUY","KEY_ZOOM","KEY_PREVIOUS","KEY_NEXT","KEY_FULLSCREEN","KEY_PLAYSLIDESHOW","KEY_PAUSESLIDESHOW","controllElements","removeHtmlElementNode","div","translate","_parseHashString","params","vars","pair","imgEl","nodeType","PhotoSwipeGallerySlide","msrc","Event","createEvent","initEvent","photoSwipeGallery","_photoSwipeGallery","_SlideShow_Running","_currentTimer","_SlideShow_Delay","_SlideShow_Button","interactionHandler","ontouchstart","_planNextSwitch","_stopSlideshow","_adjustNavigation","delay","_startSlideshow","isForTheFirstSwitch","_nextSlide","nextSlide","urlParameterString","pairs","splittedPair","urlSring","parts","queryParts","urlString","Glide","Components","Events","Binder","EventsHandler","prevented","isSwiping","Anchors","mount","_a","Html","wrapper","detach","attach","Object","defineProperty","Transition","after","destroy","SliderOptions","autoplay","slidesElementsSelector","numberOfRowsPerSlide","showNav","_parseOptions","attributes","name","CamelCaseConverter","toCamelCase","sourceGroupElement","sliderTransformator","sliderOptions","_loadOptions","sourceElementSelector","getSlidesElementsSelector","getAutoPlay","doShowNav","numberOfItemsPerSlide","ElementSize","calclateNumberOfFittingItemsPerSlide","querySelector","getNumberOfRowsPerSlide","SliderTransformator","rootElement","transform","glide","type","perView","keyboard","Swipe","Controls","Breakpoints","Autoplay","Anchor","Images","sliderRootSelector","sliderGroupSelector","basicMarkup","sourceElements","getSourceElements","sliderRoot","sliderMarkup","createRange","createContextualFragment","controlElement","sliderGroupElement","currentSliderElement","className","domRect","computedStyle","marginLeft","marginRight","containerElement","numberOfRows","getOuterWidth","str","m","listeners","events","closure","capture","isString","isNodeList","isArray","listener","removeEventListener","NodeList","isPrototypeOf","pswp","framework","ui","_overlayUIUpdated","_controlsVisible","_fullscrenAPI","_controls","_captionContainer","_fakeCaptionContainer","_indexIndicator","_shareButton","_shareModal","_add2cartButton","_add2cartOverlay","_shareModalHidden","_add2cartModalHidden","_initalCloseOnScrollValue","_isIdle","_listen","_loadingIndicator","_loadingIndicatorHidden","_loadingIndicatorTimeout","_galleryHasOneSlide","_options","_defaultUIOptions","barsSize","bottom","closeElClasses","loadingIndicatorDelay","addCaptionHTMLFn","captionEl","closeEl","fullscreenEl","zoomEl","counterEl","arrowEl","preloaderEl","tapToClose","tapToToggleControls","clickToCloseNonZoomable","shareButtons","label","getImageURLForShare","getPageURLForShare","getTextForShare","indexIndicatorSep","fitControlsWidth","_blockControlsTap","_blockControlsTapTimeout","_onControlsTap","mouseUsed","_onIdleMouseMove","uiElement","clickedClass","found","_uiElements","onTap","tapDelay","features","isOldAndroid","_fitControlsInViewport","likelyTouchDevice","screen","_togglePswpClass","cName","_countNumItems","hasOneSlide","getNumItemsFn","_toggleShareModalClass","_toggleShareModal","_updateShareURLs","_toggleAdd2cartModal","isFullscreen","exit","_updateAdd2cartContent","_openWindowPopup","shout","hasAttribute","open","sharingButtons","sharingButton","add2cartButtons","add2cartButton","_hasCloseClass","hasClass","_idleInterval","_idleTimer","_idleIncrement","setIdle","_onMouseLeaveWindow","from","relatedTarget","toElement","nodeName","_setupFullscreenAPI","getFullscreenAPI","eventK","updateFullscreen","template","_setupLoadingIndicator","_toggleLoadingIndicator","loading","allowProgressiveImg","naturalWidth","_applyNavBarGaps","vGap","bars","createEl","insertBefore","captionSize","clientHeight","_setupIdle","setInterval","_setupHidingControlsDuringGestures","now","hideControls","showControls","pinchControlsHidden","option","onInit","toggleDesktopZoom","prev","enter","_setupUIElements","classAttr","loopThroughChildElements","sChildren","topBar","getChildByClass","extend","scrollWrap","update","point","initialZoomLevel","getZoomLevel","zoomTo","getDoubleTapZoom","isDown","preventObj","t","test","prevent","onGlobalTap","onMouseOver","clearInterval","hideAnimationDuration","isIdle","updateIndexIndicator","setScrollOffset","getScrollY","detail","pointerType","fitRatio","releasePoint","supportsFullscreen","d","exitFullscreen","mozCancelFullScreen","webkitExitFullscreen","msExitFullscreen","dE","api","tF","requestFullscreen","enterK","exitK","elementK","mozRequestFullScreen","webkitRequestFullscreen","msRequestFullscreen","Element","ALLOW_KEYBOARD_INPUT","UiClass","methodName","obj","Array","classes","yOffset","reg","RegExp","parentEl","childClassName","node","firstChild","nextSibling","arraySearch","o1","o2","preventOverwrite","hasOwnProperty","easing","sine","out","k","sin","PI","inOut","cos","cubic","detectFeatures","helperEl","helperStyle","vendor","oldIE","all","touch","requestAnimationFrame","raf","caf","cancelAnimationFrame","pointerEvent","navigator","pointerEnabled","msPointerEnabled","ua","userAgent","platform","v","appVersion","match","isOldIOSPhone","androidversion","androidVersion","isMobileOpera","styleChecks","vendors","styleCheckItem","styleName","charAt","toLowerCase","lastTime","currTime","Date","getTime","timeToCall","max","svg","createElementNS","createSVGRect","evName","_handleEv","handleEvent","DOUBLE_TAP_RADIUS","NUM_HOLDERS","allowPanToNext","spacing","bgOpacity","loop","verticalDragRange","showHideOpacity","focus","escKey","arrowKeys","mainScrollEndFriction","panEndFriction","isClickableElement","isMouseClick","maxSpreadZoom","modal","scaleMode","_getEmptyPoint","_isDestroying","_closedByScroll","_currentItemIndex","_containerStyle","_containerShiftIndex","_currPanDist","_startPanOffset","_panOffset","_upMoveEvents","_downEvents","_globalEventHandlers","_viewportSize","_currZoomLevel","_startZoomLevel","_translatePrefix","_translateSufix","_updateSizeInterval","_itemsNeedUpdate","_currPositionIndex","_offset","_slideSize","_itemHolders","_prevItemIndex","_indexDiff","_dragStartEvent","_dragMoveEvent","_dragEndEvent","_dragCancelEvent","_transformKey","_pointerEventEnabled","_isFixedPosition","_likelyTouchDevice","_modules","_requestAF","_cancelAF","_initalClassName","_initalWindowScrollY","_oldIE","_currentWindowScrollY","_features","_windowVisibleSize","_renderMaxResolution","_orientationChangeTimeout","_registerModule","module","publicMethods","_getLoopedId","numSlides","_getNumItems","_listeners","_shout","args","arguments","apply","_getCurrentTime","_applyBgOpacity","opacity","_bgOpacity","bg","_applyZoomTransform","styleObj","zoom","_applyCurrentZoomPan","allowRenderResolution","_currZoomElementStyle","_setImageSize","_applyZoomPanToItem","initialPosition","_setTranslateX","elStyle","_moveMainScroll","dragging","newSlideIndexOffset","delta","_mainScrollPos","_calculatePanOffset","axis","zoomLevel","_midZoomPoint","_equalizePoints","p1","p2","_roundPoint","p","_mouseMoveTimeout","_onFirstMouseMove","_bindEvents","_unbindEvents","scroll","_isDragging","_calculatePanBounds","bounds","_calculateItemSize","_currPanBounds","_getMinZoomLevel","_getMaxZoomLevel","_modifyDestPanOffset","destPanBounds","destPanOffset","destZoomLevel","min","_setupTransforms","allow3dTransform","perspective","zoomRatio","_onKeyDown","keydownAction","ctrlKey","altKey","shiftKey","metaKey","_onGlobalClick","_moved","_zoomStarted","_mainScrollAnimating","_verticalDragInitiated","_updatePageScrollOffset","_animations","_numAnimations","_stopAnimation","_registerStartAnimation","_stopAllAnimations","_animateProp","b","endProp","easingFn","onUpdate","startAnimTime","animloop","viewportSize","isMainScrollAnimating","isDragging","isZooming","_isZooming","applyZoomPan","panX","panY","itemHolders","wrap","display","orientationchange","clientWidth","oldPhone","animationName","_getItemAt","rootClasses","mainClass","setContent","updateCurrItem","_showOrHide","_showOrHideTimeout","_stopDragUpdateLoop","panTo","diff","updateCurrZoomItem","emulateSetContent","zoomElement","center","needsUpdate","beforeAnimation","diffAbs","tempHolder","unshift","prevItem","windowScrollY","holder","hIndex","cleanSlide","centerPoint","speed","updateFn","initialPanOffset","MIN_SWIPE_DISTANCE","DIRECTION_CHECK_OFFSET","_gestureStartTime","_gestureCheckSpeedTime","_currPoint","_startPoint","_currPointers","_startMainScrollPos","_releaseAnimData","_posPoints","_tempPoint","_isZoomingIn","_oldAndroidTouchEndTimeout","_currZoomedItemIndex","_centerPoint","_lastReleaseTime","_isMultitouch","_dragAnimFrame","_mainScrollShifted","_currentPoints","_currPointsDistance","_startPointsDistance","_currCenterPoint","_direction","_isFirstMove","_opacityChanged","_wasOverInitialZoom","_isEqualPoints","_isNearbyPoints","touch0","touch1","_calculatePointsDistance","_dragUpdateLoop","_renderMovement","_canPan","_closestElement","_preventObj","_preventDefaultEventBehaviour","_convertTouchToPoint","identifier","_findCenterOfPoints","pCenter","_pushPosPoint","time","o","_calculateVerticalDragOpacityRatio","_ePoint1","_ePoint2","_tempPointsArr","_tempCounter","_getTouchPoints","touches","_panOrMoveMainScroll","panFriction","overDiff","newOffset","startOverDiff","dir","newMainScrollPosition","mainScrollDiff","newPanPos","newMainScrollPos","_onDragStart","button","_initialZoomRunning","pointerIndex","pointerId","startPointsList","numPoints","_onDragMove","touchesList","pointsDistance","_calculateZoomLevel","zoomFriction","minZoomLevel","maxZoomLevel","minusDiff","percent","opacityRatio","mainScrollChanged","_onDragRelease","MSPOINTER_TYPES","touchList","gestureType","changedTouches","releaseTimeDiff","_initDragReleaseAnimationData","calculateSwipeSpeed","initalPanY","initialBgOpacity","itemChanged","_finishSwipeMainScrollGesture","_completeZoomGesture","_completePanGesture","lastFlickDuration","tempReleasePos","lastFlickOffset","lastFlickDist","lastFlickSpeed","slowDownRatio","slowDownRatioReverse","speedDecelerationRatio","speedDecelerationRatioAbs","distanceOffset","backAnimDestination","backAnimStarted","calculateOverBoundsAnimOffset","pos","calculateAnimOffset","timeDiff","panAnimLoop","zoomPan","lastNow","animData","itemsDiff","totalShiftDist","isFastLastFlick","nextCircle","animateToX","animateToDist","finishAnimDuration","touchesDistance","destOpacity","initialOpacity","initGestures","addEventNames","pref","move","cancel","maxTouchPoints","msMaxTouchPoints","mousedown","mousemove","mouseup","completeFn","_initialContentSet","thumbBounds","initialLayout","duration","removeAttribute","startAnimation","closeWithRaf","fadeEverything","loadError","miniImg","webkitBackfaceVisibility","initalBgOpacity","_items","_tempPanAreaSize","_imagesToAppendPool","_controllerDefaultOptions","errorMsg","forceProgressiveLoading","preload","_initialIsLoop","_getZeroBounds","_calculateSingleItemPanBounds","realPanElementW","realPanElementH","isInitial","hRatio","vRatio","_appendImage","baseDiv","preventAnimation","keepPlaceholder","imageAppended","loaded","placeholder","_preloadImage","loadComplete","onload","onerror","_checkForError","cleanUp","maxRes","lastChild","_appendImagesPool","poolItem","clearPlaceholder","lazyLoadItem","initController","getItemAt","isNext","preloadBefore","preloadAfter","preloader","placeholderClassName","tapTimer","tapReleasePoint","_dispatchTapEvent","origEvent","eDetail","initCustomEvent","initTap","onTapStart","onTapRelease","p0","clickedTagName","_wheelDelta","initDesktopZoom","setupDesktopZoom","handleMouseWheel","mouseZoomedIn","hasDraggingClass","updateZoomable","removeDraggingClass","deltaY","deltaMode","deltaX","wheelDeltaX","wheelDeltaY","wheelDelta","newPanX","newPanY","doubleTapZoomLevel","zoomOut","_historyDefaultOptions","_historyUpdateTimeout","_hashChangeTimeout","_hashAnimCheckTimeout","_hashChangedByScript","_hashChangedByHistory","_hashReseted","_initialHash","_historyChanged","_closedFromURL","_urlChangedOnce","_windowLoc","_supportsPushState","_getHash","_cleanHistoryTimeouts","_parseItemIndexFromURL","searchfor","_updateHash","newHash","newURL","initHistory","updateURL","onHashChange","returnToOriginal","back","pathname","search"],"mappings":"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A;AACA;AACA;AACA,YAAY;AACZ;AACA;;AAEA;AACA;AACA;AACA,YAAY;AACZ;AACA;;AAEA;AACA;AACA;AACA,YAAY;AACZ;AACA;;AAEA;AACA;AACA;AACA,YAAY;AACZ;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM,yBAAyB;AAC/B;AACA,YAAY;AACZ;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA,iBAAiB;;AAEjB;AACA;AACA;AACA,yEAAyE,2BAA2B;AACpG,YAAY;AACZ;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,YAAY,OAAO;AACnB,YAAY;AACZ;AACA;AACA;AACA;;AAEA;AACA;AACA,CAAC;AACD;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,mBAAmB,kBAAkB;AACrC;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA,iBAAiB,sBAAsB;AACvC;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,KAAK;AACL;AACA;AACA,GAAG;AACH;AACA,GAAG;AACH;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,aAAa;AACb;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,aAAa;AACb;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,YAAY,EAAE;AACd,YAAY;AACZ;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,YAAY,EAAE;AACd,YAAY;AACZ;AACA;AACA;AACA;AACA;;AAEA,6DAA6D;AAC7D;;AAEA;AACA;AACA;AACA,YAAY,EAAE;AACd,YAAY;AACZ;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,YAAY,EAAE;AACd,YAAY;AACZ;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,YAAY,EAAE;AACd,YAAY;AACZ;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,YAAY,EAAE;AACd,YAAY;AACZ;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB;AACA,aAAa;AACb;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,YAAY,OAAO;AACnB,YAAY,OAAO;AACnB,YAAY,OAAO;AACnB,YAAY;AACZ;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,YAAY,OAAO;AACnB,YAAY;AACZ;AACA;AACA;AACA;;AAEA;AACA,GAAG,IAAI;AACP;;AAEA;AACA;AACA;AACA,YAAY,OAAO;AACnB,YAAY,OAAO;AACnB,YAAY;AACZ;AACA;AACA,2BAA2B;;AAE3B;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC;;AAEjC;AACA,6CAA6C;AAC7C;AACA;;AAEA;AACA,qCAAqC;AACrC;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,aAAa,OAAO;AACpB;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,aAAa,aAAa;AAC1B,aAAa,SAAS;AACtB;;;AAGA;AACA;AACA;AACA;AACA,uBAAuB,kBAAkB;AACzC;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,eAAe,aAAa;AAC5B,eAAe,QAAQ;AACvB;;AAEA,GAAG;AACH;AACA;AACA;AACA,uBAAuB,kBAAkB;AACzC;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,0BAA0B;AAC1B,OAAO;AACP;AACA,GAAG;AACH;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA,cAAc,OAAO;AACrB,cAAc,OAAO;AACrB;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,aAAa,OAAO;AACpB,cAAc;AACd;;;AAGA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA,OAAO;AACP;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,gBAAgB,MAAM;AACtB,gBAAgB;AAChB;;AAEA,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA,OAAO;AACP;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,eAAe,OAAO;AACtB,gBAAgB;AAChB;;AAEA,GAAG;AACH;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,UAAU,EAAE,WAAW,EAAE;AACzB;AACA;AACA;AACA,eAAe,OAAO;AACtB,gBAAgB;AAChB;;AAEA,GAAG;AACH;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,eAAe,OAAO;AACtB,gBAAgB;AAChB;;AAEA,GAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,gBAAgB;AAChB;;AAEA,GAAG;AACH;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,eAAe,eAAe;AAC9B,gBAAgB;AAChB;;AAEA,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,gBAAgB;AAChB;;AAEA,GAAG;AACH;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,gBAAgB;AAChB;;AAEA,GAAG;AACH;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,gBAAgB;AAChB;;AAEA,GAAG;AACH;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,gBAAgB,aAAa;AAC7B,gBAAgB,SAAS;AACzB,gBAAgB;AAChB;;AAEA,GAAG;AACH;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,gBAAgB,OAAO;AACvB,gBAAgB;AAChB;;AAEA,GAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,gBAAgB;AAChB;;AAEA,GAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,gBAAgB,OAAO;AACvB,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;;AAEA;AACA;AACA;AACA,gBAAgB;AAChB;;AAEA,GAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,gBAAgB;AAChB;;AAEA,GAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,gBAAgB;AAChB;;AAEA,GAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA,KAAK;;;AAGL;AACA;AACA;AACA,eAAe,OAAO;AACtB;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA,SAAS;AACT;AACA,KAAK;;;AAGL;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;;;AAGA;;AAEA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;;AAEA;AACA;;AAEA;AACA,WAAW;AACX;AACA,WAAW;AACX;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW;AACX;AACA;;AAEA;AACA;;AAEA;AACA,WAAW;AACX;AACA,WAAW;AACX;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;;;AAGL;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA,KAAK;;;AAGL;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA,KAAK;;;AAGL;AACA;AACA;AACA,eAAe,OAAO;AACtB,gBAAgB;AAChB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA,KAAK;;;AAGL;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;;AAEA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,SAAS;AACpB,WAAW,OAAO;AAClB,WAAW,QAAQ;AACnB,YAAY;AACZ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,eAAe;AAC9B,gBAAgB;AAChB;AACA;AACA,0CAA0C,SAAS;AACnD;AACA;;AAEA;AACA;AACA,SAAS;AACT;AACA;;AAEA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,KAAK;;;AAGL;AACA;AACA;AACA,eAAe,eAAe;AAC9B,iBAAiB;AACjB;AACA;AACA,0CAA0C,SAAS;AACnD;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;;AAEA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;;AAEA;AACA;AACA;AACA,YAAY,QAAQ;AACpB,YAAY;AACZ;AACA;AACA;AACA;AACA;;AAEA,UAAU,GAAG;AACb;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,YAAY,QAAQ;AACpB,YAAY;AACZ;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA,eAAe,MAAM;AACrB;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;;AAEA;AACA;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA,KAAK;;;AAGL;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA,KAAK;;;AAGL;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA,KAAK;;;AAGL;AACA;AACA;AACA,eAAe,cAAc;AAC7B,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;;AAEA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA,KAAK;;;AAGL;AACA;AACA;AACA,gBAAgB,OAAO;AACvB,gBAAgB;AAChB;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA,OAAO;;AAEP;AACA;AACA;AACA,SAAS;AACT,OAAO;AACP;AACA;;AAEA;AACA;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA,KAAK;;;AAGL;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;;AAEA,qBAAqB,mBAAmB;AACxC;AACA;AACA,KAAK;;;AAGL;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA,KAAK;;;AAGL;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;;AAEA,qBAAqB,mBAAmB;AACxC;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;;AAEA;AACA;;AAEA;AACA,KAAK;;;AAGL;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA,KAAK;;;AAGL;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,SAAS;AACT;AACA,KAAK;;;AAGL;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;;AAEA;;AAEA;AACA;AACA,OAAO;AACP;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;;;AAGL;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;;AAEA,qBAAqB,sDAAsD;AAC3E,uBAAuB,kBAAkB;AACzC;;AAEA;;AAEA;AACA;;AAEA,wBAAwB,iBAAiB;AACzC;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA,KAAK;;;AAGL;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;;AAEA,qBAAqB,mBAAmB;AACxC;AACA;;AAEA,uBAAuB,sBAAsB;AAC7C;AACA;;AAEA,uBAAuB,oBAAoB;AAC3C;AACA;AACA,KAAK;;;AAGL;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;;;AAGA,qBAAqB,kBAAkB;AACvC;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,cAAc,aAAa;AAC3B,cAAc,wBAAwB;AACtC,cAAc,SAAS;AACvB,cAAc;AACd;;;AAGA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,qBAAqB,mBAAmB;AACxC;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,gBAAgB,aAAa;AAC7B,gBAAgB,wBAAwB;AACxC,gBAAgB;AAChB;;AAEA,GAAG;AACH;AACA;AACA;AACA;AACA;;AAEA,qBAAqB,mBAAmB;AACxC;AACA;AACA;;AAEA;AACA;AACA;AACA,iBAAiB;AACjB;;AAEA,GAAG;AACH;AACA;AACA;AACA;AACA,GAAG;AACH;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;;AAGL;AACA;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA,OAAO;AACP,KAAK;;;AAGL;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA,KAAK;;;AAGL;AACA;AACA;AACA,eAAe,OAAO;AACtB,iBAAiB;AACjB;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,KAAK;;;AAGL;AACA;AACA;AACA,eAAe,OAAO;AACtB,iBAAiB;AACjB;AACA;AACA;AACA,KAAK;;;AAGL;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA,KAAK;;;AAGL;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA,KAAK;;;AAGL;AACA;AACA;AACA,eAAe,OAAO;AACtB,gBAAgB;AAChB;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;;AAEA;AACA;AACA;AACA,YAAY,OAAO;AACnB,YAAY,OAAO;AACnB,YAAY;AACZ;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB,OAAO;AACvB,gBAAgB;AAChB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,YAAY,OAAO;AACnB,YAAY,OAAO;AACnB,YAAY;AACZ;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB,OAAO;AACvB,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,YAAY,OAAO;AACnB,YAAY,OAAO;AACnB,YAAY;AACZ;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB,OAAO;AACvB,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,YAAY,OAAO;AACnB,YAAY,OAAO;AACnB,YAAY;AACZ;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB,OAAO;AACvB,gBAAgB;AAChB;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,YAAY,OAAO;AACnB,YAAY,OAAO;AACnB,YAAY;AACZ;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB,OAAO;AACvB,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,YAAY,OAAO;AACnB,YAAY,OAAO;AACnB,YAAY;AACZ;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;;AAEA;AACA;AACA;AACA;AACA,gBAAgB,OAAO;AACvB,gBAAgB;AAChB;AACA;AACA,qBAAqB,yBAAyB;AAC9C;;AAEA;AACA;AACA,SAAS;AACT;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,eAAe,OAAO;AACtB,gBAAgB;AAChB;AACA;AACA;;AAEA;AACA,KAAK;;;AAGL;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,OAAO;;AAEP;AACA;;AAEA;AACA;AACA;;AAEA;AACA,OAAO;;AAEP;AACA;;AAEA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;;AAEA;AACA;AACA;AACA;AACA,eAAe,OAAO;AACtB,gBAAgB;AAChB;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,KAAK;;;AAGL;AACA;AACA;AACA,eAAe,QAAQ;AACvB,gBAAgB;AAChB;AACA;AACA;;AAEA;AACA,KAAK;;;AAGL;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA,KAAK;;;AAGL;AACA;AACA;AACA,gBAAgB,SAAS;AACzB,gBAAgB;AAChB;AACA;AACA;AACA;AACA,OAAO;AACP,KAAK;;;AAGL;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;;AAEA;AACA,KAAK;;;AAGL;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA,KAAK;;;AAGL;AACA;AACA;AACA,eAAe,OAAO;AACtB,gBAAgB;AAChB;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,KAAK;;;AAGL;AACA;AACA;AACA,eAAe,OAAO;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;AACA,SAAS;AACT;AACA;AACA;AACA,KAAK;;;AAGL;AACA;AACA;AACA,eAAe,OAAO;AACtB,gBAAgB;AAChB;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,SAAS;AACT;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,SAAS;AACT;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA,KAAK;;;AAGL;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,SAAS;AACT;;AAEA;AACA;AACA;AACA,SAAS;AACT;AACA,KAAK;;;AAGL;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA,KAAK;;;AAGL;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;;AAEA;AACA;AACA,OAAO;AACP,KAAK;;;AAGL;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA,KAAK;;;AAGL;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;;AAEA;AACA;AACA,OAAO;AACP,KAAK;;;AAGL;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA,KAAK;;;AAGL;AACA;AACA;AACA,eAAe,OAAO;AACtB;AACA;AACA;AACA;AACA;;AAEA;AACA,KAAK;;;AAGL;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,KAAK;;;AAGL;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;;AAEA;;AAEA;AACA,KAAK;;;AAGL;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;;AAEA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;;AAEA;AACA;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA,KAAK;;;AAGL;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA,KAAK;;;AAGL;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA,KAAK;;;AAGL;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;;AAEA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;;AAEA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB;AAChB;AACA;;AAEA;AACA,KAAK;;;AAGL;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA,KAAK;;;AAGL;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA,KAAK;;;AAGL;AACA;AACA;AACA,gBAAgB,OAAO;AACvB,gBAAgB;AAChB;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;;;AAGL;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;;AAEA;AACA,uBAAuB,uBAAuB;AAC9C;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA,KAAK;;;AAGL;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;;AAEA;AACA,uBAAuB,uBAAuB;AAC9C;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB;AAChB;AACA;;AAEA;AACA;AACA;AACA;AACA,gBAAgB;AAChB;AACA;;AAEA;AACA,KAAK;;;AAGL;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA,qBAAqB,oBAAoB;AACzC;AACA;AACA,KAAK;;;AAGL;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA,qBAAqB,oBAAoB;AACzC;AACA;AACA,KAAK;;;AAGL;AACA;AACA;AACA,gBAAgB,YAAY;AAC5B,gBAAgB;AAChB;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA,OAAO;AACP,KAAK;;;AAGL;AACA;AACA;AACA,gBAAgB,YAAY;AAC5B,gBAAgB;AAChB;AACA;AACA;AACA,KAAK;;;AAGL;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA,qBAAqB,oBAAoB;AACzC;AACA;AACA,KAAK;;;AAGL;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA,qBAAqB,oBAAoB;AACzC;AACA;AACA,KAAK;;;AAGL;AACA;AACA;AACA,eAAe,eAAe;AAC9B,gBAAgB;AAChB;AACA;AACA,qBAAqB,qBAAqB;AAC1C;AACA;AACA,KAAK;;;AAGL;AACA;AACA;AACA,eAAe,eAAe;AAC9B,gBAAgB;AAChB;AACA;AACA,qBAAqB,qBAAqB;AAC1C;AACA;AACA,KAAK;;;AAGL;AACA;AACA;AACA;AACA;AACA,eAAe,OAAO;AACtB,gBAAgB;AAChB;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;;AAEA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;;AAEA;AACA;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA,KAAK;;;AAGL;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA,KAAK;;;AAGL;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA,KAAK;;;AAGL;AACA;AACA;AACA,gBAAgB,OAAO;AACvB,gBAAgB;AAChB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;;AAEA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;;AAEA;AACA;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;;;AAGL;AACA;AACA;AACA,eAAe,eAAe;AAC9B,gBAAgB;AAChB;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA,WAAW;AACX;AACA;AACA,KAAK;;;AAGL;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA,KAAK;;;AAGL;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;;AAEA;AACA;AACA,OAAO;;AAEP;AACA;AACA,OAAO;AACP,KAAK;;;AAGL;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;;AAEA;AACA;AACA;AACA,WAAW,OAAO;AAClB,aAAa;AACb;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;;AAEA;AACA;AACA;AACA,YAAY;AACZ;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;;AAEA;AACA;AACA;AACA,YAAY;AACZ;AACA,4BAA4B;;AAE5B;AACA;AACA;AACA;AACA,eAAe,OAAO;AACtB,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;;AAEA,0BAA0B;AAC1B,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,iIAAiI;AACjI;AACA,GAAG;AACH;AACA,CAAC;;AAEc,sEAAO,EAAC;AACuI;;;;;;;;;;;;AChiH9J,uC;;;;;;;;;;;ACAA,mBAAO,CAAC,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AAO,CAAC,4FAAe;AACvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,E;;;;;;;;;;;ACnBA;AACA;AACA;AACA;AACA,E;;;;;;;;;;;ACJA;AACA,kBAAkB,mBAAO,CAAC,kFAAU;AACpC,iCAAiC,QAAQ,gBAAgB,UAAU,GAAG;AACtE,CAAC,E;;;;;;;;;;;ACHD,eAAe,mBAAO,CAAC,0FAAc;AACrC,eAAe,mBAAO,CAAC,oFAAW;AAClC;AACA;AACA;AACA;AACA,E;;;;;;;;;;;ACNA;AACA;AACA;AACA,a;;;;;;;;;;;ACHA;AACA,cAAc,mBAAO,CAAC,8FAAgB;AACtC,cAAc,mBAAO,CAAC,8FAAgB;AACtC,cAAc,mBAAO,CAAC,4FAAe;AACrC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH,E;;;;;;;;;;;ACdA,gBAAgB,mBAAO,CAAC,oFAAW;AACnC,gBAAgB,mBAAO,CAAC,gFAAS;AACjC,gBAAgB,mBAAO,CAAC,8EAAQ;AAChC,gBAAgB,mBAAO,CAAC,gFAAS;AACjC;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mEAAmE;AACnE;AACA,qFAAqF;AACrF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX,SAAS;AACT;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,+CAA+C;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA,cAAc;AACd,cAAc;AACd,cAAc;AACd,cAAc;AACd,eAAe;AACf,eAAe;AACf,eAAe;AACf,gBAAgB;AAChB,yB;;;;;;;;;;;AC5DA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA,E;;;;;;;;;;;ACNA,kBAAkB,mBAAO,CAAC,8EAAQ;AAClC,kBAAkB,mBAAO,CAAC,0FAAc;AACxC,kBAAkB,mBAAO,CAAC,kGAAkB;AAC5C,kBAAkB,mBAAO,CAAC,0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AAc;AACrC;AACA;AACA;AACA;AACA,cAAc,mBAAO,CAAC,kFAAU;AAChC,iDAAiD;AACjD,CAAC;AACD;AACA,qBAAqB;AACrB;AACA,SAAS;AACT,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,E;;;;;;;;;;;;ACpDa;AACb;AACA,eAAe,mBAAO,CAAC,8FAAgB;AACvC,eAAe,mBAAO,CAAC,8FAAgB;AACvC,eAAe,mBAAO,CAAC,4FAAe;AACtC,eAAe,mBAAO,CAAC,0FAAc;AACrC,eAAe,mBAAO,CAAC,sFAAY;AACnC;;AAEA;AACA,6BAA6B,mBAAO,CAAC,kFAAU;AAC/C;AACA;AACA;AACA;AACA;AACA,kCAAkC,UAAU,EAAE;AAC9C,mBAAmB,sCAAsC;AACzD,CAAC,oCAAoC;AACrC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH,CAAC,W;;;;;;;;;;;AChCD;AACA,kBAAkB,mBAAO,CAAC,0FAAc;AACxC,kBAAkB,mBAAO,CAAC,4FAAe;AACzC,kBAAkB,mBAAO,CAAC,kGAAkB;AAC5C,kBAAkB,mBAAO,CAAC,4FAAe;AACzC,6BAA6B;AAC7B;;AAEA;AACA;AACA;AACA,eAAe,mBAAO,CAAC,4FAAe;AACtC;AACA;AACA;AACA;AACA,EAAE,mBAAO,CAAC,gFAAS;AACnB,6BAA6B;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA,E;;;;;;;;;;;ACvCA,qBAAqB,mBAAO,CAAC,0FAAc;AAC3C,qBAAqB,mBAAO,CAAC,oGAAmB;AAChD,qBAAqB,mBAAO,CAAC,gGAAiB;AAC9C;;AAEA,YAAY,mBAAO,CAAC,8FAAgB;A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CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,sBAAsB;AACtB,oBAAoB,uBAAuB,SAAS,IAAI;AACxD,GAAG;AACH,CAAC;AACD;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,CAAC;AACD;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yDAAyD;AACzD;AACA,KAAK;AACL;AACA,sBAAsB,iCAAiC;AACvD,KAAK;AACL,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8DAA8D,8BAA8B;AAC5F;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA,EAAE,mBAAO,CAAC,8FAAgB;AAC1B,EAAE,mBAAO,CAAC,4FAAe;AACzB,EAAE,mBAAO,CAAC,8FAAgB;;AAE1B,qBAAqB,mBAAO,CAAC,sFAAY;AACzC;AACA;;AAEA;AACA;AACA;AACA;;AAEA,0DAA0D,gBAAgB;;AAE1E;AACA;AACA;AACA,oBAAoB,oBAAoB;;AAExC,0CAA0C,oBAAoB;;AAE9D;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,GAAG;AACH,wBAAwB,eAAe,EAAE;AACzC,wBAAwB,gBAAgB;AACxC,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA,oDAAoD,KAAK,QAAQ,iCAAiC;AAClG,CAAC;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","file":"eventgallery-debug.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./eventgallery.js\");\n","module.exports = require(\"core-js/library/fn/array/from\");","module.exports = require(\"core-js/library/fn/array/is-array\");","module.exports = require(\"core-js/library/fn/get-iterator\");","module.exports = require(\"core-js/library/fn/is-iterable\");","module.exports = require(\"core-js/library/fn/map\");","module.exports = require(\"core-js/library/fn/object/assign\");","module.exports = require(\"core-js/library/fn/object/create\");","module.exports = require(\"core-js/library/fn/object/define-property\");","module.exports = require(\"core-js/library/fn/object/get-prototype-of\");","module.exports = require(\"core-js/library/fn/object/set-prototype-of\");","module.exports = require(\"core-js/library/fn/parse-float\");","module.exports = require(\"core-js/library/fn/parse-int\");","module.exports = require(\"core-js/library/fn/set\");","module.exports = require(\"core-js/library/fn/symbol\");","module.exports = require(\"core-js/library/fn/symbol/iterator\");","import _Array$isArray from \"../../core-js/array/is-array\";\nexport default function _arrayWithHoles(arr) {\n  if (_Array$isArray(arr)) return arr;\n}","import _Array$isArray from \"../../core-js/array/is-array\";\nexport default function _arrayWithoutHoles(arr) {\n  if (_Array$isArray(arr)) {\n    for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) {\n      arr2[i] = arr[i];\n    }\n\n    return arr2;\n  }\n}","export default function _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}","export default function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}","import _Object$defineProperty from \"../../core-js/object/define-property\";\n\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n\n    _Object$defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nexport default function _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}","import _Object$getPrototypeOf from \"../../core-js/object/get-prototype-of\";\nimport _Object$setPrototypeOf from \"../../core-js/object/set-prototype-of\";\nexport default function _getPrototypeOf(o) {\n  _getPrototypeOf = _Object$setPrototypeOf ? _Object$getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || _Object$getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}","import _Object$create from \"../../core-js/object/create\";\nimport setPrototypeOf from \"./setPrototypeOf\";\nexport default function _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = _Object$create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) setPrototypeOf(subClass, superClass);\n}","import _Array$from from \"../../core-js/array/from\";\nimport _isIterable from \"../../core-js/is-iterable\";\nexport default function _iterableToArray(iter) {\n  if (_isIterable(Object(iter)) || Object.prototype.toString.call(iter) === \"[object Arguments]\") return _Array$from(iter);\n}","import _getIterator from \"../../core-js/get-iterator\";\nexport default function _iterableToArrayLimit(arr, i) {\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n  var _e = undefined;\n\n  try {\n    for (var _i = _getIterator(arr), _s; !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}","export default function _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance\");\n}","export default function _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance\");\n}","import _typeof from \"../../helpers/esm/typeof\";\nimport assertThisInitialized from \"./assertThisInitialized\";\nexport default function _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  }\n\n  return assertThisInitialized(self);\n}","import _Object$setPrototypeOf from \"../../core-js/object/set-prototype-of\";\nexport default function _setPrototypeOf(o, p) {\n  _setPrototypeOf = _Object$setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}","import arrayWithHoles from \"./arrayWithHoles\";\nimport iterableToArrayLimit from \"./iterableToArrayLimit\";\nimport nonIterableRest from \"./nonIterableRest\";\nexport default function _slicedToArray(arr, i) {\n  return arrayWithHoles(arr) || iterableToArrayLimit(arr, i) || nonIterableRest();\n}","import arrayWithoutHoles from \"./arrayWithoutHoles\";\nimport iterableToArray from \"./iterableToArray\";\nimport nonIterableSpread from \"./nonIterableSpread\";\nexport default function _toConsumableArray(arr) {\n  return arrayWithoutHoles(arr) || iterableToArray(arr) || nonIterableSpread();\n}","import _Symbol$iterator from \"../../core-js/symbol/iterator\";\nimport _Symbol from \"../../core-js/symbol\";\n\nfunction _typeof2(obj) { if (typeof _Symbol === \"function\" && typeof _Symbol$iterator === \"symbol\") { _typeof2 = function _typeof2(obj) { return typeof obj; }; } else { _typeof2 = function _typeof2(obj) { return obj && typeof _Symbol === \"function\" && obj.constructor === _Symbol && obj !== _Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof2(obj); }\n\nexport default function _typeof(obj) {\n  if (typeof _Symbol === \"function\" && _typeof2(_Symbol$iterator) === \"symbol\") {\n    _typeof = function _typeof(obj) {\n      return _typeof2(obj);\n    };\n  } else {\n    _typeof = function _typeof(obj) {\n      return obj && typeof _Symbol === \"function\" && obj.constructor === _Symbol && obj !== _Symbol.prototype ? \"symbol\" : _typeof2(obj);\n    };\n  }\n\n  return _typeof(obj);\n}","/*!\n * Glide.js v3.2.3\n * (c) 2013-2018 Jdrzej Chaubek <jedrzej.chalubek@gmail.com> (http://jedrzejchalubek.com/)\n * Released under the MIT License.\n */\n\nvar defaults = {\n  /**\n   * Type of the movement.\n   *\n   * Available types:\n   * `slider` - Rewinds slider to the start/end when it reaches the first or last slide.\n   * `carousel` - Changes slides without starting over when it reaches the first or last slide.\n   *\n   * @type {String}\n   */\n  type: 'slider',\n\n  /**\n   * Start at specific slide number defined with zero-based index.\n   *\n   * @type {Number}\n   */\n  startAt: 0,\n\n  /**\n   * A number of slides visible on the single viewport.\n   *\n   * @type {Number}\n   */\n  perView: 1,\n\n  /**\n   * Focus currently active slide at a specified position in the track.\n   *\n   * Available inputs:\n   * `center` - Current slide will be always focused at the center of a track.\n   * `0,1,2,3...` - Current slide will be focused on the specified zero-based index.\n   *\n   * @type {String|Number}\n   */\n  focusAt: 0,\n\n  /**\n   * A size of the gap added between slides.\n   *\n   * @type {Number}\n   */\n  gap: 10,\n\n  /**\n   * Change slides after a specified interval. Use `false` for turning off autoplay.\n   *\n   * @type {Number|Boolean}\n   */\n  autoplay: false,\n\n  /**\n   * Stop autoplay on mouseover event.\n   *\n   * @type {Boolean}\n   */\n  hoverpause: true,\n\n  /**\n   * Allow for changing slides with left and right keyboard arrows.\n   *\n   * @type {Boolean}\n   */\n  keyboard: true,\n\n  /**\n   * Stop running `perView` number of slides from the end. Use this\n   * option if you don't want to have an empty space after\n   * a slider. Works only with `slider` type and a\n   * non-centered `focusAt` setting.\n   *\n   * @type {Boolean}\n   */\n  bound: false,\n\n  /**\n   * Minimal swipe distance needed to change the slide. Use `false` for turning off a swiping.\n   *\n   * @type {Number|Boolean}\n   */\n  swipeThreshold: 80,\n\n  /**\n   * Minimal mouse drag distance needed to change the slide. Use `false` for turning off a dragging.\n   *\n   * @type {Number|Boolean}\n   */\n  dragThreshold: 120,\n\n  /**\n   * A maximum number of slides to which movement will be made on swiping or dragging. Use `false` for unlimited.\n   *\n   * @type {Number|Boolean}\n   */\n  perTouch: false,\n\n  /**\n   * Moving distance ratio of the slides on a swiping and dragging.\n   *\n   * @type {Number}\n   */\n  touchRatio: 0.5,\n\n  /**\n   * Angle required to activate slides moving on swiping or dragging.\n   *\n   * @type {Number}\n   */\n  touchAngle: 45,\n\n  /**\n   * Duration of the animation in milliseconds.\n   *\n   * @type {Number}\n   */\n  animationDuration: 400,\n\n  /**\n   * Allows looping the `slider` type. Slider will rewind to the first/last slide when it's at the start/end.\n   *\n   * @type {Boolean}\n   */\n  rewind: true,\n\n  /**\n   * Duration of the rewinding animation of the `slider` type in milliseconds.\n   *\n   * @type {Number}\n   */\n  rewindDuration: 800,\n\n  /**\n   * Easing function for the animation.\n   *\n   * @type {String}\n   */\n  animationTimingFunc: 'cubic-bezier(0.165, 0.840, 0.440, 1.000)',\n\n  /**\n   * Throttle costly events at most once per every wait milliseconds.\n   *\n   * @type {Number}\n   */\n  throttle: 10,\n\n  /**\n   * Moving direction mode.\n   *\n   * Available inputs:\n   * - 'ltr' - left to right movement,\n   * - 'rtl' - right to left movement.\n   *\n   * @type {String}\n   */\n  direction: 'ltr',\n\n  /**\n   * The distance value of the next and previous viewports which\n   * have to peek in the current view. Accepts number and\n   * pixels as a string. Left and right peeking can be\n   * set up separately with a directions object.\n   *\n   * For example:\n   * `100` - Peek 100px on the both sides.\n   * { before: 100, after: 50 }` - Peek 100px on the left side and 50px on the right side.\n   *\n   * @type {Number|String|Object}\n   */\n  peek: 0,\n\n  /**\n   * Collection of options applied at specified media breakpoints.\n   * For example: display two slides per view under 800px.\n   * `{\n   *   '800px': {\n   *     perView: 2\n   *   }\n   * }`\n   */\n  breakpoints: {},\n\n  /**\n   * Collection of internally used HTML classes.\n   *\n   * @todo Refactor `slider` and `carousel` properties to single `type: { slider: '', carousel: '' }` object\n   * @type {Object}\n   */\n  classes: {\n    direction: {\n      ltr: 'glide--ltr',\n      rtl: 'glide--rtl'\n    },\n    slider: 'glide--slider',\n    carousel: 'glide--carousel',\n    swipeable: 'glide--swipeable',\n    dragging: 'glide--dragging',\n    cloneSlide: 'glide__slide--clone',\n    activeNav: 'glide__bullet--active',\n    activeSlide: 'glide__slide--active',\n    disabledArrow: 'glide__arrow--disabled'\n  }\n};\n\n/**\n * Outputs warning message to the bowser console.\n *\n * @param  {String} msg\n * @return {Void}\n */\nfunction warn(msg) {\n  console.error(\"[Glide warn]: \" + msg);\n}\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) {\n  return typeof obj;\n} : function (obj) {\n  return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n};\n\nvar classCallCheck = function (instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n};\n\nvar createClass = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\n\nvar _extends = Object.assign || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n\n  return target;\n};\n\nvar get = function get(object, property, receiver) {\n  if (object === null) object = Function.prototype;\n  var desc = Object.getOwnPropertyDescriptor(object, property);\n\n  if (desc === undefined) {\n    var parent = Object.getPrototypeOf(object);\n\n    if (parent === null) {\n      return undefined;\n    } else {\n      return get(parent, property, receiver);\n    }\n  } else if (\"value\" in desc) {\n    return desc.value;\n  } else {\n    var getter = desc.get;\n\n    if (getter === undefined) {\n      return undefined;\n    }\n\n    return getter.call(receiver);\n  }\n};\n\nvar inherits = function (subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n};\n\nvar possibleConstructorReturn = function (self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n};\n\n/**\n * Converts value entered as number\n * or string to integer value.\n *\n * @param {String} value\n * @returns {Number}\n */\nfunction toInt(value) {\n  return parseInt(value);\n}\n\n/**\n * Converts value entered as number\n * or string to flat value.\n *\n * @param {String} value\n * @returns {Number}\n */\nfunction toFloat(value) {\n  return parseFloat(value);\n}\n\n/**\n * Indicates whether the specified value is a string.\n *\n * @param  {*}   value\n * @return {Boolean}\n */\nfunction isString(value) {\n  return typeof value === 'string';\n}\n\n/**\n * Indicates whether the specified value is an object.\n *\n * @param  {*} value\n * @return {Boolean}\n *\n * @see https://github.com/jashkenas/underscore\n */\nfunction isObject(value) {\n  var type = typeof value === 'undefined' ? 'undefined' : _typeof(value);\n\n  return type === 'function' || type === 'object' && !!value; // eslint-disable-line no-mixed-operators\n}\n\n/**\n * Indicates whether the specified value is a number.\n *\n * @param  {*} value\n * @return {Boolean}\n */\nfunction isNumber(value) {\n  return typeof value === 'number';\n}\n\n/**\n * Indicates whether the specified value is a function.\n *\n * @param  {*} value\n * @return {Boolean}\n */\nfunction isFunction(value) {\n  return typeof value === 'function';\n}\n\n/**\n * Indicates whether the specified value is undefined.\n *\n * @param  {*} value\n * @return {Boolean}\n */\nfunction isUndefined(value) {\n  return typeof value === 'undefined';\n}\n\n/**\n * Indicates whether the specified value is an array.\n *\n * @param  {*} value\n * @return {Boolean}\n */\nfunction isArray(value) {\n  return value.constructor === Array;\n}\n\n/**\n * Creates and initializes specified collection of extensions.\n * Each extension receives access to instance of glide and rest of components.\n *\n * @param {Object} glide\n * @param {Object} extensions\n *\n * @returns {Object}\n */\nfunction mount(glide, extensions, events) {\n  var components = {};\n\n  for (var name in extensions) {\n    if (isFunction(extensions[name])) {\n      components[name] = extensions[name](glide, components, events);\n    } else {\n      warn('Extension must be a function');\n    }\n  }\n\n  for (var _name in components) {\n    if (isFunction(components[_name].mount)) {\n      components[_name].mount();\n    }\n  }\n\n  return components;\n}\n\n/**\n * Defines getter and setter property on the specified object.\n *\n * @param  {Object} obj         Object where property has to be defined.\n * @param  {String} prop        Name of the defined property.\n * @param  {Object} definition  Get and set definitions for the property.\n * @return {Void}\n */\nfunction define(obj, prop, definition) {\n  Object.defineProperty(obj, prop, definition);\n}\n\n/**\n * Sorts aphabetically object keys.\n *\n * @param  {Object} obj\n * @return {Object}\n */\nfunction sortKeys(obj) {\n  return Object.keys(obj).sort().reduce(function (r, k) {\n    r[k] = obj[k];\n\n    return r[k], r;\n  }, {});\n}\n\n/**\n * Merges passed settings object with default options.\n *\n * @param  {Object} defaults\n * @param  {Object} settings\n * @return {Object}\n */\nfunction mergeOptions(defaults, settings) {\n  var options = _extends({}, defaults, settings);\n\n  // `Object.assign` do not deeply merge objects, so we\n  // have to do it manually for every nested object\n  // in options. Although it does not look smart,\n  // it's smaller and faster than some fancy\n  // merging deep-merge algorithm script.\n  if (settings.hasOwnProperty('classes')) {\n    options.classes = _extends({}, defaults.classes, settings.classes);\n\n    if (settings.classes.hasOwnProperty('direction')) {\n      options.classes.direction = _extends({}, defaults.classes.direction, settings.classes.direction);\n    }\n  }\n\n  if (settings.hasOwnProperty('breakpoints')) {\n    options.breakpoints = _extends({}, defaults.breakpoints, settings.breakpoints);\n  }\n\n  return options;\n}\n\nvar EventsBus = function () {\n  /**\n   * Construct a EventBus instance.\n   *\n   * @param {Object} events\n   */\n  function EventsBus() {\n    var events = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    classCallCheck(this, EventsBus);\n\n    this.events = events;\n    this.hop = events.hasOwnProperty;\n  }\n\n  /**\n   * Adds listener to the specifed event.\n   *\n   * @param {String|Array} event\n   * @param {Function} handler\n   */\n\n\n  createClass(EventsBus, [{\n    key: 'on',\n    value: function on(event, handler) {\n      if (isArray(event)) {\n        for (var i = 0; i < event.length; i++) {\n          this.on(event[i], handler);\n        }\n      }\n\n      // Create the event's object if not yet created\n      if (!this.hop.call(this.events, event)) {\n        this.events[event] = [];\n      }\n\n      // Add the handler to queue\n      var index = this.events[event].push(handler) - 1;\n\n      // Provide handle back for removal of event\n      return {\n        remove: function remove() {\n          delete this.events[event][index];\n        }\n      };\n    }\n\n    /**\n     * Runs registered handlers for specified event.\n     *\n     * @param {String|Array} event\n     * @param {Object=} context\n     */\n\n  }, {\n    key: 'emit',\n    value: function emit(event, context) {\n      if (isArray(event)) {\n        for (var i = 0; i < event.length; i++) {\n          this.emit(event[i], context);\n        }\n      }\n\n      // If the event doesn't exist, or there's no handlers in queue, just leave\n      if (!this.hop.call(this.events, event)) {\n        return;\n      }\n\n      // Cycle through events queue, fire!\n      this.events[event].forEach(function (item) {\n        item(context || {});\n      });\n    }\n  }]);\n  return EventsBus;\n}();\n\nvar Glide = function () {\n  /**\r\n   * Construct glide.\r\n   *\r\n   * @param  {String} selector\r\n   * @param  {Object} options\r\n   */\n  function Glide(selector) {\n    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    classCallCheck(this, Glide);\n\n    this._c = {};\n    this._t = [];\n    this._e = new EventsBus();\n\n    this.disabled = false;\n    this.selector = selector;\n    this.settings = mergeOptions(defaults, options);\n    this.index = this.settings.startAt;\n  }\n\n  /**\r\n   * Initializes glide.\r\n   *\r\n   * @param {Object} extensions Collection of extensions to initialize.\r\n   * @return {Glide}\r\n   */\n\n\n  createClass(Glide, [{\n    key: 'mount',\n    value: function mount$$1() {\n      var extensions = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n      this._e.emit('mount.before');\n\n      if (isObject(extensions)) {\n        this._c = mount(this, extensions, this._e);\n      } else {\n        warn('You need to provide a object on `mount()`');\n      }\n\n      this._e.emit('mount.after');\n\n      return this;\n    }\n\n    /**\r\n     * Collects an instance `translate` transformers.\r\n     *\r\n     * @param  {Array} transformers Collection of transformers.\r\n     * @return {Void}\r\n     */\n\n  }, {\n    key: 'mutate',\n    value: function mutate() {\n      var transformers = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n\n      if (isArray(transformers)) {\n        this._t = transformers;\n      } else {\n        warn('You need to provide a array on `mutate()`');\n      }\n\n      return this;\n    }\n\n    /**\r\n     * Updates glide with specified settings.\r\n     *\r\n     * @param {Object} settings\r\n     * @return {Glide}\r\n     */\n\n  }, {\n    key: 'update',\n    value: function update() {\n      var settings = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n      this.settings = mergeOptions(this.settings, settings);\n\n      if (settings.hasOwnProperty('startAt')) {\n        this.index = settings.startAt;\n      }\n\n      this._e.emit('update');\n\n      return this;\n    }\n\n    /**\r\n     * Change slide with specified pattern. A pattern must be in the special format:\r\n     * `>` - Move one forward\r\n     * `<` - Move one backward\r\n     * `={i}` - Go to {i} zero-based slide (eq. '=1', will go to second slide)\r\n     * `>>` - Rewinds to end (last slide)\r\n     * `<<` - Rewinds to start (first slide)\r\n     *\r\n     * @param {String} pattern\r\n     * @return {Glide}\r\n     */\n\n  }, {\n    key: 'go',\n    value: function go(pattern) {\n      this._c.Run.make(pattern);\n\n      return this;\n    }\n\n    /**\r\n     * Move track by specified distance.\r\n     *\r\n     * @param {String} distance\r\n     * @return {Glide}\r\n     */\n\n  }, {\n    key: 'move',\n    value: function move(distance) {\n      this._c.Transition.disable();\n      this._c.Move.make(distance);\n\n      return this;\n    }\n\n    /**\r\n     * Destroy instance and revert all changes done by this._c.\r\n     *\r\n     * @return {Glide}\r\n     */\n\n  }, {\n    key: 'destroy',\n    value: function destroy() {\n      this._e.emit('destroy');\n\n      return this;\n    }\n\n    /**\r\n     * Start instance autoplaying.\r\n     *\r\n     * @param {Boolean|Number} interval Run autoplaying with passed interval regardless of `autoplay` settings\r\n     * @return {Glide}\r\n     */\n\n  }, {\n    key: 'play',\n    value: function play() {\n      var interval = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n\n      if (interval) {\n        this.settings.autoplay = interval;\n      }\n\n      this._e.emit('play');\n\n      return this;\n    }\n\n    /**\r\n     * Stop instance autoplaying.\r\n     *\r\n     * @return {Glide}\r\n     */\n\n  }, {\n    key: 'pause',\n    value: function pause() {\n      this._e.emit('pause');\n\n      return this;\n    }\n\n    /**\r\n     * Sets glide into a idle status.\r\n     *\r\n     * @return {Glide}\r\n     */\n\n  }, {\n    key: 'disable',\n    value: function disable() {\n      this.disabled = true;\n\n      return this;\n    }\n\n    /**\r\n     * Sets glide into a active status.\r\n     *\r\n     * @return {Glide}\r\n     */\n\n  }, {\n    key: 'enable',\n    value: function enable() {\n      this.disabled = false;\n\n      return this;\n    }\n\n    /**\r\n     * Adds cuutom event listener with handler.\r\n     *\r\n     * @param  {String|Array} event\r\n     * @param  {Function} handler\r\n     * @return {Glide}\r\n     */\n\n  }, {\n    key: 'on',\n    value: function on(event, handler) {\n      this._e.on(event, handler);\n\n      return this;\n    }\n\n    /**\r\n     * Checks if glide is a precised type.\r\n     *\r\n     * @param  {String} name\r\n     * @return {Boolean}\r\n     */\n\n  }, {\n    key: 'isType',\n    value: function isType(name) {\n      return this.settings.type === name;\n    }\n\n    /**\r\n     * Gets value of the core options.\r\n     *\r\n     * @return {Object}\r\n     */\n\n  }, {\n    key: 'settings',\n    get: function get$$1() {\n      return this._o;\n    }\n\n    /**\r\n     * Sets value of the core options.\r\n     *\r\n     * @param  {Object} o\r\n     * @return {Void}\r\n     */\n    ,\n    set: function set$$1(o) {\n      if (isObject(o)) {\n        this._o = o;\n      } else {\n        warn('Options must be an `object` instance.');\n      }\n    }\n\n    /**\r\n     * Gets current index of the slider.\r\n     *\r\n     * @return {Object}\r\n     */\n\n  }, {\n    key: 'index',\n    get: function get$$1() {\n      return this._i;\n    }\n\n    /**\r\n     * Sets current index a slider.\r\n     *\r\n     * @return {Object}\r\n     */\n    ,\n    set: function set$$1(i) {\n      this._i = toInt(i);\n    }\n\n    /**\r\n     * Gets type name of the slider.\r\n     *\r\n     * @return {String}\r\n     */\n\n  }, {\n    key: 'type',\n    get: function get$$1() {\n      return this.settings.type;\n    }\n\n    /**\r\n     * Gets value of the idle status.\r\n     *\r\n     * @return {Boolean}\r\n     */\n\n  }, {\n    key: 'disabled',\n    get: function get$$1() {\n      return this._d;\n    }\n\n    /**\r\n     * Sets value of the idle status.\r\n     *\r\n     * @return {Boolean}\r\n     */\n    ,\n    set: function set$$1(status) {\n      this._d = !!status;\n    }\n  }]);\n  return Glide;\n}();\n\nfunction Run (Glide, Components, Events) {\n  var Run = {\n    /**\n     * Initializes autorunning of the glide.\n     *\n     * @return {Void}\n     */\n    mount: function mount() {\n      this._o = false;\n    },\n\n\n    /**\n     * Makes glides running based on the passed moving schema.\n     *\n     * @param {String} move\n     */\n    make: function make(move) {\n      var _this = this;\n\n      if (!Glide.disabled) {\n        Glide.disable();\n\n        this.move = move;\n\n        Events.emit('run.before', this.move);\n\n        this.calculate();\n\n        Events.emit('run', this.move);\n\n        Components.Transition.after(function () {\n          if (_this.isOffset('<') || _this.isOffset('>')) {\n            _this._o = false;\n\n            Events.emit('run.offset', _this.move);\n          }\n\n          Events.emit('run.after', _this.move);\n\n          Glide.enable();\n        });\n      }\n    },\n\n\n    /**\n     * Calculates current index based on defined move.\n     *\n     * @return {Void}\n     */\n    calculate: function calculate() {\n      var move = this.move,\n          length = this.length;\n      var steps = move.steps,\n          direction = move.direction;\n\n\n      var countableSteps = isNumber(toInt(steps)) && toInt(steps) !== 0;\n\n      switch (direction) {\n        case '>':\n          if (steps === '>') {\n            Glide.index = length;\n          } else if (this.isEnd()) {\n            if (!(Glide.isType('slider') && !Glide.settings.rewind)) {\n              this._o = true;\n\n              Glide.index = 0;\n            }\n\n            Events.emit('run.end', move);\n          } else if (countableSteps) {\n            Glide.index += Math.min(length - Glide.index, -toInt(steps));\n          } else {\n            Glide.index++;\n          }\n          break;\n\n        case '<':\n          if (steps === '<') {\n            Glide.index = 0;\n          } else if (this.isStart()) {\n            if (!(Glide.isType('slider') && !Glide.settings.rewind)) {\n              this._o = true;\n\n              Glide.index = length;\n            }\n\n            Events.emit('run.start', move);\n          } else if (countableSteps) {\n            Glide.index -= Math.min(Glide.index, toInt(steps));\n          } else {\n            Glide.index--;\n          }\n          break;\n\n        case '=':\n          Glide.index = steps;\n          break;\n      }\n    },\n\n\n    /**\n     * Checks if we are on the first slide.\n     *\n     * @return {Boolean}\n     */\n    isStart: function isStart() {\n      return Glide.index === 0;\n    },\n\n\n    /**\n     * Checks if we are on the last slide.\n     *\n     * @return {Boolean}\n     */\n    isEnd: function isEnd() {\n      return Glide.index === this.length;\n    },\n\n\n    /**\n     * Checks if we are making a offset run.\n     *\n     * @param {String} direction\n     * @return {Boolean}\n     */\n    isOffset: function isOffset(direction) {\n      return this._o && this.move.direction === direction;\n    }\n  };\n\n  define(Run, 'move', {\n    /**\n     * Gets value of the move schema.\n     *\n     * @returns {Object}\n     */\n    get: function get() {\n      return this._m;\n    },\n\n\n    /**\n     * Sets value of the move schema.\n     *\n     * @returns {Object}\n     */\n    set: function set(value) {\n      this._m = {\n        direction: value.substr(0, 1),\n        steps: value.substr(1) ? value.substr(1) : 0\n      };\n    }\n  });\n\n  define(Run, 'length', {\n    /**\n     * Gets value of the running distance based\n     * on zero-indexing number of slides.\n     *\n     * @return {Number}\n     */\n    get: function get() {\n      var settings = Glide.settings;\n      var length = Components.Html.slides.length;\n\n      // While number of slides inside instance is smaller\n      // that `perView` settings we should't run at all.\n      // Running distance has to be zero.\n\n      if (settings.perView > length) {\n        return 0;\n      }\n\n      // If the `bound` option is acitve, a maximum running distance should be\n      // reduced by `perView` and `focusAt` settings. Running distance\n      // should end before creating an empty space after instance.\n      if (Glide.isType('slider') && settings.focusAt !== 'center' && settings.bound) {\n        return length - 1 - (toInt(settings.perView) - 1) + toInt(settings.focusAt);\n      }\n\n      return length - 1;\n    }\n  });\n\n  define(Run, 'offset', {\n    /**\n     * Gets status of the offsetting flag.\n     *\n     * @return {Boolean}\n     */\n    get: function get() {\n      return this._o;\n    }\n  });\n\n  return Run;\n}\n\n/**\n * Returns a current time.\n *\n * @return {Number}\n */\nfunction now() {\n  return new Date().getTime();\n}\n\n/**\n * Returns a function, that, when invoked, will only be triggered\n * at most once during a given window of time.\n *\n * @param {Function} func\n * @param {Number} wait\n * @param {Object=} options\n * @return {Function}\n *\n * @see https://github.com/jashkenas/underscore\n */\nfunction throttle(func, wait, options) {\n  var timeout = void 0,\n      context = void 0,\n      args = void 0,\n      result = void 0;\n  var previous = 0;\n  if (!options) options = {};\n\n  var later = function later() {\n    previous = options.leading === false ? 0 : now();\n    timeout = null;\n    result = func.apply(context, args);\n    if (!timeout) context = args = null;\n  };\n\n  var throttled = function throttled() {\n    var at = now();\n    if (!previous && options.leading === false) previous = at;\n    var remaining = wait - (at - previous);\n    context = this;\n    args = arguments;\n    if (remaining <= 0 || remaining > wait) {\n      if (timeout) {\n        clearTimeout(timeout);\n        timeout = null;\n      }\n      previous = at;\n      result = func.apply(context, args);\n      if (!timeout) context = args = null;\n    } else if (!timeout && options.trailing !== false) {\n      timeout = setTimeout(later, remaining);\n    }\n    return result;\n  };\n\n  throttled.cancel = function () {\n    clearTimeout(timeout);\n    previous = 0;\n    timeout = context = args = null;\n  };\n\n  return throttled;\n}\n\nvar MARGIN_TYPE = {\n  ltr: ['marginLeft', 'marginRight'],\n  rtl: ['marginRight', 'marginLeft']\n};\n\nfunction Gaps (Glide, Components, Events) {\n  var Gaps = {\n    /**\n     * Applies gaps between slides. First and last\n     * slides do not receive it's edge margins.\n     *\n     * @param {HTMLCollection} slides\n     * @return {Void}\n     */\n    apply: function apply(slides) {\n      for (var i = 0, len = slides.length; i < len; i++) {\n        var style = slides[i].style;\n        var direction = Components.Direction.value;\n\n        if (i !== 0) {\n          style[MARGIN_TYPE[direction][0]] = this.value / 2 + 'px';\n        } else {\n          style[MARGIN_TYPE[direction][0]] = '';\n        }\n\n        if (i !== slides.length - 1) {\n          style[MARGIN_TYPE[direction][1]] = this.value / 2 + 'px';\n        } else {\n          style[MARGIN_TYPE[direction][1]] = '';\n        }\n      }\n    },\n\n\n    /**\n     * Removes gaps from the slides.\n     *\n     * @param {HTMLCollection} slides\n     * @returns {Void}\n    */\n    remove: function remove(slides) {\n      for (var i = 0, len = slides.length; i < len; i++) {\n        var style = slides[i].style;\n\n        style.marginLeft = '';\n        style.marginRight = '';\n      }\n    }\n  };\n\n  define(Gaps, 'value', {\n    /**\n     * Gets value of the gap.\n     *\n     * @returns {Number}\n     */\n    get: function get() {\n      return toInt(Glide.settings.gap);\n    }\n  });\n\n  define(Gaps, 'grow', {\n    /**\n     * Gets additional dimentions value caused by gaps.\n     * Used to increase width of the slides wrapper.\n     *\n     * @returns {Number}\n     */\n    get: function get() {\n      return Gaps.value * (Components.Sizes.length - 1);\n    }\n  });\n\n  define(Gaps, 'reductor', {\n    /**\n     * Gets reduction value caused by gaps.\n     * Used to subtract width of the slides.\n     *\n     * @returns {Number}\n     */\n    get: function get() {\n      var perView = Glide.settings.perView;\n\n      return Gaps.value * (perView - 1) / perView;\n    }\n  });\n\n  /**\n   * Apply calculated gaps:\n   * - after building, so slides (including clones) will receive proper margins\n   * - on updating via API, to recalculate gaps with new options\n   */\n  Events.on(['build.after', 'update'], throttle(function () {\n    Gaps.apply(Components.Html.wrapper.children);\n  }, 30));\n\n  /**\n   * Remove gaps:\n   * - on destroying to bring markup to its inital state\n   */\n  Events.on('destroy', function () {\n    Gaps.remove(Components.Html.wrapper.children);\n  });\n\n  return Gaps;\n}\n\n/**\n * Finds siblings nodes of the passed node.\n *\n * @param  {Element} node\n * @return {Array}\n */\nfunction siblings(node) {\n  if (node && node.parentNode) {\n    var n = node.parentNode.firstChild;\n    var matched = [];\n\n    for (; n; n = n.nextSibling) {\n      if (n.nodeType === 1 && n !== node) {\n        matched.push(n);\n      }\n    }\n\n    return matched;\n  }\n\n  return [];\n}\n\n/**\n * Checks if passed node exist and is a valid element.\n *\n * @param  {Element} node\n * @return {Boolean}\n */\nfunction exist(node) {\n  if (node && node instanceof window.HTMLElement) {\n    return true;\n  }\n\n  return false;\n}\n\nvar TRACK_SELECTOR = '[data-glide-el=\"track\"]';\n\nfunction Html (Glide, Components) {\n  var Html = {\n    /**\n     * Setup slider HTML nodes.\n     *\n     * @param {Glide} glide\n     */\n    mount: function mount() {\n      this.root = Glide.selector;\n      this.track = this.root.querySelector(TRACK_SELECTOR);\n      this.slides = Array.prototype.slice.call(this.wrapper.children).filter(function (slide) {\n        return !slide.classList.contains(Glide.settings.classes.cloneSlide);\n      });\n    }\n  };\n\n  define(Html, 'root', {\n    /**\n     * Gets node of the glide main element.\n     *\n     * @return {Object}\n     */\n    get: function get() {\n      return Html._r;\n    },\n\n\n    /**\n     * Sets node of the glide main element.\n     *\n     * @return {Object}\n     */\n    set: function set(r) {\n      if (isString(r)) {\n        r = document.querySelector(r);\n      }\n\n      if (exist(r)) {\n        Html._r = r;\n      } else {\n        warn('Root element must be a existing Html node');\n      }\n    }\n  });\n\n  define(Html, 'track', {\n    /**\n     * Gets node of the glide track with slides.\n     *\n     * @return {Object}\n     */\n    get: function get() {\n      return Html._t;\n    },\n\n\n    /**\n     * Sets node of the glide track with slides.\n     *\n     * @return {Object}\n     */\n    set: function set(t) {\n      if (exist(t)) {\n        Html._t = t;\n      } else {\n        warn('Could not find track element. Please use ' + TRACK_SELECTOR + ' attribute.');\n      }\n    }\n  });\n\n  define(Html, 'wrapper', {\n    /**\n     * Gets node of the slides wrapper.\n     *\n     * @return {Object}\n     */\n    get: function get() {\n      return Html.track.children[0];\n    }\n  });\n\n  return Html;\n}\n\nfunction Peek (Glide, Components, Events) {\n  var Peek = {\n    /**\n     * Setups how much to peek based on settings.\n     *\n     * @return {Void}\n     */\n    mount: function mount() {\n      this.value = Glide.settings.peek;\n    }\n  };\n\n  define(Peek, 'value', {\n    /**\n     * Gets value of the peek.\n     *\n     * @returns {Number|Object}\n     */\n    get: function get() {\n      return Peek._v;\n    },\n\n\n    /**\n     * Sets value of the peek.\n     *\n     * @param {Number|Object} value\n     * @return {Void}\n     */\n    set: function set(value) {\n      if (isObject(value)) {\n        value.before = toInt(value.before);\n        value.after = toInt(value.after);\n      } else {\n        value = toInt(value);\n      }\n\n      Peek._v = value;\n    }\n  });\n\n  define(Peek, 'reductor', {\n    /**\n     * Gets reduction value caused by peek.\n     *\n     * @returns {Number}\n     */\n    get: function get() {\n      var value = Peek.value;\n      var perView = Glide.settings.perView;\n\n      if (isObject(value)) {\n        return value.before / perView + value.after / perView;\n      }\n\n      return value * 2 / perView;\n    }\n  });\n\n  /**\n   * Recalculate peeking sizes on:\n   * - when resizing window to update to proper percents\n   */\n  Events.on(['resize', 'update'], function () {\n    Peek.mount();\n  });\n\n  return Peek;\n}\n\nfunction Move (Glide, Components, Events) {\n  var Move = {\n    /**\n     * Constructs move component.\n     *\n     * @returns {Void}\n     */\n    mount: function mount() {\n      this._o = 0;\n    },\n\n\n    /**\n     * Calculates a movement value based on passed offset and currently active index.\n     *\n     * @param  {Number} offset\n     * @return {Void}\n     */\n    make: function make() {\n      var _this = this;\n\n      var offset = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n\n      this.offset = offset;\n\n      Events.emit('move', {\n        movement: this.value\n      });\n\n      Components.Transition.after(function () {\n        Events.emit('move.after', {\n          movement: _this.value\n        });\n      });\n    }\n  };\n\n  define(Move, 'offset', {\n    /**\n     * Gets an offset value used to modify current translate.\n     *\n     * @return {Object}\n     */\n    get: function get() {\n      return Move._o;\n    },\n\n\n    /**\n     * Sets an offset value used to modify current translate.\n     *\n     * @return {Object}\n     */\n    set: function set(value) {\n      Move._o = !isUndefined(value) ? toInt(value) : 0;\n    }\n  });\n\n  define(Move, 'translate', {\n    /**\n     * Gets a raw movement value.\n     *\n     * @return {Number}\n     */\n    get: function get() {\n      return Components.Sizes.slideWidth * Glide.index;\n    }\n  });\n\n  define(Move, 'value', {\n    /**\n     * Gets an actual movement value corrected by offset.\n     *\n     * @return {Number}\n     */\n    get: function get() {\n      var offset = this.offset;\n      var translate = this.translate;\n\n      if (Components.Direction.is('rtl')) {\n        return translate + offset;\n      }\n\n      return translate - offset;\n    }\n  });\n\n  /**\n   * Make movement to proper slide on:\n   * - before build, so glide will start at `startAt` index\n   * - on each standard run to move to newly calculated index\n   */\n  Events.on(['build.before', 'run'], function () {\n    Move.make();\n  });\n\n  return Move;\n}\n\nfunction Sizes (Glide, Components, Events) {\n  var Sizes = {\n    /**\n     * Setups dimentions of slides.\n     *\n     * @return {Void}\n     */\n    setupSlides: function setupSlides() {\n      var slides = Components.Html.slides;\n\n      for (var i = 0; i < slides.length; i++) {\n        slides[i].style.width = this.slideWidth + 'px';\n      }\n    },\n\n\n    /**\n     * Setups dimentions of slides wrapper.\n     *\n     * @return {Void}\n     */\n    setupWrapper: function setupWrapper(dimention) {\n      Components.Html.wrapper.style.width = this.wrapperSize + 'px';\n    },\n\n\n    /**\n     * Removes applied styles from HTML elements.\n     *\n     * @returns {Void}\n     */\n    remove: function remove() {\n      var slides = Components.Html.slides;\n\n      for (var i = 0; i < slides.length; i++) {\n        slides[i].style.width = '';\n      }\n\n      Components.Html.wrapper.style.width = '';\n    }\n  };\n\n  define(Sizes, 'length', {\n    /**\n     * Gets count number of the slides.\n     *\n     * @return {Number}\n     */\n    get: function get() {\n      return Components.Html.slides.length;\n    }\n  });\n\n  define(Sizes, 'width', {\n    /**\n     * Gets width value of the glide.\n     *\n     * @return {Number}\n     */\n    get: function get() {\n      return Components.Html.root.offsetWidth;\n    }\n  });\n\n  define(Sizes, 'wrapperSize', {\n    /**\n     * Gets size of the slides wrapper.\n     *\n     * @return {Number}\n     */\n    get: function get() {\n      return Sizes.slideWidth * Sizes.length + Components.Gaps.grow + Components.Clones.grow;\n    }\n  });\n\n  define(Sizes, 'slideWidth', {\n    /**\n     * Gets width value of the single slide.\n     *\n     * @return {Number}\n     */\n    get: function get() {\n      return Sizes.width / Glide.settings.perView - Components.Peek.reductor - Components.Gaps.reductor;\n    }\n  });\n\n  /**\n   * Apply calculated glide's dimensions:\n   * - before building, so other dimentions (e.g. translate) will be calculated propertly\n   * - when resizing window to recalculate sildes dimensions\n   * - on updating via API, to calculate dimensions based on new options\n   */\n  Events.on(['build.before', 'resize', 'update'], function () {\n    Sizes.setupSlides();\n    Sizes.setupWrapper();\n  });\n\n  /**\n   * Remove calculated glide's dimensions:\n   * - on destoting to bring markup to its inital state\n   */\n  Events.on('destroy', function () {\n    Sizes.remove();\n  });\n\n  return Sizes;\n}\n\nfunction Build (Glide, Components, Events) {\n  var Build = {\n    /**\n     * Init glide building. Adds classes, sets\n     * dimensions and setups initial state.\n     *\n     * @return {Void}\n     */\n    mount: function mount() {\n      Events.emit('build.before');\n\n      this.typeClass();\n      this.activeClass();\n\n      Events.emit('build.after');\n    },\n\n\n    /**\n     * Adds `type` class to the glide element.\n     *\n     * @return {Void}\n     */\n    typeClass: function typeClass() {\n      Components.Html.root.classList.add(Glide.settings.classes[Glide.settings.type]);\n    },\n\n\n    /**\n     * Sets active class to current slide.\n     *\n     * @return {Void}\n     */\n    activeClass: function activeClass() {\n      var classes = Glide.settings.classes;\n      var slide = Components.Html.slides[Glide.index];\n\n      if (slide) {\n        slide.classList.add(classes.activeSlide);\n\n        siblings(slide).forEach(function (sibling) {\n          sibling.classList.remove(classes.activeSlide);\n        });\n      }\n    },\n\n\n    /**\n     * Removes HTML classes applied at building.\n     *\n     * @return {Void}\n     */\n    removeClasses: function removeClasses() {\n      var classes = Glide.settings.classes;\n\n      Components.Html.root.classList.remove(classes[Glide.settings.type]);\n\n      Components.Html.slides.forEach(function (sibling) {\n        sibling.classList.remove(classes.activeSlide);\n      });\n    }\n  };\n\n  /**\n   * Clear building classes:\n   * - on destroying to bring HTML to its initial state\n   * - on updating to remove classes before remounting component\n   */\n  Events.on(['destroy', 'update'], function () {\n    Build.removeClasses();\n  });\n\n  /**\n   * Remount component:\n   * - on resizing of the window to calculate new dimentions\n   * - on updating settings via API\n   */\n  Events.on(['resize', 'update'], function () {\n    Build.mount();\n  });\n\n  /**\n   * Swap active class of current slide:\n   * - after each move to the new index\n   */\n  Events.on('move.after', function () {\n    Build.activeClass();\n  });\n\n  return Build;\n}\n\nfunction Clones (Glide, Components, Events) {\n  var Clones = {\n    /**\n     * Create pattern map and collect slides to be cloned.\n     */\n    mount: function mount() {\n      this.items = [];\n\n      if (Glide.isType('carousel')) {\n        this.items = this.collect();\n      }\n    },\n\n\n    /**\n     * Collect clones with pattern.\n     *\n     * @return {Void}\n     */\n    collect: function collect() {\n      var items = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n      var slides = Components.Html.slides;\n      var _Glide$settings = Glide.settings,\n          perView = _Glide$settings.perView,\n          classes = _Glide$settings.classes;\n\n\n      var start = slides.slice(0, perView);\n      var end = slides.slice(-perView);\n\n      for (var r = 0; r < Math.max(1, Math.floor(perView / slides.length)); r++) {\n        for (var i = 0; i < start.length; i++) {\n          var clone = start[i].cloneNode(true);\n\n          clone.classList.add(classes.cloneSlide);\n\n          items.push(clone);\n        }\n\n        for (var _i = 0; _i < end.length; _i++) {\n          var _clone = end[_i].cloneNode(true);\n\n          _clone.classList.add(classes.cloneSlide);\n\n          items.unshift(_clone);\n        }\n      }\n\n      return items;\n    },\n\n\n    /**\n     * Append cloned slides with generated pattern.\n     *\n     * @return {Void}\n     */\n    append: function append() {\n      var items = this.items;\n      var _Components$Html = Components.Html,\n          wrapper = _Components$Html.wrapper,\n          slides = _Components$Html.slides;\n\n\n      var half = Math.floor(items.length / 2);\n      var prepend = items.slice(0, half).reverse();\n      var append = items.slice(half, items.length);\n\n      for (var i = 0; i < append.length; i++) {\n        wrapper.appendChild(append[i]);\n      }\n\n      for (var _i2 = 0; _i2 < prepend.length; _i2++) {\n        wrapper.insertBefore(prepend[_i2], slides[0]);\n      }\n\n      for (var _i3 = 0; _i3 < items.length; _i3++) {\n        items[_i3].style.width = Components.Sizes.slideWidth + 'px';\n      }\n    },\n\n\n    /**\n     * Remove all cloned slides.\n     *\n     * @return {Void}\n     */\n    remove: function remove() {\n      var items = this.items;\n\n\n      for (var i = 0; i < items.length; i++) {\n        Components.Html.wrapper.removeChild(items[i]);\n      }\n    }\n  };\n\n  define(Clones, 'grow', {\n    /**\n     * Gets additional dimentions value caused by clones.\n     *\n     * @return {Number}\n     */\n    get: function get() {\n      return (Components.Sizes.slideWidth + Components.Gaps.value) * Clones.items.length;\n    }\n  });\n\n  /**\n   * Append additional slide's clones:\n   * - while glide's type is `carousel`\n   */\n  Events.on('update', function () {\n    Clones.remove();\n    Clones.mount();\n    Clones.append();\n  });\n\n  /**\n   * Append additional slide's clones:\n   * - while glide's type is `carousel`\n   */\n  Events.on('build.before', function () {\n    if (Glide.isType('carousel')) {\n      Clones.append();\n    }\n  });\n\n  /**\n   * Remove clones HTMLElements:\n   * - on destroying, to bring HTML to its initial state\n   */\n  Events.on('destroy', function () {\n    Clones.remove();\n  });\n\n  return Clones;\n}\n\nvar EventsBinder = function () {\n  /**\n   * Construct a EventsBinder instance.\n   */\n  function EventsBinder() {\n    var listeners = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    classCallCheck(this, EventsBinder);\n\n    this.listeners = listeners;\n  }\n\n  /**\n   * Adds events listeners to arrows HTML elements.\n   *\n   * @param  {String|Array} events\n   * @param  {Element|Window|Document} el\n   * @param  {Function} closure\n   * @return {Void}\n   */\n\n\n  createClass(EventsBinder, [{\n    key: 'on',\n    value: function on(events, el, closure) {\n      var capture = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : false;\n\n      if (isString(events)) {\n        events = [events];\n      }\n\n      for (var i = 0; i < events.length; i++) {\n        this.listeners[events[i]] = closure;\n\n        el.addEventListener(events[i], this.listeners[events[i]], capture);\n      }\n    }\n\n    /**\n     * Removes event listeners from arrows HTML elements.\n     *\n     * @param  {String|Array} events\n     * @param  {Element|Window|Document} el\n     * @return {Void}\n     */\n\n  }, {\n    key: 'off',\n    value: function off(events, el) {\n      if (isString(events)) {\n        events = [events];\n      }\n\n      for (var i = 0; i < events.length; i++) {\n        el.removeEventListener(events[i], this.listeners[events[i]], false);\n      }\n    }\n\n    /**\n     * Destroy collected listeners.\n     *\n     * @returns {Void}\n     */\n\n  }, {\n    key: 'destroy',\n    value: function destroy() {\n      delete this.listeners;\n    }\n  }]);\n  return EventsBinder;\n}();\n\nfunction Resize (Glide, Components, Events) {\n  /**\n   * Instance of the binder for DOM Events.\n   *\n   * @type {EventsBinder}\n   */\n  var Binder = new EventsBinder();\n\n  var Resize = {\n    /**\n     * Initializes window bindings.\n     */\n    mount: function mount() {\n      this.bind();\n    },\n\n\n    /**\n     * Binds `rezsize` listener to the window.\n     * It's a costly event, so we are debouncing it.\n     *\n     * @return {Void}\n     */\n    bind: function bind() {\n      Binder.on('resize', window, throttle(function () {\n        Events.emit('resize');\n      }, Glide.settings.throttle));\n    },\n\n\n    /**\n     * Unbinds listeners from the window.\n     *\n     * @return {Void}\n     */\n    unbind: function unbind() {\n      Binder.off('resize', window);\n    }\n  };\n\n  /**\n   * Remove bindings from window:\n   * - on destroying, to remove added EventListener\n   */\n  Events.on('destroy', function () {\n    Resize.unbind();\n    Binder.destroy();\n  });\n\n  return Resize;\n}\n\nvar VALID_DIRECTIONS = ['ltr', 'rtl'];\nvar FLIPED_MOVEMENTS = {\n  '>': '<',\n  '<': '>',\n  '=': '='\n};\n\nfunction Direction (Glide, Components, Events) {\n  var Direction = {\n    /**\n     * Setups gap value based on settings.\n     *\n     * @return {Void}\n     */\n    mount: function mount() {\n      this.value = Glide.settings.direction;\n    },\n\n\n    /**\n     * Resolves pattern based on direction value\n     *\n     * @param {String} pattern\n     * @returns {String}\n     */\n    resolve: function resolve(pattern) {\n      var token = pattern.slice(0, 1);\n\n      if (this.is('rtl')) {\n        return pattern.split(token).join(FLIPED_MOVEMENTS[token]);\n      }\n\n      return pattern;\n    },\n\n\n    /**\n     * Checks value of direction mode.\n     *\n     * @param {String} direction\n     * @returns {Boolean}\n     */\n    is: function is(direction) {\n      return this.value === direction;\n    },\n\n\n    /**\n     * Applies direction class to the root HTML element.\n     *\n     * @return {Void}\n     */\n    addClass: function addClass() {\n      Components.Html.root.classList.add(Glide.settings.classes.direction[this.value]);\n    },\n\n\n    /**\n     * Removes direction class from the root HTML element.\n     *\n     * @return {Void}\n     */\n    removeClass: function removeClass() {\n      Components.Html.root.classList.remove(Glide.settings.classes.direction[this.value]);\n    }\n  };\n\n  define(Direction, 'value', {\n    /**\n     * Gets value of the direction.\n     *\n     * @returns {Number}\n     */\n    get: function get() {\n      return Direction._v;\n    },\n\n\n    /**\n     * Sets value of the direction.\n     *\n     * @param {String} value\n     * @return {Void}\n     */\n    set: function set(value) {\n      if (VALID_DIRECTIONS.indexOf(value) > -1) {\n        Direction._v = value;\n      } else {\n        warn('Direction value must be `ltr` or `rtl`');\n      }\n    }\n  });\n\n  /**\n   * Clear direction class:\n   * - on destroy to bring HTML to its initial state\n   * - on update to remove class before reappling bellow\n   */\n  Events.on(['destroy', 'update'], function () {\n    Direction.removeClass();\n  });\n\n  /**\n   * Remount component:\n   * - on update to reflect changes in direction value\n   */\n  Events.on('update', function () {\n    Direction.mount();\n  });\n\n  /**\n   * Apply direction class:\n   * - before building to apply class for the first time\n   * - on updating to reapply direction class that may changed\n   */\n  Events.on(['build.before', 'update'], function () {\n    Direction.addClass();\n  });\n\n  return Direction;\n}\n\n/**\n * Reflects value of glide movement.\n *\n * @param  {Object} Glide\n * @param  {Object} Components\n * @return {Object}\n */\nfunction Rtl (Glide, Components) {\n  return {\n    /**\n     * Negates the passed translate if glide is in RTL option.\n     *\n     * @param  {Number} translate\n     * @return {Number}\n     */\n    modify: function modify(translate) {\n      if (Components.Direction.is('rtl')) {\n        return -translate;\n      }\n\n      return translate;\n    }\n  };\n}\n\n/**\n * Updates glide movement with a `gap` settings.\n *\n * @param  {Object} Glide\n * @param  {Object} Components\n * @return {Object}\n */\nfunction Gap (Glide, Components) {\n  return {\n    /**\n     * Modifies passed translate value with number in the `gap` settings.\n     *\n     * @param  {Number} translate\n     * @return {Number}\n     */\n    modify: function modify(translate) {\n      return translate + Components.Gaps.value * Glide.index;\n    }\n  };\n}\n\n/**\n * Updates glide movement with width of additional clones width.\n *\n * @param  {Object} Glide\n * @param  {Object} Components\n * @return {Object}\n */\nfunction Grow (Glide, Components) {\n  return {\n    /**\n     * Adds to the passed translate width of the half of clones.\n     *\n     * @param  {Number} translate\n     * @return {Number}\n     */\n    modify: function modify(translate) {\n      return translate + Components.Clones.grow / 2;\n    }\n  };\n}\n\n/**\n * Updates glide movement with a `peek` settings.\n *\n * @param  {Object} Glide\n * @param  {Object} Components\n * @return {Object}\n */\nfunction Peeking (Glide, Components) {\n  return {\n    /**\n     * Modifies passed translate value with a `peek` setting.\n     *\n     * @param  {Number} translate\n     * @return {Number}\n     */\n    modify: function modify(translate) {\n      if (Glide.settings.focusAt >= 0) {\n        var peek = Components.Peek.value;\n\n        if (isObject(peek)) {\n          return translate - peek.before;\n        }\n\n        return translate - peek;\n      }\n\n      return translate;\n    }\n  };\n}\n\n/**\n * Updates glide movement with a `focusAt` settings.\n *\n * @param  {Object} Glide\n * @param  {Object} Components\n * @return {Object}\n */\nfunction Focusing (Glide, Components) {\n  return {\n    /**\n     * Modifies passed translate value with index in the `focusAt` setting.\n     *\n     * @param  {Number} translate\n     * @return {Number}\n     */\n    modify: function modify(translate) {\n      var gap = Components.Gaps.value;\n      var width = Components.Sizes.width;\n      var focusAt = Glide.settings.focusAt;\n      var slideWidth = Components.Sizes.slideWidth;\n\n      if (focusAt === 'center') {\n        return translate - (width / 2 - slideWidth / 2);\n      }\n\n      return translate - slideWidth * focusAt - gap * focusAt;\n    }\n  };\n}\n\n/**\n * Applies diffrent transformers on translate value.\n *\n * @param  {Object} Glide\n * @param  {Object} Components\n * @return {Object}\n */\nfunction mutator (Glide, Components, Events) {\n  /**\n   * Merge instance transformers with collection of default transformers.\n   * It's important that the Rtl component be last on the list,\n   * so it reflects all previous transformations.\n   *\n   * @type {Array}\n   */\n  var TRANSFORMERS = [Gap, Grow, Peeking, Focusing].concat(Glide._t, [Rtl]);\n\n  return {\n    /**\n     * Piplines translate value with registered transformers.\n     *\n     * @param  {Number} translate\n     * @return {Number}\n     */\n    mutate: function mutate(translate) {\n      for (var i = 0; i < TRANSFORMERS.length; i++) {\n        var transformer = TRANSFORMERS[i];\n\n        if (isFunction(transformer) && isFunction(transformer().modify)) {\n          translate = transformer(Glide, Components, Events).modify(translate);\n        } else {\n          warn('Transformer should be a function that returns an object with `modify()` method');\n        }\n      }\n\n      return translate;\n    }\n  };\n}\n\nfunction Translate (Glide, Components, Events) {\n  var Translate = {\n    /**\n     * Sets value of translate on HTML element.\n     *\n     * @param {Number} value\n     * @return {Void}\n     */\n    set: function set(value) {\n      var transform = mutator(Glide, Components).mutate(value);\n\n      Components.Html.wrapper.style.transform = 'translate3d(' + -1 * transform + 'px, 0px, 0px)';\n    },\n\n\n    /**\n     * Removes value of translate from HTML element.\n     *\n     * @return {Void}\n     */\n    remove: function remove() {\n      Components.Html.wrapper.style.transform = '';\n    }\n  };\n\n  /**\n   * Set new translate value:\n   * - on move to reflect index change\n   * - on updating via API to reflect possible changes in options\n   */\n  Events.on('move', function (context) {\n    var gap = Components.Gaps.value;\n    var length = Components.Sizes.length;\n    var width = Components.Sizes.slideWidth;\n\n    if (Glide.isType('carousel') && Components.Run.isOffset('<')) {\n      Components.Transition.after(function () {\n        Events.emit('translate.jump');\n\n        Translate.set(width * (length - 1));\n      });\n\n      return Translate.set(-width - gap * length);\n    }\n\n    if (Glide.isType('carousel') && Components.Run.isOffset('>')) {\n      Components.Transition.after(function () {\n        Events.emit('translate.jump');\n\n        Translate.set(0);\n      });\n\n      return Translate.set(width * length + gap * length);\n    }\n\n    return Translate.set(context.movement);\n  });\n\n  /**\n   * Remove translate:\n   * - on destroying to bring markup to its inital state\n   */\n  Events.on('destroy', function () {\n    Translate.remove();\n  });\n\n  return Translate;\n}\n\nfunction Transition (Glide, Components, Events) {\n  /**\n   * Holds inactivity status of transition.\n   * When true transition is not applied.\n   *\n   * @type {Boolean}\n   */\n  var disabled = false;\n\n  var Transition = {\n    /**\n     * Composes string of the CSS transition.\n     *\n     * @param {String} property\n     * @return {String}\n     */\n    compose: function compose(property) {\n      var settings = Glide.settings;\n\n      if (!disabled) {\n        return property + ' ' + this.duration + 'ms ' + settings.animationTimingFunc;\n      }\n\n      return property + ' 0ms ' + settings.animationTimingFunc;\n    },\n\n\n    /**\n     * Sets value of transition on HTML element.\n     *\n     * @param {String=} property\n     * @return {Void}\n     */\n    set: function set() {\n      var property = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 'transform';\n\n      Components.Html.wrapper.style.transition = this.compose(property);\n    },\n\n\n    /**\n     * Removes value of transition from HTML element.\n     *\n     * @return {Void}\n     */\n    remove: function remove() {\n      Components.Html.wrapper.style.transition = '';\n    },\n\n\n    /**\n     * Runs callback after animation.\n     *\n     * @param  {Function} callback\n     * @return {Void}\n     */\n    after: function after(callback) {\n      setTimeout(function () {\n        callback();\n      }, this.duration);\n    },\n\n\n    /**\n     * Enable transition.\n     *\n     * @return {Void}\n     */\n    enable: function enable() {\n      disabled = false;\n\n      this.set();\n    },\n\n\n    /**\n     * Disable transition.\n     *\n     * @return {Void}\n     */\n    disable: function disable() {\n      disabled = true;\n\n      this.set();\n    }\n  };\n\n  define(Transition, 'duration', {\n    /**\n     * Gets duration of the transition based\n     * on currently running animation type.\n     *\n     * @return {Number}\n     */\n    get: function get() {\n      var settings = Glide.settings;\n\n      if (Glide.isType('slider') && Components.Run.offset) {\n        return settings.rewindDuration;\n      }\n\n      return settings.animationDuration;\n    }\n  });\n\n  /**\n   * Set transition `style` value:\n   * - on each moving, because it may be cleared by offset move\n   */\n  Events.on('move', function () {\n    Transition.set();\n  });\n\n  /**\n   * Disable transition:\n   * - before initial build to avoid transitioning from `0` to `startAt` index\n   * - while resizing window and recalculating dimentions\n   * - on jumping from offset transition at start and end edges in `carousel` type\n   */\n  Events.on(['build.before', 'resize', 'translate.jump'], function () {\n    Transition.disable();\n  });\n\n  /**\n   * Enable transition:\n   * - on each running, because it may be disabled by offset move\n   */\n  Events.on('run', function () {\n    Transition.enable();\n  });\n\n  /**\n   * Remove transition:\n   * - on destroying to bring markup to its inital state\n   */\n  Events.on('destroy', function () {\n    Transition.remove();\n  });\n\n  return Transition;\n}\n\nvar START_EVENTS = ['touchstart', 'mousedown'];\nvar MOVE_EVENTS = ['touchmove', 'mousemove'];\nvar END_EVENTS = ['touchend', 'touchcancel', 'mouseup', 'mouseleave'];\nvar MOUSE_EVENTS = ['mousedown', 'mousemove', 'mouseup', 'mouseleave'];\n\nfunction swipe (Glide, Components, Events) {\n  /**\n   * Instance of the binder for DOM Events.\n   *\n   * @type {EventsBinder}\n   */\n  var Binder = new EventsBinder();\n\n  var swipeSin = 0;\n  var swipeStartX = 0;\n  var swipeStartY = 0;\n  var disabled = false;\n\n  var Swipe = {\n    /**\n     * Initializes swipe bindings.\n     *\n     * @return {Void}\n     */\n    mount: function mount() {\n      this.bindSwipeStart();\n    },\n\n\n    /**\n     * Handler for `swipestart` event. Calculates entry points of the user's tap.\n     *\n     * @param {Object} event\n     * @return {Void}\n     */\n    start: function start(event) {\n      if (!disabled && !Glide.disabled) {\n        this.disable();\n\n        var swipe = this.touches(event);\n\n        swipeSin = null;\n        swipeStartX = toInt(swipe.pageX);\n        swipeStartY = toInt(swipe.pageY);\n\n        this.bindSwipeMove();\n        this.bindSwipeEnd();\n\n        Events.emit('swipe.start');\n      }\n    },\n\n\n    /**\n     * Handler for `swipemove` event. Calculates user's tap angle and distance.\n     *\n     * @param {Object} event\n     */\n    move: function move(event) {\n      if (!Glide.disabled) {\n        var _Glide$settings = Glide.settings,\n            touchAngle = _Glide$settings.touchAngle,\n            touchRatio = _Glide$settings.touchRatio,\n            classes = _Glide$settings.classes;\n\n\n        var swipe = this.touches(event);\n\n        var subExSx = toInt(swipe.pageX) - swipeStartX;\n        var subEySy = toInt(swipe.pageY) - swipeStartY;\n        var powEX = Math.abs(subExSx << 2);\n        var powEY = Math.abs(subEySy << 2);\n        var swipeHypotenuse = (powEX + powEY) * (powEX + powEY);\n        var swipeCathetus = powEY * powEY;\n\n        swipeSin = Math.asin(swipeCathetus / swipeHypotenuse);\n\n        Components.Move.make(subExSx * toFloat(touchRatio));\n\n        if (swipeSin * 180 / Math.PI < touchAngle) {\n          event.stopPropagation();\n\n          Components.Html.root.classList.add(classes.dragging);\n\n          Events.emit('swipe.move');\n        } else {\n          return false;\n        }\n      }\n    },\n\n\n    /**\n     * Handler for `swipeend` event. Finitializes user's tap and decides about glide move.\n     *\n     * @param {Object} event\n     * @return {Void}\n     */\n    end: function end(event) {\n      if (!Glide.disabled) {\n        var settings = Glide.settings;\n\n        var swipe = this.touches(event);\n        var threshold = this.threshold(event);\n\n        var swipeDistance = swipe.pageX - swipeStartX;\n        var swipeDeg = swipeSin * 180 / Math.PI;\n        var steps = Math.round(swipeDistance / Components.Sizes.slideWidth);\n\n        this.enable();\n\n        if (swipeDistance > threshold && swipeDeg < settings.touchAngle) {\n          // While swipe is positive and greater than threshold move backward.\n          if (settings.perTouch) {\n            steps = Math.min(steps, toInt(settings.perTouch));\n          }\n\n          if (Components.Direction.is('rtl')) {\n            steps = -steps;\n          }\n\n          Components.Run.make(Components.Direction.resolve('<' + steps));\n        } else if (swipeDistance < -threshold && swipeDeg < settings.touchAngle) {\n          // While swipe is negative and lower than negative threshold move forward.\n          if (settings.perTouch) {\n            steps = Math.max(steps, -toInt(settings.perTouch));\n          }\n\n          if (Components.Direction.is('rtl')) {\n            steps = -steps;\n          }\n\n          Components.Run.make(Components.Direction.resolve('>' + steps));\n        } else {\n          // While swipe don't reach distance apply previous transform.\n          Components.Move.make();\n        }\n\n        Components.Html.root.classList.remove(settings.classes.dragging);\n\n        this.unbindSwipeMove();\n        this.unbindSwipeEnd();\n\n        Events.emit('swipe.end');\n      }\n    },\n\n\n    /**\n     * Binds swipe's starting event.\n     *\n     * @return {Void}\n     */\n    bindSwipeStart: function bindSwipeStart() {\n      var _this = this;\n\n      var settings = Glide.settings;\n\n      if (settings.swipeThreshold) {\n        Binder.on(START_EVENTS[0], Components.Html.wrapper, function (event) {\n          _this.start(event);\n        });\n      }\n\n      if (settings.dragThreshold) {\n        Binder.on(START_EVENTS[1], Components.Html.wrapper, function (event) {\n          _this.start(event);\n        });\n      }\n    },\n\n\n    /**\n     * Unbinds swipe's starting event.\n     *\n     * @return {Void}\n     */\n    unbindSwipeStart: function unbindSwipeStart() {\n      Binder.off(START_EVENTS[0], Components.Html.wrapper);\n      Binder.off(START_EVENTS[1], Components.Html.wrapper);\n    },\n\n\n    /**\n     * Binds swipe's moving event.\n     *\n     * @return {Void}\n     */\n    bindSwipeMove: function bindSwipeMove() {\n      var _this2 = this;\n\n      Binder.on(MOVE_EVENTS, Components.Html.wrapper, throttle(function (event) {\n        _this2.move(event);\n      }, Glide.settings.throttle));\n    },\n\n\n    /**\n     * Unbinds swipe's moving event.\n     *\n     * @return {Void}\n     */\n    unbindSwipeMove: function unbindSwipeMove() {\n      Binder.off(MOVE_EVENTS, Components.Html.wrapper);\n    },\n\n\n    /**\n     * Binds swipe's ending event.\n     *\n     * @return {Void}\n     */\n    bindSwipeEnd: function bindSwipeEnd() {\n      var _this3 = this;\n\n      Binder.on(END_EVENTS, Components.Html.wrapper, function (event) {\n        _this3.end(event);\n      });\n    },\n\n\n    /**\n     * Unbinds swipe's ending event.\n     *\n     * @return {Void}\n     */\n    unbindSwipeEnd: function unbindSwipeEnd() {\n      Binder.off(END_EVENTS, Components.Html.wrapper);\n    },\n\n\n    /**\n     * Normalizes event touches points accorting to different types.\n     *\n     * @param {Object} event\n     */\n    touches: function touches(event) {\n      if (MOUSE_EVENTS.indexOf(event.type) > -1) {\n        return event;\n      }\n\n      return event.touches[0] || event.changedTouches[0];\n    },\n\n\n    /**\n     * Gets value of minimum swipe distance settings based on event type.\n     *\n     * @return {Number}\n     */\n    threshold: function threshold(event) {\n      var settings = Glide.settings;\n\n      if (MOUSE_EVENTS.indexOf(event.type) > -1) {\n        return settings.dragThreshold;\n      }\n\n      return settings.swipeThreshold;\n    },\n\n\n    /**\n     * Enables swipe event.\n     *\n     * @return {self}\n     */\n    enable: function enable() {\n      disabled = false;\n\n      Components.Transition.enable();\n\n      return this;\n    },\n\n\n    /**\n     * Disables swipe event.\n     *\n     * @return {self}\n     */\n    disable: function disable() {\n      disabled = true;\n\n      Components.Transition.disable();\n\n      return this;\n    }\n  };\n\n  /**\n   * Add component class:\n   * - after initial building\n   */\n  Events.on('build.after', function () {\n    Components.Html.root.classList.add(Glide.settings.classes.swipeable);\n  });\n\n  /**\n   * Remove swiping bindings:\n   * - on destroying, to remove added EventListeners\n   */\n  Events.on('destroy', function () {\n    Swipe.unbindSwipeStart();\n    Swipe.unbindSwipeMove();\n    Swipe.unbindSwipeEnd();\n    Binder.destroy();\n  });\n\n  return Swipe;\n}\n\nfunction images (Glide, Components, Events) {\n  /**\n   * Instance of the binder for DOM Events.\n   *\n   * @type {EventsBinder}\n   */\n  var Binder = new EventsBinder();\n\n  var Images = {\n    /**\n     * Binds listener to glide wrapper.\n     *\n     * @return {Void}\n     */\n    mount: function mount() {\n      this.bind();\n    },\n\n\n    /**\n     * Binds `dragstart` event on wrapper to prevent dragging images.\n     *\n     * @return {Void}\n     */\n    bind: function bind() {\n      Binder.on('dragstart', Components.Html.wrapper, this.dragstart);\n    },\n\n\n    /**\n     * Unbinds `dragstart` event on wrapper.\n     *\n     * @return {Void}\n     */\n    unbind: function unbind() {\n      Binder.off('dragstart', Components.Html.wrapper);\n    },\n\n\n    /**\n     * Event handler. Prevents dragging.\n     *\n     * @return {Void}\n     */\n    dragstart: function dragstart(event) {\n      event.preventDefault();\n    }\n  };\n\n  /**\n   * Remove bindings from images:\n   * - on destroying, to remove added EventListeners\n   */\n  Events.on('destroy', function () {\n    Images.unbind();\n    Binder.destroy();\n  });\n\n  return Images;\n}\n\nfunction anchors (Glide, Components, Events) {\n  /**\n   * Instance of the binder for DOM Events.\n   *\n   * @type {EventsBinder}\n   */\n  var Binder = new EventsBinder();\n\n  /**\n   * Holds detaching status of anchors.\n   * Prevents detaching of already detached anchors.\n   *\n   * @private\n   * @type {Boolean}\n   */\n  var detached = false;\n\n  /**\n   * Holds preventing status of anchors.\n   * If `true` redirection after click will be disabled.\n   *\n   * @private\n   * @type {Boolean}\n   */\n  var prevented = false;\n\n  var Anchors = {\n    /**\n     * Setups a initial state of anchors component.\n     *\n     * @returns {Void}\n     */\n    mount: function mount() {\n      /**\n       * Holds collection of anchors elements.\n       *\n       * @private\n       * @type {HTMLCollection}\n       */\n      this._a = Components.Html.wrapper.querySelectorAll('a');\n\n      this.bind();\n    },\n\n\n    /**\n     * Binds events to anchors inside a track.\n     *\n     * @return {Void}\n     */\n    bind: function bind() {\n      Binder.on('click', Components.Html.wrapper, this.click);\n    },\n\n\n    /**\n     * Unbinds events attached to anchors inside a track.\n     *\n     * @return {Void}\n     */\n    unbind: function unbind() {\n      Binder.off('click', Components.Html.wrapper);\n    },\n\n\n    /**\n     * Handler for click event. Prevents clicks when glide is in `prevent` status.\n     *\n     * @param  {Object} event\n     * @return {Void}\n     */\n    click: function click(event) {\n      event.stopPropagation();\n\n      if (prevented) {\n        event.preventDefault();\n      }\n    },\n\n\n    /**\n     * Detaches anchors click event inside glide.\n     *\n     * @return {self}\n     */\n    detach: function detach() {\n      prevented = true;\n\n      if (!detached) {\n        for (var i = 0; i < this.items.length; i++) {\n          this.items[i].draggable = false;\n\n          this.items[i].setAttribute('data-href', this.items[i].getAttribute('href'));\n\n          this.items[i].removeAttribute('href');\n        }\n\n        detached = true;\n      }\n\n      return this;\n    },\n\n\n    /**\n     * Attaches anchors click events inside glide.\n     *\n     * @return {self}\n     */\n    attach: function attach() {\n      prevented = false;\n\n      if (detached) {\n        for (var i = 0; i < this.items.length; i++) {\n          this.items[i].draggable = true;\n\n          this.items[i].setAttribute('href', this.items[i].getAttribute('data-href'));\n        }\n\n        detached = false;\n      }\n\n      return this;\n    }\n  };\n\n  define(Anchors, 'items', {\n    /**\n     * Gets collection of the arrows HTML elements.\n     *\n     * @return {HTMLElement[]}\n     */\n    get: function get() {\n      return Anchors._a;\n    }\n  });\n\n  /**\n   * Detach anchors inside slides:\n   * - on swiping, so they won't redirect to its `href` attributes\n   */\n  Events.on('swipe.move', function () {\n    Anchors.detach();\n  });\n\n  /**\n   * Attach anchors inside slides:\n   * - after swiping and transitions ends, so they can redirect after click again\n   */\n  Events.on('swipe.end', function () {\n    Components.Transition.after(function () {\n      Anchors.attach();\n    });\n  });\n\n  /**\n   * Unbind anchors inside slides:\n   * - on destroying, to bring anchors to its initial state\n   */\n  Events.on('destroy', function () {\n    Anchors.attach();\n    Anchors.unbind();\n    Binder.destroy();\n  });\n\n  return Anchors;\n}\n\nvar NAV_SELECTOR = '[data-glide-el=\"controls[nav]\"]';\nvar CONTROLS_SELECTOR = '[data-glide-el^=\"controls\"]';\n\nfunction controls (Glide, Components, Events) {\n  /**\n   * Instance of the binder for DOM Events.\n   *\n   * @type {EventsBinder}\n   */\n  var Binder = new EventsBinder();\n\n  var Controls = {\n    /**\n     * Inits arrows. Binds events listeners\n     * to the arrows HTML elements.\n     *\n     * @return {Void}\n     */\n    mount: function mount() {\n      /**\n       * Collection of navigation HTML elements.\n       *\n       * @private\n       * @type {HTMLCollection}\n       */\n      this._n = Components.Html.root.querySelectorAll(NAV_SELECTOR);\n\n      /**\n       * Collection of controls HTML elements.\n       *\n       * @private\n       * @type {HTMLCollection}\n       */\n      this._c = Components.Html.root.querySelectorAll(CONTROLS_SELECTOR);\n\n      this.addBindings();\n    },\n\n\n    /**\n     * Sets active class to current slide.\n     *\n     * @return {Void}\n     */\n    setActive: function setActive() {\n      for (var i = 0; i < this._n.length; i++) {\n        this.addClass(this._n[i].children);\n      }\n    },\n\n\n    /**\n     * Removes active class to current slide.\n     *\n     * @return {Void}\n     */\n    removeActive: function removeActive() {\n      for (var i = 0; i < this._n.length; i++) {\n        this.removeClass(this._n[i].children);\n      }\n    },\n\n\n    /**\n     * Toggles active class on items inside navigation.\n     *\n     * @param  {HTMLElement} controls\n     * @return {Void}\n     */\n    addClass: function addClass(controls) {\n      var settings = Glide.settings;\n      var item = controls[Glide.index];\n\n      item.classList.add(settings.classes.activeNav);\n\n      siblings(item).forEach(function (sibling) {\n        sibling.classList.remove(settings.classes.activeNav);\n      });\n    },\n\n\n    /**\n     * Removes active class from active control.\n     *\n     * @param  {HTMLElement} controls\n     * @return {Void}\n     */\n    removeClass: function removeClass(controls) {\n      controls[Glide.index].classList.remove(Glide.settings.classes.activeNav);\n    },\n\n\n    /**\n     * Adds handles to the each group of controls.\n     *\n     * @return {Void}\n     */\n    addBindings: function addBindings() {\n      for (var i = 0; i < this._c.length; i++) {\n        this.bind(this._c[i].children);\n      }\n    },\n\n\n    /**\n     * Removes handles from the each group of controls.\n     *\n     * @return {Void}\n     */\n    removeBindings: function removeBindings() {\n      for (var i = 0; i < this._c.length; i++) {\n        this.unbind(this._c[i].children);\n      }\n    },\n\n\n    /**\n     * Binds events to arrows HTML elements.\n     *\n     * @param {HTMLCollection} elements\n     * @return {Void}\n     */\n    bind: function bind(elements) {\n      for (var i = 0; i < elements.length; i++) {\n        Binder.on(['click', 'touchstart'], elements[i], this.click);\n      }\n    },\n\n\n    /**\n     * Unbinds events binded to the arrows HTML elements.\n     *\n     * @param {HTMLCollection} elements\n     * @return {Void}\n     */\n    unbind: function unbind(elements) {\n      for (var i = 0; i < elements.length; i++) {\n        Binder.off(['click', 'touchstart'], elements[i]);\n      }\n    },\n\n\n    /**\n     * Handles `click` event on the arrows HTML elements.\n     * Moves slider in driection precised in\n     * `data-glide-dir` attribute.\n     *\n     * @param {Object} event\n     * @return {Void}\n     */\n    click: function click(event) {\n      event.preventDefault();\n\n      Components.Run.make(Components.Direction.resolve(event.currentTarget.getAttribute('data-glide-dir')));\n    }\n  };\n\n  define(Controls, 'items', {\n    /**\n     * Gets collection of the controls HTML elements.\n     *\n     * @return {HTMLElement[]}\n     */\n    get: function get() {\n      return Controls._c;\n    }\n  });\n\n  /**\n   * Swap active class of current navigation item:\n   * - after mounting to set it to initial index\n   * - after each move to the new index\n   */\n  Events.on(['mount.after', 'move.after'], function () {\n    Controls.setActive();\n  });\n\n  /**\n   * Remove bindings and HTML Classes:\n   * - on destroying, to bring markup to its initial state\n   */\n  Events.on('destroy', function () {\n    Controls.removeBindings();\n    Controls.removeActive();\n    Binder.destroy();\n  });\n\n  return Controls;\n}\n\nfunction keyboard (Glide, Components, Events) {\n  /**\n   * Instance of the binder for DOM Events.\n   *\n   * @type {EventsBinder}\n   */\n  var Binder = new EventsBinder();\n\n  var Keyboard = {\n    /**\n     * Binds keyboard events on component mount.\n     *\n     * @return {Void}\n     */\n    mount: function mount() {\n      if (Glide.settings.keyboard) {\n        this.bind();\n      }\n    },\n\n\n    /**\n     * Adds keyboard press events.\n     *\n     * @return {Void}\n     */\n    bind: function bind() {\n      Binder.on('keyup', document, this.press);\n    },\n\n\n    /**\n     * Removes keyboard press events.\n     *\n     * @return {Void}\n     */\n    unbind: function unbind() {\n      Binder.off('keyup', document);\n    },\n\n\n    /**\n     * Handles keyboard's arrows press and moving glide foward and backward.\n     *\n     * @param  {Object} event\n     * @return {Void}\n     */\n    press: function press(event) {\n      if (event.keyCode === 39) {\n        Components.Run.make(Components.Direction.resolve('>'));\n      }\n\n      if (event.keyCode === 37) {\n        Components.Run.make(Components.Direction.resolve('<'));\n      }\n    }\n  };\n\n  /**\n   * Remove bindings from keyboard:\n   * - on destroying to remove added events\n   * - on updating to remove events before remounting\n   */\n  Events.on(['destroy', 'update'], function () {\n    Keyboard.unbind();\n  });\n\n  /**\n   * Remount component\n   * - on updating to reflect potential changes in settings\n   */\n  Events.on('update', function () {\n    Keyboard.mount();\n  });\n\n  /**\n   * Destroy binder:\n   * - on destroying to remove listeners\n   */\n  Events.on('destroy', function () {\n    Binder.destroy();\n  });\n\n  return Keyboard;\n}\n\nfunction autoplay (Glide, Components, Events) {\n  /**\n   * Instance of the binder for DOM Events.\n   *\n   * @type {EventsBinder}\n   */\n  var Binder = new EventsBinder();\n\n  var Autoplay = {\n    /**\n     * Initializes autoplaying and events.\n     *\n     * @return {Void}\n     */\n    mount: function mount() {\n      this.start();\n\n      if (Glide.settings.hoverpause) {\n        this.bind();\n      }\n    },\n\n\n    /**\n     * Starts autoplaying in configured interval.\n     *\n     * @param {Boolean|Number} force Run autoplaying with passed interval regardless of `autoplay` settings\n     * @return {Void}\n     */\n    start: function start() {\n      var _this = this;\n\n      if (Glide.settings.autoplay) {\n        if (isUndefined(this._i)) {\n          this._i = setInterval(function () {\n            _this.stop();\n\n            Components.Run.make('>');\n\n            _this.start();\n          }, this.time);\n        }\n      }\n    },\n\n\n    /**\n     * Stops autorunning of the glide.\n     *\n     * @return {Void}\n     */\n    stop: function stop() {\n      this._i = clearInterval(this._i);\n    },\n\n\n    /**\n     * Stops autoplaying while mouse is over glide's area.\n     *\n     * @return {Void}\n     */\n    bind: function bind() {\n      var _this2 = this;\n\n      Binder.on('mouseover', Components.Html.root, function () {\n        _this2.stop();\n      });\n\n      Binder.on('mouseout', Components.Html.root, function () {\n        _this2.start();\n      });\n    },\n\n\n    /**\n     * Unbind mouseover events.\n     *\n     * @returns {Void}\n     */\n    unbind: function unbind() {\n      Binder.off(['mouseover', 'mouseout'], Components.Html.root);\n    }\n  };\n\n  define(Autoplay, 'time', {\n    /**\n     * Gets time period value for the autoplay interval. Prioritizes\n     * times in `data-glide-autoplay` attrubutes over options.\n     *\n     * @return {Number}\n     */\n    get: function get() {\n      var autoplay = Components.Html.slides[Glide.index].getAttribute('data-glide-autoplay');\n\n      if (autoplay) {\n        return toInt(autoplay);\n      }\n\n      return toInt(Glide.settings.autoplay);\n    }\n  });\n\n  /**\n   * Stop autoplaying and unbind events:\n   * - on destroying, to clear defined interval\n   * - on updating via API to reset interval that may changed\n   */\n  Events.on(['destroy', 'update'], function () {\n    Autoplay.unbind();\n  });\n\n  /**\n   * Stop autoplaying:\n   * - before each run, to restart autoplaying\n   * - on pausing via API\n   * - on destroying, to clear defined interval\n   * - while starting a swipe\n   * - on updating via API to reset interval that may changed\n   */\n  Events.on(['run.before', 'pause', 'destroy', 'swipe.start', 'update'], function () {\n    Autoplay.stop();\n  });\n\n  /**\n   * Start autoplaying:\n   * - after each run, to restart autoplaying\n   * - on playing via API\n   * - while ending a swipe\n   */\n  Events.on(['run.after', 'play', 'swipe.end'], function () {\n    Autoplay.start();\n  });\n\n  /**\n   * Remount autoplaying:\n   * - on updating via API to reset interval that may changed\n   */\n  Events.on('update', function () {\n    Autoplay.mount();\n  });\n\n  /**\n   * Destroy a binder:\n   * - on destroying glide instance to clearup listeners\n   */\n  Events.on('destroy', function () {\n    Binder.destroy();\n  });\n\n  return Autoplay;\n}\n\n/**\n * Sorts keys of breakpoint object so they will be ordered from lower to bigger.\n *\n * @param {Object} points\n * @returns {Object}\n */\nfunction sortBreakpoints(points) {\n  if (isObject(points)) {\n    return sortKeys(points);\n  } else {\n    warn('Breakpoints option must be an object');\n  }\n\n  return {};\n}\n\nfunction breakpoints (Glide, Components, Events) {\n  /**\n   * Instance of the binder for DOM Events.\n   *\n   * @type {EventsBinder}\n   */\n  var Binder = new EventsBinder();\n\n  /**\n   * Holds reference to settings.\n   *\n   * @type {Object}\n   */\n  var settings = Glide.settings;\n\n  /**\n   * Holds reference to breakpoints object in settings. Sorts breakpoints\n   * from smaller to larger. It is required in order to proper\n   * matching currently active breakpoint settings.\n   *\n   * @type {Object}\n   */\n  var points = sortBreakpoints(settings.breakpoints);\n\n  /**\n   * Cache initial settings before overwritting.\n   *\n   * @type {Object}\n   */\n  var defaults = _extends({}, settings);\n\n  var Breakpoints = {\n    /**\n     * Matches settings for currectly matching media breakpoint.\n     *\n     * @param {Object} points\n     * @returns {Object}\n     */\n    match: function match(points) {\n      if (typeof window.matchMedia !== 'undefined') {\n        for (var point in points) {\n          if (points.hasOwnProperty(point)) {\n            if (window.matchMedia('(max-width: ' + point + 'px)').matches) {\n              return points[point];\n            }\n          }\n        }\n      }\n\n      return defaults;\n    }\n  };\n\n  /**\n   * Overwrite instance settings with currently matching breakpoint settings.\n   * This happens right after component initialization.\n   */\n  _extends(settings, Breakpoints.match(points));\n\n  /**\n   * Update glide with settings of matched brekpoint:\n   * - window resize to update slider\n   */\n  Binder.on('resize', window, throttle(function () {\n    Glide.settings = mergeOptions(settings, Breakpoints.match(points));\n  }, Glide.settings.throttle));\n\n  /**\n   * Resort and update default settings:\n   * - on reinit via API, so breakpoint matching will be performed with options\n   */\n  Events.on('update', function () {\n    points = sortBreakpoints(points);\n\n    defaults = _extends({}, settings);\n  });\n\n  /**\n   * Unbind resize listener:\n   * - on destroying, to bring markup to its initial state\n   */\n  Events.on('destroy', function () {\n    Binder.off('resize', window);\n  });\n\n  return Breakpoints;\n}\n\nvar COMPONENTS = {\n  Html: Html,\n  Translate: Translate,\n  Transition: Transition,\n  Direction: Direction,\n  Peek: Peek,\n  Sizes: Sizes,\n  Gaps: Gaps,\n  Move: Move,\n  Clones: Clones,\n  Resize: Resize,\n  Build: Build,\n  Run: Run\n};\n\nvar Glide$1 = function (_Core) {\n  inherits(Glide$$1, _Core);\n\n  function Glide$$1() {\n    classCallCheck(this, Glide$$1);\n    return possibleConstructorReturn(this, (Glide$$1.__proto__ || Object.getPrototypeOf(Glide$$1)).apply(this, arguments));\n  }\n\n  createClass(Glide$$1, [{\n    key: 'mount',\n    value: function mount() {\n      var extensions = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n      return get(Glide$$1.prototype.__proto__ || Object.getPrototypeOf(Glide$$1.prototype), 'mount', this).call(this, _extends({}, COMPONENTS, extensions));\n    }\n  }]);\n  return Glide$$1;\n}(Glide);\n\nexport default Glide$1;\nexport { swipe as Swipe, images as Images, anchors as Anchors, controls as Controls, keyboard as Keyboard, autoplay as Autoplay, breakpoints as Breakpoints };\n","// extracted by mini-css-extract-plugin","require('../../modules/es6.string.iterator');\nrequire('../../modules/es6.array.from');\nmodule.exports = require('../../modules/_core').Array.from;","require('../../modules/es6.array.is-array');\nmodule.exports = require('../../modules/_core').Array.isArray;","require('../modules/web.dom.iterable');\nrequire('../modules/es6.string.iterator');\nmodule.exports = require('../modules/core.get-iterator');","require('../modules/web.dom.iterable');\nrequire('../modules/es6.string.iterator');\nmodule.exports = require('../modules/core.is-iterable');","require('../modules/es6.object.to-string');\nrequire('../modules/es6.string.iterator');\nrequire('../modules/web.dom.iterable');\nrequire('../modules/es6.map');\nrequire('../modules/es7.map.to-json');\nmodule.exports = require('../modules/_core').Map;","require('../../modules/es6.object.assign');\nmodule.exports = require('../../modules/_core').Object.assign;","require('../../modules/es6.object.create');\nvar $Object = require('../../modules/_core').Object;\nmodule.exports = function create(P, D){\n  return $Object.create(P, D);\n};","require('../../modules/es6.object.define-property');\nvar $Object = require('../../modules/_core').Object;\nmodule.exports = function defineProperty(it, key, desc){\n  return $Object.defineProperty(it, key, desc);\n};","require('../../modules/es6.object.get-prototype-of');\nmodule.exports = require('../../modules/_core').Object.getPrototypeOf;","require('../../modules/es6.object.set-prototype-of');\nmodule.exports = require('../../modules/_core').Object.setPrototypeOf;","require('../modules/es6.parse-float');\nmodule.exports = require('../modules/_core').parseFloat;","require('../modules/es6.parse-int');\nmodule.exports = require('../modules/_core').parseInt;","require('../modules/es6.object.to-string');\nrequire('../modules/es6.string.iterator');\nrequire('../modules/web.dom.iterable');\nrequire('../modules/es6.set');\nrequire('../modules/es7.set.to-json');\nmodule.exports = require('../modules/_core').Set;","require('../../modules/es6.symbol');\nrequire('../../modules/es6.object.to-string');\nrequire('../../modules/es7.symbol.async-iterator');\nrequire('../../modules/es7.symbol.observable');\nmodule.exports = require('../../modules/_core').Symbol;","require('../../modules/es6.string.iterator');\nrequire('../../modules/web.dom.iterable');\nmodule.exports = require('../../modules/_wks-ext').f('iterator');","module.exports = function(it){\n  if(typeof it != 'function')throw TypeError(it + ' is not a function!');\n  return it;\n};","module.exports = function(){ /* empty */ };","module.exports = function(it, Constructor, name, forbiddenField){\n  if(!(it instanceof Constructor) || (forbiddenField !== undefined && forbiddenField in it)){\n    throw TypeError(name + ': incorrect invocation!');\n  } return it;\n};","var isObject = require('./_is-object');\nmodule.exports = function(it){\n  if(!isObject(it))throw TypeError(it + ' is not an object!');\n  return it;\n};","var forOf = require('./_for-of');\n\nmodule.exports = function(iter, ITERATOR){\n  var result = [];\n  forOf(iter, false, result.push, result, ITERATOR);\n  return result;\n};\n","// false -> Array#indexOf\n// true  -> Array#includes\nvar toIObject = require('./_to-iobject')\n  , toLength  = require('./_to-length')\n  , toIndex   = require('./_to-index');\nmodule.exports = function(IS_INCLUDES){\n  return function($this, el, fromIndex){\n    var O      = toIObject($this)\n      , length = toLength(O.length)\n      , index  = toIndex(fromIndex, length)\n      , value;\n    // Array#includes uses SameValueZero equality algorithm\n    if(IS_INCLUDES && el != el)while(length > index){\n      value = O[index++];\n      if(value != value)return true;\n    // Array#toIndex ignores holes, Array#includes - not\n    } else for(;length > index; index++)if(IS_INCLUDES || index in O){\n      if(O[index] === el)return IS_INCLUDES || index || 0;\n    } return !IS_INCLUDES && -1;\n  };\n};","// 0 -> Array#forEach\n// 1 -> Array#map\n// 2 -> Array#filter\n// 3 -> Array#some\n// 4 -> Array#every\n// 5 -> Array#find\n// 6 -> Array#findIndex\nvar ctx      = require('./_ctx')\n  , IObject  = require('./_iobject')\n  , toObject = require('./_to-object')\n  , toLength = require('./_to-length')\n  , asc      = require('./_array-species-create');\nmodule.exports = function(TYPE, $create){\n  var IS_MAP        = TYPE == 1\n    , IS_FILTER     = TYPE == 2\n    , IS_SOME       = TYPE == 3\n    , IS_EVERY      = TYPE == 4\n    , IS_FIND_INDEX = TYPE == 6\n    , NO_HOLES      = TYPE == 5 || IS_FIND_INDEX\n    , create        = $create || asc;\n  return function($this, callbackfn, that){\n    var O      = toObject($this)\n      , self   = IObject(O)\n      , f      = ctx(callbackfn, that, 3)\n      , length = toLength(self.length)\n      , index  = 0\n      , result = IS_MAP ? create($this, length) : IS_FILTER ? create($this, 0) : undefined\n      , val, res;\n    for(;length > index; index++)if(NO_HOLES || index in self){\n      val = self[index];\n      res = f(val, index, O);\n      if(TYPE){\n        if(IS_MAP)result[index] = res;            // map\n        else if(res)switch(TYPE){\n          case 3: return true;                    // some\n          case 5: return val;                     // find\n          case 6: return index;                   // findIndex\n          case 2: result.push(val);               // filter\n        } else if(IS_EVERY)return false;          // every\n      }\n    }\n    return IS_FIND_INDEX ? -1 : IS_SOME || IS_EVERY ? IS_EVERY : result;\n  };\n};","var isObject = require('./_is-object')\r\n  , isArray  = require('./_is-array')\r\n  , SPECIES  = require('./_wks')('species');\r\n\r\nmodule.exports = function(original){\r\n  var C;\r\n  if(isArray(original)){\r\n    C = original.constructor;\r\n    // cross-realm fallback\r\n    if(typeof C == 'function' && (C === Array || isArray(C.prototype)))C = undefined;\r\n    if(isObject(C)){\r\n      C = C[SPECIES];\r\n      if(C === null)C = undefined;\r\n    }\r\n  } return C === undefined ? Array : C;\r\n};","// 9.4.2.3 ArraySpeciesCreate(originalArray, length)\nvar speciesConstructor = require('./_array-species-constructor');\n\nmodule.exports = function(original, length){\n  return new (speciesConstructor(original))(length);\n};","// getting tag from 19.1.3.6 Object.prototype.toString()\nvar cof = require('./_cof')\n  , TAG = require('./_wks')('toStringTag')\n  // ES3 wrong here\n  , ARG = cof(function(){ return arguments; }()) == 'Arguments';\n\n// fallback for IE11 Script Access Denied error\nvar tryGet = function(it, key){\n  try {\n    return it[key];\n  } catch(e){ /* empty */ }\n};\n\nmodule.exports = function(it){\n  var O, T, B;\n  return it === undefined ? 'Undefined' : it === null ? 'Null'\n    // @@toStringTag case\n    : typeof (T = tryGet(O = Object(it), TAG)) == 'string' ? T\n    // builtinTag case\n    : ARG ? cof(O)\n    // ES3 arguments fallback\n    : (B = cof(O)) == 'Object' && typeof O.callee == 'function' ? 'Arguments' : B;\n};","var toString = {}.toString;\n\nmodule.exports = function(it){\n  return toString.call(it).slice(8, -1);\n};","'use strict';\nvar dP          = require('./_object-dp').f\n  , create      = require('./_object-create')\n  , hide        = require('./_hide')\n  , redefineAll = require('./_redefine-all')\n  , ctx         = require('./_ctx')\n  , anInstance  = require('./_an-instance')\n  , defined     = require('./_defined')\n  , forOf       = require('./_for-of')\n  , $iterDefine = require('./_iter-define')\n  , step        = require('./_iter-step')\n  , setSpecies  = require('./_set-species')\n  , DESCRIPTORS = require('./_descriptors')\n  , fastKey     = require('./_meta').fastKey\n  , SIZE        = DESCRIPTORS ? '_s' : 'size';\n\nvar getEntry = function(that, key){\n  // fast case\n  var index = fastKey(key), entry;\n  if(index !== 'F')return that._i[index];\n  // frozen object case\n  for(entry = that._f; entry; entry = entry.n){\n    if(entry.k == key)return entry;\n  }\n};\n\nmodule.exports = {\n  getConstructor: function(wrapper, NAME, IS_MAP, ADDER){\n    var C = wrapper(function(that, iterable){\n      anInstance(that, C, NAME, '_i');\n      that._i = create(null); // index\n      that._f = undefined;    // first entry\n      that._l = undefined;    // last entry\n      that[SIZE] = 0;         // size\n      if(iterable != undefined)forOf(iterable, IS_MAP, that[ADDER], that);\n    });\n    redefineAll(C.prototype, {\n      // 23.1.3.1 Map.prototype.clear()\n      // 23.2.3.2 Set.prototype.clear()\n      clear: function clear(){\n        for(var that = this, data = that._i, entry = that._f; entry; entry = entry.n){\n          entry.r = true;\n          if(entry.p)entry.p = entry.p.n = undefined;\n          delete data[entry.i];\n        }\n        that._f = that._l = undefined;\n        that[SIZE] = 0;\n      },\n      // 23.1.3.3 Map.prototype.delete(key)\n      // 23.2.3.4 Set.prototype.delete(value)\n      'delete': function(key){\n        var that  = this\n          , entry = getEntry(that, key);\n        if(entry){\n          var next = entry.n\n            , prev = entry.p;\n          delete that._i[entry.i];\n          entry.r = true;\n          if(prev)prev.n = next;\n          if(next)next.p = prev;\n          if(that._f == entry)that._f = next;\n          if(that._l == entry)that._l = prev;\n          that[SIZE]--;\n        } return !!entry;\n      },\n      // 23.2.3.6 Set.prototype.forEach(callbackfn, thisArg = undefined)\n      // 23.1.3.5 Map.prototype.forEach(callbackfn, thisArg = undefined)\n      forEach: function forEach(callbackfn /*, that = undefined */){\n        anInstance(this, C, 'forEach');\n        var f = ctx(callbackfn, arguments.length > 1 ? arguments[1] : undefined, 3)\n          , entry;\n        while(entry = entry ? entry.n : this._f){\n          f(entry.v, entry.k, this);\n          // revert to the last existing entry\n          while(entry && entry.r)entry = entry.p;\n        }\n      },\n      // 23.1.3.7 Map.prototype.has(key)\n      // 23.2.3.7 Set.prototype.has(value)\n      has: function has(key){\n        return !!getEntry(this, key);\n      }\n    });\n    if(DESCRIPTORS)dP(C.prototype, 'size', {\n      get: function(){\n        return defined(this[SIZE]);\n      }\n    });\n    return C;\n  },\n  def: function(that, key, value){\n    var entry = getEntry(that, key)\n      , prev, index;\n    // change existing entry\n    if(entry){\n      entry.v = value;\n    // create new entry\n    } else {\n      that._l = entry = {\n        i: index = fastKey(key, true), // <- index\n        k: key,                        // <- key\n        v: value,                      // <- value\n        p: prev = that._l,             // <- previous entry\n        n: undefined,                  // <- next entry\n        r: false                       // <- removed\n      };\n      if(!that._f)that._f = entry;\n      if(prev)prev.n = entry;\n      that[SIZE]++;\n      // add to index\n      if(index !== 'F')that._i[index] = entry;\n    } return that;\n  },\n  getEntry: getEntry,\n  setStrong: function(C, NAME, IS_MAP){\n    // add .keys, .values, .entries, [@@iterator]\n    // 23.1.3.4, 23.1.3.8, 23.1.3.11, 23.1.3.12, 23.2.3.5, 23.2.3.8, 23.2.3.10, 23.2.3.11\n    $iterDefine(C, NAME, function(iterated, kind){\n      this._t = iterated;  // target\n      this._k = kind;      // kind\n      this._l = undefined; // previous\n    }, function(){\n      var that  = this\n        , kind  = that._k\n        , entry = that._l;\n      // revert to the last existing entry\n      while(entry && entry.r)entry = entry.p;\n      // get next entry\n      if(!that._t || !(that._l = entry = entry ? entry.n : that._t._f)){\n        // or finish the iteration\n        that._t = undefined;\n        return step(1);\n      }\n      // return step by kind\n      if(kind == 'keys'  )return step(0, entry.k);\n      if(kind == 'values')return step(0, entry.v);\n      return step(0, [entry.k, entry.v]);\n    }, IS_MAP ? 'entries' : 'values' , !IS_MAP, true);\n\n    // add [@@species], 23.1.2.2, 23.2.2.2\n    setSpecies(NAME);\n  }\n};","// https://github.com/DavidBruant/Map-Set.prototype.toJSON\nvar classof = require('./_classof')\n  , from    = require('./_array-from-iterable');\nmodule.exports = function(NAME){\n  return function toJSON(){\n    if(classof(this) != NAME)throw TypeError(NAME + \"#toJSON isn't generic\");\n    return from(this);\n  };\n};","'use strict';\nvar global         = require('./_global')\n  , $export        = require('./_export')\n  , meta           = require('./_meta')\n  , fails          = require('./_fails')\n  , hide           = require('./_hide')\n  , redefineAll    = require('./_redefine-all')\n  , forOf          = require('./_for-of')\n  , anInstance     = require('./_an-instance')\n  , isObject       = require('./_is-object')\n  , setToStringTag = require('./_set-to-string-tag')\n  , dP             = require('./_object-dp').f\n  , each           = require('./_array-methods')(0)\n  , DESCRIPTORS    = require('./_descriptors');\n\nmodule.exports = function(NAME, wrapper, methods, common, IS_MAP, IS_WEAK){\n  var Base  = global[NAME]\n    , C     = Base\n    , ADDER = IS_MAP ? 'set' : 'add'\n    , proto = C && C.prototype\n    , O     = {};\n  if(!DESCRIPTORS || typeof C != 'function' || !(IS_WEAK || proto.forEach && !fails(function(){\n    new C().entries().next();\n  }))){\n    // create collection constructor\n    C = common.getConstructor(wrapper, NAME, IS_MAP, ADDER);\n    redefineAll(C.prototype, methods);\n    meta.NEED = true;\n  } else {\n    C = wrapper(function(target, iterable){\n      anInstance(target, C, NAME, '_c');\n      target._c = new Base;\n      if(iterable != undefined)forOf(iterable, IS_MAP, target[ADDER], target);\n    });\n    each('add,clear,delete,forEach,get,has,set,keys,values,entries,toJSON'.split(','),function(KEY){\n      var IS_ADDER = KEY == 'add' || KEY == 'set';\n      if(KEY in proto && !(IS_WEAK && KEY == 'clear'))hide(C.prototype, KEY, function(a, b){\n        anInstance(this, C, KEY);\n        if(!IS_ADDER && IS_WEAK && !isObject(a))return KEY == 'get' ? undefined : false;\n        var result = this._c[KEY](a === 0 ? 0 : a, b);\n        return IS_ADDER ? this : result;\n      });\n    });\n    if('size' in proto)dP(C.prototype, 'size', {\n      get: function(){\n        return this._c.size;\n      }\n    });\n  }\n\n  setToStringTag(C, NAME);\n\n  O[NAME] = C;\n  $export($export.G + $export.W + $export.F, O);\n\n  if(!IS_WEAK)common.setStrong(C, NAME, IS_MAP);\n\n  return C;\n};","var core = module.exports = {version: '2.4.0'};\nif(typeof __e == 'number')__e = core; // eslint-disable-line no-undef","'use strict';\r\nvar $defineProperty = require('./_object-dp')\r\n  , createDesc      = require('./_property-desc');\r\n\r\nmodule.exports = function(object, index, value){\r\n  if(index in object)$defineProperty.f(object, index, createDesc(0, value));\r\n  else object[index] = value;\r\n};","// optional / simple context binding\nvar aFunction = require('./_a-function');\nmodule.exports = function(fn, that, length){\n  aFunction(fn);\n  if(that === undefined)return fn;\n  switch(length){\n    case 1: return function(a){\n      return fn.call(that, a);\n    };\n    case 2: return function(a, b){\n      return fn.call(that, a, b);\n    };\n    case 3: return function(a, b, c){\n      return fn.call(that, a, b, c);\n    };\n  }\n  return function(/* ...args */){\n    return fn.apply(that, arguments);\n  };\n};","// 7.2.1 RequireObjectCoercible(argument)\nmodule.exports = function(it){\n  if(it == undefined)throw TypeError(\"Can't call method on  \" + it);\n  return it;\n};","// Thank's IE8 for his funny defineProperty\nmodule.exports = !require('./_fails')(function(){\n  return Object.defineProperty({}, 'a', {get: function(){ return 7; }}).a != 7;\n});","var isObject = require('./_is-object')\n  , document = require('./_global').document\n  // in old IE typeof document.createElement is 'object'\n  , is = isObject(document) && isObject(document.createElement);\nmodule.exports = function(it){\n  return is ? document.createElement(it) : {};\n};","// IE 8- don't enum bug keys\r\nmodule.exports = (\r\n  'constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf'\r\n).split(',');","// all enumerable object keys, includes symbols\nvar getKeys = require('./_object-keys')\n  , gOPS    = require('./_object-gops')\n  , pIE     = require('./_object-pie');\nmodule.exports = function(it){\n  var result     = getKeys(it)\n    , getSymbols = gOPS.f;\n  if(getSymbols){\n    var symbols = getSymbols(it)\n      , isEnum  = pIE.f\n      , i       = 0\n      , key;\n    while(symbols.length > i)if(isEnum.call(it, key = symbols[i++]))result.push(key);\n  } return result;\n};","var global    = require('./_global')\n  , core      = require('./_core')\n  , ctx       = require('./_ctx')\n  , hide      = require('./_hide')\n  , PROTOTYPE = 'prototype';\n\nvar $export = function(type, name, source){\n  var IS_FORCED = type & $export.F\n    , IS_GLOBAL = type & $export.G\n    , IS_STATIC = type & $export.S\n    , IS_PROTO  = type & $export.P\n    , IS_BIND   = type & $export.B\n    , IS_WRAP   = type & $export.W\n    , exports   = IS_GLOBAL ? core : core[name] || (core[name] = {})\n    , expProto  = exports[PROTOTYPE]\n    , target    = IS_GLOBAL ? global : IS_STATIC ? global[name] : (global[name] || {})[PROTOTYPE]\n    , key, own, out;\n  if(IS_GLOBAL)source = name;\n  for(key in source){\n    // contains in native\n    own = !IS_FORCED && target && target[key] !== undefined;\n    if(own && key in exports)continue;\n    // export native or passed\n    out = own ? target[key] : source[key];\n    // prevent global pollution for namespaces\n    exports[key] = IS_GLOBAL && typeof target[key] != 'function' ? source[key]\n    // bind timers to global for call from export context\n    : IS_BIND && own ? ctx(out, global)\n    // wrap global constructors for prevent change them in library\n    : IS_WRAP && target[key] == out ? (function(C){\n      var F = function(a, b, c){\n        if(this instanceof C){\n          switch(arguments.length){\n            case 0: return new C;\n            case 1: return new C(a);\n            case 2: return new C(a, b);\n          } return new C(a, b, c);\n        } return C.apply(this, arguments);\n      };\n      F[PROTOTYPE] = C[PROTOTYPE];\n      return F;\n    // make static versions for prototype methods\n    })(out) : IS_PROTO && typeof out == 'function' ? ctx(Function.call, out) : out;\n    // export proto methods to core.%CONSTRUCTOR%.methods.%NAME%\n    if(IS_PROTO){\n      (exports.virtual || (exports.virtual = {}))[key] = out;\n      // export proto methods to core.%CONSTRUCTOR%.prototype.%NAME%\n      if(type & $export.R && expProto && !expProto[key])hide(expProto, key, out);\n    }\n  }\n};\n// type bitmap\n$export.F = 1;   // forced\n$export.G = 2;   // global\n$export.S = 4;   // static\n$export.P = 8;   // proto\n$export.B = 16;  // bind\n$export.W = 32;  // wrap\n$export.U = 64;  // safe\n$export.R = 128; // real proto method for `library` \nmodule.exports = $export;","module.exports = function(exec){\n  try {\n    return !!exec();\n  } catch(e){\n    return true;\n  }\n};","var ctx         = require('./_ctx')\n  , call        = require('./_iter-call')\n  , isArrayIter = require('./_is-array-iter')\n  , anObject    = require('./_an-object')\n  , toLength    = require('./_to-length')\n  , getIterFn   = require('./core.get-iterator-method')\n  , BREAK       = {}\n  , RETURN      = {};\nvar exports = module.exports = function(iterable, entries, fn, that, ITERATOR){\n  var iterFn = ITERATOR ? function(){ return iterable; } : getIterFn(iterable)\n    , f      = ctx(fn, that, entries ? 2 : 1)\n    , index  = 0\n    , length, step, iterator, result;\n  if(typeof iterFn != 'function')throw TypeError(iterable + ' is not iterable!');\n  // fast case for arrays with default iterator\n  if(isArrayIter(iterFn))for(length = toLength(iterable.length); length > index; index++){\n    result = entries ? f(anObject(step = iterable[index])[0], step[1]) : f(iterable[index]);\n    if(result === BREAK || result === RETURN)return result;\n  } else for(iterator = iterFn.call(iterable); !(step = iterator.next()).done; ){\n    result = call(iterator, f, step.value, entries);\n    if(result === BREAK || result === RETURN)return result;\n  }\n};\nexports.BREAK  = BREAK;\nexports.RETURN = RETURN;","// https://github.com/zloirock/core-js/issues/86#issuecomment-115759028\nvar global = module.exports = typeof window != 'undefined' && window.Math == Math\n  ? window : typeof self != 'undefined' && self.Math == Math ? self : Function('return this')();\nif(typeof __g == 'number')__g = global; // eslint-disable-line no-undef","var hasOwnProperty = {}.hasOwnProperty;\nmodule.exports = function(it, key){\n  return hasOwnProperty.call(it, key);\n};","var dP         = require('./_object-dp')\n  , createDesc = require('./_property-desc');\nmodule.exports = require('./_descriptors') ? function(object, key, value){\n  return dP.f(object, key, createDesc(1, value));\n} : function(object, key, value){\n  object[key] = value;\n  return object;\n};","module.exports = require('./_global').document && document.documentElement;","module.exports = !require('./_descriptors') && !require('./_fails')(function(){\r\n  return Object.defineProperty(require('./_dom-create')('div'), 'a', {get: function(){ return 7; }}).a != 7;\r\n});","// fallback for non-array-like ES3 and non-enumerable old V8 strings\nvar cof = require('./_cof');\nmodule.exports = Object('z').propertyIsEnumerable(0) ? Object : function(it){\n  return cof(it) == 'String' ? it.split('') : Object(it);\n};","// check on default Array iterator\nvar Iterators  = require('./_iterators')\n  , ITERATOR   = require('./_wks')('iterator')\n  , ArrayProto = Array.prototype;\n\nmodule.exports = function(it){\n  return it !== undefined && (Iterators.Array === it || ArrayProto[ITERATOR] === it);\n};","// 7.2.2 IsArray(argument)\nvar cof = require('./_cof');\nmodule.exports = Array.isArray || function isArray(arg){\n  return cof(arg) == 'Array';\n};","module.exports = function(it){\n  return typeof it === 'object' ? it !== null : typeof it === 'function';\n};","// call something on iterator step with safe closing on error\nvar anObject = require('./_an-object');\nmodule.exports = function(iterator, fn, value, entries){\n  try {\n    return entries ? fn(anObject(value)[0], value[1]) : fn(value);\n  // 7.4.6 IteratorClose(iterator, completion)\n  } catch(e){\n    var ret = iterator['return'];\n    if(ret !== undefined)anObject(ret.call(iterator));\n    throw e;\n  }\n};","'use strict';\nvar create         = require('./_object-create')\n  , descriptor     = require('./_property-desc')\n  , setToStringTag = require('./_set-to-string-tag')\n  , IteratorPrototype = {};\n\n// 25.1.2.1.1 %IteratorPrototype%[@@iterator]()\nrequire('./_hide')(IteratorPrototype, require('./_wks')('iterator'), function(){ return this; });\n\nmodule.exports = function(Constructor, NAME, next){\n  Constructor.prototype = create(IteratorPrototype, {next: descriptor(1, next)});\n  setToStringTag(Constructor, NAME + ' Iterator');\n};","'use strict';\nvar LIBRARY        = require('./_library')\n  , $export        = require('./_export')\n  , redefine       = require('./_redefine')\n  , hide           = require('./_hide')\n  , has            = require('./_has')\n  , Iterators      = require('./_iterators')\n  , $iterCreate    = require('./_iter-create')\n  , setToStringTag = require('./_set-to-string-tag')\n  , getPrototypeOf = require('./_object-gpo')\n  , ITERATOR       = require('./_wks')('iterator')\n  , BUGGY          = !([].keys && 'next' in [].keys()) // Safari has buggy iterators w/o `next`\n  , FF_ITERATOR    = '@@iterator'\n  , KEYS           = 'keys'\n  , VALUES         = 'values';\n\nvar returnThis = function(){ return this; };\n\nmodule.exports = function(Base, NAME, Constructor, next, DEFAULT, IS_SET, FORCED){\n  $iterCreate(Constructor, NAME, next);\n  var getMethod = function(kind){\n    if(!BUGGY && kind in proto)return proto[kind];\n    switch(kind){\n      case KEYS: return function keys(){ return new Constructor(this, kind); };\n      case VALUES: return function values(){ return new Constructor(this, kind); };\n    } return function entries(){ return new Constructor(this, kind); };\n  };\n  var TAG        = NAME + ' Iterator'\n    , DEF_VALUES = DEFAULT == VALUES\n    , VALUES_BUG = false\n    , proto      = Base.prototype\n    , $native    = proto[ITERATOR] || proto[FF_ITERATOR] || DEFAULT && proto[DEFAULT]\n    , $default   = $native || getMethod(DEFAULT)\n    , $entries   = DEFAULT ? !DEF_VALUES ? $default : getMethod('entries') : undefined\n    , $anyNative = NAME == 'Array' ? proto.entries || $native : $native\n    , methods, key, IteratorPrototype;\n  // Fix native\n  if($anyNative){\n    IteratorPrototype = getPrototypeOf($anyNative.call(new Base));\n    if(IteratorPrototype !== Object.prototype){\n      // Set @@toStringTag to native iterators\n      setToStringTag(IteratorPrototype, TAG, true);\n      // fix for some old engines\n      if(!LIBRARY && !has(IteratorPrototype, ITERATOR))hide(IteratorPrototype, ITERATOR, returnThis);\n    }\n  }\n  // fix Array#{values, @@iterator}.name in V8 / FF\n  if(DEF_VALUES && $native && $native.name !== VALUES){\n    VALUES_BUG = true;\n    $default = function values(){ return $native.call(this); };\n  }\n  // Define iterator\n  if((!LIBRARY || FORCED) && (BUGGY || VALUES_BUG || !proto[ITERATOR])){\n    hide(proto, ITERATOR, $default);\n  }\n  // Plug for library\n  Iterators[NAME] = $default;\n  Iterators[TAG]  = returnThis;\n  if(DEFAULT){\n    methods = {\n      values:  DEF_VALUES ? $default : getMethod(VALUES),\n      keys:    IS_SET     ? $default : getMethod(KEYS),\n      entries: $entries\n    };\n    if(FORCED)for(key in methods){\n      if(!(key in proto))redefine(proto, key, methods[key]);\n    } else $export($export.P + $export.F * (BUGGY || VALUES_BUG), NAME, methods);\n  }\n  return methods;\n};","var ITERATOR     = require('./_wks')('iterator')\n  , SAFE_CLOSING = false;\n\ntry {\n  var riter = [7][ITERATOR]();\n  riter['return'] = function(){ SAFE_CLOSING = true; };\n  Array.from(riter, function(){ throw 2; });\n} catch(e){ /* empty */ }\n\nmodule.exports = function(exec, skipClosing){\n  if(!skipClosing && !SAFE_CLOSING)return false;\n  var safe = false;\n  try {\n    var arr  = [7]\n      , iter = arr[ITERATOR]();\n    iter.next = function(){ return {done: safe = true}; };\n    arr[ITERATOR] = function(){ return iter; };\n    exec(arr);\n  } catch(e){ /* empty */ }\n  return safe;\n};","module.exports = function(done, value){\n  return {value: value, done: !!done};\n};","module.exports = {};","var getKeys   = require('./_object-keys')\n  , toIObject = require('./_to-iobject');\nmodule.exports = function(object, el){\n  var O      = toIObject(object)\n    , keys   = getKeys(O)\n    , length = keys.length\n    , index  = 0\n    , key;\n  while(length > index)if(O[key = keys[index++]] === el)return key;\n};","module.exports = true;","var META     = require('./_uid')('meta')\n  , isObject = require('./_is-object')\n  , has      = require('./_has')\n  , setDesc  = require('./_object-dp').f\n  , id       = 0;\nvar isExtensible = Object.isExtensible || function(){\n  return true;\n};\nvar FREEZE = !require('./_fails')(function(){\n  return isExtensible(Object.preventExtensions({}));\n});\nvar setMeta = function(it){\n  setDesc(it, META, {value: {\n    i: 'O' + ++id, // object ID\n    w: {}          // weak collections IDs\n  }});\n};\nvar fastKey = function(it, create){\n  // return primitive with prefix\n  if(!isObject(it))return typeof it == 'symbol' ? it : (typeof it == 'string' ? 'S' : 'P') + it;\n  if(!has(it, META)){\n    // can't set metadata to uncaught frozen object\n    if(!isExtensible(it))return 'F';\n    // not necessary to add metadata\n    if(!create)return 'E';\n    // add missing metadata\n    setMeta(it);\n  // return object ID\n  } return it[META].i;\n};\nvar getWeak = function(it, create){\n  if(!has(it, META)){\n    // can't set metadata to uncaught frozen object\n    if(!isExtensible(it))return true;\n    // not necessary to add metadata\n    if(!create)return false;\n    // add missing metadata\n    setMeta(it);\n  // return hash weak collections IDs\n  } return it[META].w;\n};\n// add metadata on freeze-family methods calling\nvar onFreeze = function(it){\n  if(FREEZE && meta.NEED && isExtensible(it) && !has(it, META))setMeta(it);\n  return it;\n};\nvar meta = module.exports = {\n  KEY:      META,\n  NEED:     false,\n  fastKey:  fastKey,\n  getWeak:  getWeak,\n  onFreeze: onFreeze\n};","'use strict';\n// 19.1.2.1 Object.assign(target, source, ...)\nvar getKeys  = require('./_object-keys')\n  , gOPS     = require('./_object-gops')\n  , pIE      = require('./_object-pie')\n  , toObject = require('./_to-object')\n  , IObject  = require('./_iobject')\n  , $assign  = Object.assign;\n\n// should work with symbols and should have deterministic property order (V8 bug)\nmodule.exports = !$assign || require('./_fails')(function(){\n  var A = {}\n    , B = {}\n    , S = Symbol()\n    , K = 'abcdefghijklmnopqrst';\n  A[S] = 7;\n  K.split('').forEach(function(k){ B[k] = k; });\n  return $assign({}, A)[S] != 7 || Object.keys($assign({}, B)).join('') != K;\n}) ? function assign(target, source){ // eslint-disable-line no-unused-vars\n  var T     = toObject(target)\n    , aLen  = arguments.length\n    , index = 1\n    , getSymbols = gOPS.f\n    , isEnum     = pIE.f;\n  while(aLen > index){\n    var S      = IObject(arguments[index++])\n      , keys   = getSymbols ? getKeys(S).concat(getSymbols(S)) : getKeys(S)\n      , length = keys.length\n      , j      = 0\n      , key;\n    while(length > j)if(isEnum.call(S, key = keys[j++]))T[key] = S[key];\n  } return T;\n} : $assign;","// 19.1.2.2 / 15.2.3.5 Object.create(O [, Properties])\r\nvar anObject    = require('./_an-object')\r\n  , dPs         = require('./_object-dps')\r\n  , enumBugKeys = require('./_enum-bug-keys')\r\n  , IE_PROTO    = require('./_shared-key')('IE_PROTO')\r\n  , Empty       = function(){ /* empty */ }\r\n  , PROTOTYPE   = 'prototype';\r\n\r\n// Create object with fake `null` prototype: use iframe Object with cleared prototype\r\nvar createDict = function(){\r\n  // Thrash, waste and sodomy: IE GC bug\r\n  var iframe = require('./_dom-create')('iframe')\r\n    , i      = enumBugKeys.length\r\n    , gt     = '>'\r\n    , iframeDocument;\r\n  iframe.style.display = 'none';\r\n  require('./_html').appendChild(iframe);\r\n  iframe.src = 'javascript:'; // eslint-disable-line no-script-url\r\n  // createDict = iframe.contentWindow.Object;\r\n  // html.removeChild(iframe);\r\n  iframeDocument = iframe.contentWindow.document;\r\n  iframeDocument.open();\r\n  iframeDocument.write('<script>document.F=Object</script' + gt);\r\n  iframeDocument.close();\r\n  createDict = iframeDocument.F;\r\n  while(i--)delete createDict[PROTOTYPE][enumBugKeys[i]];\r\n  return createDict();\r\n};\r\n\r\nmodule.exports = Object.create || function create(O, Properties){\r\n  var result;\r\n  if(O !== null){\r\n    Empty[PROTOTYPE] = anObject(O);\r\n    result = new Empty;\r\n    Empty[PROTOTYPE] = null;\r\n    // add \"__proto__\" for Object.getPrototypeOf polyfill\r\n    result[IE_PROTO] = O;\r\n  } else result = createDict();\r\n  return Properties === undefined ? result : dPs(result, Properties);\r\n};","var anObject       = require('./_an-object')\n  , IE8_DOM_DEFINE = require('./_ie8-dom-define')\n  , toPrimitive    = require('./_to-primitive')\n  , dP             = Object.defineProperty;\n\nexports.f = require('./_descriptors') ? Object.defineProperty : function defineProperty(O, P, Attributes){\n  anObject(O);\n  P = toPrimitive(P, true);\n  anObject(Attributes);\n  if(IE8_DOM_DEFINE)try {\n    return dP(O, P, Attributes);\n  } catch(e){ /* empty */ }\n  if('get' in Attributes || 'set' in Attributes)throw TypeError('Accessors not supported!');\n  if('value' in Attributes)O[P] = Attributes.value;\n  return O;\n};","var dP       = require('./_object-dp')\r\n  , anObject = require('./_an-object')\r\n  , getKeys  = require('./_object-keys');\r\n\r\nmodule.exports = require('./_descriptors') ? Object.defineProperties : function defineProperties(O, Properties){\r\n  anObject(O);\r\n  var keys   = getKeys(Properties)\r\n    , length = keys.length\r\n    , i = 0\r\n    , P;\r\n  while(length > i)dP.f(O, P = keys[i++], Properties[P]);\r\n  return O;\r\n};","var pIE            = require('./_object-pie')\r\n  , createDesc     = require('./_property-desc')\r\n  , toIObject      = require('./_to-iobject')\r\n  , toPrimitive    = require('./_to-primitive')\r\n  , has            = require('./_has')\r\n  , IE8_DOM_DEFINE = require('./_ie8-dom-define')\r\n  , gOPD           = Object.getOwnPropertyDescriptor;\r\n\r\nexports.f = require('./_descriptors') ? gOPD : function getOwnPropertyDescriptor(O, P){\r\n  O = toIObject(O);\r\n  P = toPrimitive(P, true);\r\n  if(IE8_DOM_DEFINE)try {\r\n    return gOPD(O, P);\r\n  } catch(e){ /* empty */ }\r\n  if(has(O, P))return createDesc(!pIE.f.call(O, P), O[P]);\r\n};","// fallback for IE11 buggy Object.getOwnPropertyNames with iframe and window\nvar toIObject = require('./_to-iobject')\n  , gOPN      = require('./_object-gopn').f\n  , toString  = {}.toString;\n\nvar windowNames = typeof window == 'object' && window && Object.getOwnPropertyNames\n  ? Object.getOwnPropertyNames(window) : [];\n\nvar getWindowNames = function(it){\n  try {\n    return gOPN(it);\n  } catch(e){\n    return windowNames.slice();\n  }\n};\n\nmodule.exports.f = function getOwnPropertyNames(it){\n  return windowNames && toString.call(it) == '[object Window]' ? getWindowNames(it) : gOPN(toIObject(it));\n};\n","// 19.1.2.7 / 15.2.3.4 Object.getOwnPropertyNames(O)\r\nvar $keys      = require('./_object-keys-internal')\r\n  , hiddenKeys = require('./_enum-bug-keys').concat('length', 'prototype');\r\n\r\nexports.f = Object.getOwnPropertyNames || function getOwnPropertyNames(O){\r\n  return $keys(O, hiddenKeys);\r\n};","exports.f = Object.getOwnPropertySymbols;","// 19.1.2.9 / 15.2.3.2 Object.getPrototypeOf(O)\r\nvar has         = require('./_has')\r\n  , toObject    = require('./_to-object')\r\n  , IE_PROTO    = require('./_shared-key')('IE_PROTO')\r\n  , ObjectProto = Object.prototype;\r\n\r\nmodule.exports = Object.getPrototypeOf || function(O){\r\n  O = toObject(O);\r\n  if(has(O, IE_PROTO))return O[IE_PROTO];\r\n  if(typeof O.constructor == 'function' && O instanceof O.constructor){\r\n    return O.constructor.prototype;\r\n  } return O instanceof Object ? ObjectProto : null;\r\n};","var has          = require('./_has')\r\n  , toIObject    = require('./_to-iobject')\r\n  , arrayIndexOf = require('./_array-includes')(false)\r\n  , IE_PROTO     = require('./_shared-key')('IE_PROTO');\r\n\r\nmodule.exports = function(object, names){\r\n  var O      = toIObject(object)\r\n    , i      = 0\r\n    , result = []\r\n    , key;\r\n  for(key in O)if(key != IE_PROTO)has(O, key) && result.push(key);\r\n  // Don't enum bug & hidden keys\r\n  while(names.length > i)if(has(O, key = names[i++])){\r\n    ~arrayIndexOf(result, key) || result.push(key);\r\n  }\r\n  return result;\r\n};","// 19.1.2.14 / 15.2.3.14 Object.keys(O)\r\nvar $keys       = require('./_object-keys-internal')\r\n  , enumBugKeys = require('./_enum-bug-keys');\r\n\r\nmodule.exports = Object.keys || function keys(O){\r\n  return $keys(O, enumBugKeys);\r\n};","exports.f = {}.propertyIsEnumerable;","// most Object methods by ES6 should accept primitives\nvar $export = require('./_export')\n  , core    = require('./_core')\n  , fails   = require('./_fails');\nmodule.exports = function(KEY, exec){\n  var fn  = (core.Object || {})[KEY] || Object[KEY]\n    , exp = {};\n  exp[KEY] = exec(fn);\n  $export($export.S + $export.F * fails(function(){ fn(1); }), 'Object', exp);\n};","var $parseFloat = require('./_global').parseFloat\n  , $trim       = require('./_string-trim').trim;\n\nmodule.exports = 1 / $parseFloat(require('./_string-ws') + '-0') !== -Infinity ? function parseFloat(str){\n  var string = $trim(String(str), 3)\n    , result = $parseFloat(string);\n  return result === 0 && string.charAt(0) == '-' ? -0 : result;\n} : $parseFloat;","var $parseInt = require('./_global').parseInt\n  , $trim     = require('./_string-trim').trim\n  , ws        = require('./_string-ws')\n  , hex       = /^[\\-+]?0[xX]/;\n\nmodule.exports = $parseInt(ws + '08') !== 8 || $parseInt(ws + '0x16') !== 22 ? function parseInt(str, radix){\n  var string = $trim(String(str), 3);\n  return $parseInt(string, (radix >>> 0) || (hex.test(string) ? 16 : 10));\n} : $parseInt;","module.exports = function(bitmap, value){\n  return {\n    enumerable  : !(bitmap & 1),\n    configurable: !(bitmap & 2),\n    writable    : !(bitmap & 4),\n    value       : value\n  };\n};","var hide = require('./_hide');\nmodule.exports = function(target, src, safe){\n  for(var key in src){\n    if(safe && target[key])target[key] = src[key];\n    else hide(target, key, src[key]);\n  } return target;\n};","module.exports = require('./_hide');","// Works with __proto__ only. Old v8 can't work with null proto objects.\n/* eslint-disable no-proto */\nvar isObject = require('./_is-object')\n  , anObject = require('./_an-object');\nvar check = function(O, proto){\n  anObject(O);\n  if(!isObject(proto) && proto !== null)throw TypeError(proto + \": can't set as prototype!\");\n};\nmodule.exports = {\n  set: Object.setPrototypeOf || ('__proto__' in {} ? // eslint-disable-line\n    function(test, buggy, set){\n      try {\n        set = require('./_ctx')(Function.call, require('./_object-gopd').f(Object.prototype, '__proto__').set, 2);\n        set(test, []);\n        buggy = !(test instanceof Array);\n      } catch(e){ buggy = true; }\n      return function setPrototypeOf(O, proto){\n        check(O, proto);\n        if(buggy)O.__proto__ = proto;\n        else set(O, proto);\n        return O;\n      };\n    }({}, false) : undefined),\n  check: check\n};","'use strict';\nvar global      = require('./_global')\n  , core        = require('./_core')\n  , dP          = require('./_object-dp')\n  , DESCRIPTORS = require('./_descriptors')\n  , SPECIES     = require('./_wks')('species');\n\nmodule.exports = function(KEY){\n  var C = typeof core[KEY] == 'function' ? core[KEY] : global[KEY];\n  if(DESCRIPTORS && C && !C[SPECIES])dP.f(C, SPECIES, {\n    configurable: true,\n    get: function(){ return this; }\n  });\n};","var def = require('./_object-dp').f\n  , has = require('./_has')\n  , TAG = require('./_wks')('toStringTag');\n\nmodule.exports = function(it, tag, stat){\n  if(it && !has(it = stat ? it : it.prototype, TAG))def(it, TAG, {configurable: true, value: tag});\n};","var shared = require('./_shared')('keys')\r\n  , uid    = require('./_uid');\r\nmodule.exports = function(key){\r\n  return shared[key] || (shared[key] = uid(key));\r\n};","var global = require('./_global')\n  , SHARED = '__core-js_shared__'\n  , store  = global[SHARED] || (global[SHARED] = {});\nmodule.exports = function(key){\n  return store[key] || (store[key] = {});\n};","var toInteger = require('./_to-integer')\n  , defined   = require('./_defined');\n// true  -> String#at\n// false -> String#codePointAt\nmodule.exports = function(TO_STRING){\n  return function(that, pos){\n    var s = String(defined(that))\n      , i = toInteger(pos)\n      , l = s.length\n      , a, b;\n    if(i < 0 || i >= l)return TO_STRING ? '' : undefined;\n    a = s.charCodeAt(i);\n    return a < 0xd800 || a > 0xdbff || i + 1 === l || (b = s.charCodeAt(i + 1)) < 0xdc00 || b > 0xdfff\n      ? TO_STRING ? s.charAt(i) : a\n      : TO_STRING ? s.slice(i, i + 2) : (a - 0xd800 << 10) + (b - 0xdc00) + 0x10000;\n  };\n};","var $export = require('./_export')\n  , defined = require('./_defined')\n  , fails   = require('./_fails')\n  , spaces  = require('./_string-ws')\n  , space   = '[' + spaces + ']'\n  , non     = '\\u200b\\u0085'\n  , ltrim   = RegExp('^' + space + space + '*')\n  , rtrim   = RegExp(space + space + '*$');\n\nvar exporter = function(KEY, exec, ALIAS){\n  var exp   = {};\n  var FORCE = fails(function(){\n    return !!spaces[KEY]() || non[KEY]() != non;\n  });\n  var fn = exp[KEY] = FORCE ? exec(trim) : spaces[KEY];\n  if(ALIAS)exp[ALIAS] = fn;\n  $export($export.P + $export.F * FORCE, 'String', exp);\n};\n\n// 1 -> String#trimLeft\n// 2 -> String#trimRight\n// 3 -> String#trim\nvar trim = exporter.trim = function(string, TYPE){\n  string = String(defined(string));\n  if(TYPE & 1)string = string.replace(ltrim, '');\n  if(TYPE & 2)string = string.replace(rtrim, '');\n  return string;\n};\n\nmodule.exports = exporter;","module.exports = '\\x09\\x0A\\x0B\\x0C\\x0D\\x20\\xA0\\u1680\\u180E\\u2000\\u2001\\u2002\\u2003' +\r\n  '\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200A\\u202F\\u205F\\u3000\\u2028\\u2029\\uFEFF';","var toInteger = require('./_to-integer')\n  , max       = Math.max\n  , min       = Math.min;\nmodule.exports = function(index, length){\n  index = toInteger(index);\n  return index < 0 ? max(index + length, 0) : min(index, length);\n};","// 7.1.4 ToInteger\nvar ceil  = Math.ceil\n  , floor = Math.floor;\nmodule.exports = function(it){\n  return isNaN(it = +it) ? 0 : (it > 0 ? floor : ceil)(it);\n};","// to indexed object, toObject with fallback for non-array-like ES3 strings\nvar IObject = require('./_iobject')\n  , defined = require('./_defined');\nmodule.exports = function(it){\n  return IObject(defined(it));\n};","// 7.1.15 ToLength\nvar toInteger = require('./_to-integer')\n  , min       = Math.min;\nmodule.exports = function(it){\n  return it > 0 ? min(toInteger(it), 0x1fffffffffffff) : 0; // pow(2, 53) - 1 == 9007199254740991\n};","// 7.1.13 ToObject(argument)\nvar defined = require('./_defined');\nmodule.exports = function(it){\n  return Object(defined(it));\n};","// 7.1.1 ToPrimitive(input [, PreferredType])\nvar isObject = require('./_is-object');\n// instead of the ES6 spec version, we didn't implement @@toPrimitive case\n// and the second argument - flag - preferred type is a string\nmodule.exports = function(it, S){\n  if(!isObject(it))return it;\n  var fn, val;\n  if(S && typeof (fn = it.toString) == 'function' && !isObject(val = fn.call(it)))return val;\n  if(typeof (fn = it.valueOf) == 'function' && !isObject(val = fn.call(it)))return val;\n  if(!S && typeof (fn = it.toString) == 'function' && !isObject(val = fn.call(it)))return val;\n  throw TypeError(\"Can't convert object to primitive value\");\n};","var id = 0\n  , px = Math.random();\nmodule.exports = function(key){\n  return 'Symbol('.concat(key === undefined ? '' : key, ')_', (++id + px).toString(36));\n};","var global         = require('./_global')\r\n  , core           = require('./_core')\r\n  , LIBRARY        = require('./_library')\r\n  , wksExt         = require('./_wks-ext')\r\n  , defineProperty = require('./_object-dp').f;\r\nmodule.exports = function(name){\r\n  var $Symbol = core.Symbol || (core.Symbol = LIBRARY ? {} : global.Symbol || {});\r\n  if(name.charAt(0) != '_' && !(name in $Symbol))defineProperty($Symbol, name, {value: wksExt.f(name)});\r\n};","exports.f = require('./_wks');","var store      = require('./_shared')('wks')\n  , uid        = require('./_uid')\n  , Symbol     = require('./_global').Symbol\n  , USE_SYMBOL = typeof Symbol == 'function';\n\nvar $exports = module.exports = function(name){\n  return store[name] || (store[name] =\n    USE_SYMBOL && Symbol[name] || (USE_SYMBOL ? Symbol : uid)('Symbol.' + name));\n};\n\n$exports.store = store;","var classof   = require('./_classof')\n  , ITERATOR  = require('./_wks')('iterator')\n  , Iterators = require('./_iterators');\nmodule.exports = require('./_core').getIteratorMethod = function(it){\n  if(it != undefined)return it[ITERATOR]\n    || it['@@iterator']\n    || Iterators[classof(it)];\n};","var anObject = require('./_an-object')\n  , get      = require('./core.get-iterator-method');\nmodule.exports = require('./_core').getIterator = function(it){\n  var iterFn = get(it);\n  if(typeof iterFn != 'function')throw TypeError(it + ' is not iterable!');\n  return anObject(iterFn.call(it));\n};","var classof   = require('./_classof')\n  , ITERATOR  = require('./_wks')('iterator')\n  , Iterators = require('./_iterators');\nmodule.exports = require('./_core').isIterable = function(it){\n  var O = Object(it);\n  return O[ITERATOR] !== undefined\n    || '@@iterator' in O\n    || Iterators.hasOwnProperty(classof(O));\n};","'use strict';\nvar ctx            = require('./_ctx')\n  , $export        = require('./_export')\n  , toObject       = require('./_to-object')\n  , call           = require('./_iter-call')\n  , isArrayIter    = require('./_is-array-iter')\n  , toLength       = require('./_to-length')\n  , createProperty = require('./_create-property')\n  , getIterFn      = require('./core.get-iterator-method');\n\n$export($export.S + $export.F * !require('./_iter-detect')(function(iter){ Array.from(iter); }), 'Array', {\n  // 22.1.2.1 Array.from(arrayLike, mapfn = undefined, thisArg = undefined)\n  from: function from(arrayLike/*, mapfn = undefined, thisArg = undefined*/){\n    var O       = toObject(arrayLike)\n      , C       = typeof this == 'function' ? this : Array\n      , aLen    = arguments.length\n      , mapfn   = aLen > 1 ? arguments[1] : undefined\n      , mapping = mapfn !== undefined\n      , index   = 0\n      , iterFn  = getIterFn(O)\n      , length, result, step, iterator;\n    if(mapping)mapfn = ctx(mapfn, aLen > 2 ? arguments[2] : undefined, 2);\n    // if object isn't iterable or it's array with default iterator - use simple case\n    if(iterFn != undefined && !(C == Array && isArrayIter(iterFn))){\n      for(iterator = iterFn.call(O), result = new C; !(step = iterator.next()).done; index++){\n        createProperty(result, index, mapping ? call(iterator, mapfn, [step.value, index], true) : step.value);\n      }\n    } else {\n      length = toLength(O.length);\n      for(result = new C(length); length > index; index++){\n        createProperty(result, index, mapping ? mapfn(O[index], index) : O[index]);\n      }\n    }\n    result.length = index;\n    return result;\n  }\n});\n","// 22.1.2.2 / 15.4.3.2 Array.isArray(arg)\r\nvar $export = require('./_export');\r\n\r\n$export($export.S, 'Array', {isArray: require('./_is-array')});","'use strict';\nvar addToUnscopables = require('./_add-to-unscopables')\n  , step             = require('./_iter-step')\n  , Iterators        = require('./_iterators')\n  , toIObject        = require('./_to-iobject');\n\n// 22.1.3.4 Array.prototype.entries()\n// 22.1.3.13 Array.prototype.keys()\n// 22.1.3.29 Array.prototype.values()\n// 22.1.3.30 Array.prototype[@@iterator]()\nmodule.exports = require('./_iter-define')(Array, 'Array', function(iterated, kind){\n  this._t = toIObject(iterated); // target\n  this._i = 0;                   // next index\n  this._k = kind;                // kind\n// 22.1.5.2.1 %ArrayIteratorPrototype%.next()\n}, function(){\n  var O     = this._t\n    , kind  = this._k\n    , index = this._i++;\n  if(!O || index >= O.length){\n    this._t = undefined;\n    return step(1);\n  }\n  if(kind == 'keys'  )return step(0, index);\n  if(kind == 'values')return step(0, O[index]);\n  return step(0, [index, O[index]]);\n}, 'values');\n\n// argumentsList[@@iterator] is %ArrayProto_values% (9.4.4.6, 9.4.4.7)\nIterators.Arguments = Iterators.Array;\n\naddToUnscopables('keys');\naddToUnscopables('values');\naddToUnscopables('entries');","'use strict';\nvar strong = require('./_collection-strong');\n\n// 23.1 Map Objects\nmodule.exports = require('./_collection')('Map', function(get){\n  return function Map(){ return get(this, arguments.length > 0 ? arguments[0] : undefined); };\n}, {\n  // 23.1.3.6 Map.prototype.get(key)\n  get: function get(key){\n    var entry = strong.getEntry(this, key);\n    return entry && entry.v;\n  },\n  // 23.1.3.9 Map.prototype.set(key, value)\n  set: function set(key, value){\n    return strong.def(this, key === 0 ? 0 : key, value);\n  }\n}, strong, true);","// 19.1.3.1 Object.assign(target, source)\nvar $export = require('./_export');\n\n$export($export.S + $export.F, 'Object', {assign: require('./_object-assign')});","var $export = require('./_export')\r\n// 19.1.2.2 / 15.2.3.5 Object.create(O [, Properties])\r\n$export($export.S, 'Object', {create: require('./_object-create')});","var $export = require('./_export');\r\n// 19.1.2.4 / 15.2.3.6 Object.defineProperty(O, P, Attributes)\r\n$export($export.S + $export.F * !require('./_descriptors'), 'Object', {defineProperty: require('./_object-dp').f});","// 19.1.2.9 Object.getPrototypeOf(O)\nvar toObject        = require('./_to-object')\n  , $getPrototypeOf = require('./_object-gpo');\n\nrequire('./_object-sap')('getPrototypeOf', function(){\n  return function getPrototypeOf(it){\n    return $getPrototypeOf(toObject(it));\n  };\n});","// 19.1.3.19 Object.setPrototypeOf(O, proto)\nvar $export = require('./_export');\n$export($export.S, 'Object', {setPrototypeOf: require('./_set-proto').set});","var $export     = require('./_export')\r\n  , $parseFloat = require('./_parse-float');\r\n// 18.2.4 parseFloat(string)\r\n$export($export.G + $export.F * (parseFloat != $parseFloat), {parseFloat: $parseFloat});","var $export   = require('./_export')\r\n  , $parseInt = require('./_parse-int');\r\n// 18.2.5 parseInt(string, radix)\r\n$export($export.G + $export.F * (parseInt != $parseInt), {parseInt: $parseInt});","'use strict';\nvar strong = require('./_collection-strong');\n\n// 23.2 Set Objects\nmodule.exports = require('./_collection')('Set', function(get){\n  return function Set(){ return get(this, arguments.length > 0 ? arguments[0] : undefined); };\n}, {\n  // 23.2.3.1 Set.prototype.add(value)\n  add: function add(value){\n    return strong.def(this, value = value === 0 ? 0 : value, value);\n  }\n}, strong);","'use strict';\nvar $at  = require('./_string-at')(true);\n\n// 21.1.3.27 String.prototype[@@iterator]()\nrequire('./_iter-define')(String, 'String', function(iterated){\n  this._t = String(iterated); // target\n  this._i = 0;                // next index\n// 21.1.5.2.1 %StringIteratorPrototype%.next()\n}, function(){\n  var O     = this._t\n    , index = this._i\n    , point;\n  if(index >= O.length)return {value: undefined, done: true};\n  point = $at(O, index);\n  this._i += point.length;\n  return {value: point, done: false};\n});","'use strict';\n// ECMAScript 6 symbols shim\nvar global         = require('./_global')\n  , has            = require('./_has')\n  , DESCRIPTORS    = require('./_descriptors')\n  , $export        = require('./_export')\n  , redefine       = require('./_redefine')\n  , META           = require('./_meta').KEY\n  , $fails         = require('./_fails')\n  , shared         = require('./_shared')\n  , setToStringTag = require('./_set-to-string-tag')\n  , uid            = require('./_uid')\n  , wks            = require('./_wks')\n  , wksExt         = require('./_wks-ext')\n  , wksDefine      = require('./_wks-define')\n  , keyOf          = require('./_keyof')\n  , enumKeys       = require('./_enum-keys')\n  , isArray        = require('./_is-array')\n  , anObject       = require('./_an-object')\n  , toIObject      = require('./_to-iobject')\n  , toPrimitive    = require('./_to-primitive')\n  , createDesc     = require('./_property-desc')\n  , _create        = require('./_object-create')\n  , gOPNExt        = require('./_object-gopn-ext')\n  , $GOPD          = require('./_object-gopd')\n  , $DP            = require('./_object-dp')\n  , $keys          = require('./_object-keys')\n  , gOPD           = $GOPD.f\n  , dP             = $DP.f\n  , gOPN           = gOPNExt.f\n  , $Symbol        = global.Symbol\n  , $JSON          = global.JSON\n  , _stringify     = $JSON && $JSON.stringify\n  , PROTOTYPE      = 'prototype'\n  , HIDDEN         = wks('_hidden')\n  , TO_PRIMITIVE   = wks('toPrimitive')\n  , isEnum         = {}.propertyIsEnumerable\n  , SymbolRegistry = shared('symbol-registry')\n  , AllSymbols     = shared('symbols')\n  , OPSymbols      = shared('op-symbols')\n  , ObjectProto    = Object[PROTOTYPE]\n  , USE_NATIVE     = typeof $Symbol == 'function'\n  , QObject        = global.QObject;\n// Don't use setters in Qt Script, https://github.com/zloirock/core-js/issues/173\nvar setter = !QObject || !QObject[PROTOTYPE] || !QObject[PROTOTYPE].findChild;\n\n// fallback for old Android, https://code.google.com/p/v8/issues/detail?id=687\nvar setSymbolDesc = DESCRIPTORS && $fails(function(){\n  return _create(dP({}, 'a', {\n    get: function(){ return dP(this, 'a', {value: 7}).a; }\n  })).a != 7;\n}) ? function(it, key, D){\n  var protoDesc = gOPD(ObjectProto, key);\n  if(protoDesc)delete ObjectProto[key];\n  dP(it, key, D);\n  if(protoDesc && it !== ObjectProto)dP(ObjectProto, key, protoDesc);\n} : dP;\n\nvar wrap = function(tag){\n  var sym = AllSymbols[tag] = _create($Symbol[PROTOTYPE]);\n  sym._k = tag;\n  return sym;\n};\n\nvar isSymbol = USE_NATIVE && typeof $Symbol.iterator == 'symbol' ? function(it){\n  return typeof it == 'symbol';\n} : function(it){\n  return it instanceof $Symbol;\n};\n\nvar $defineProperty = function defineProperty(it, key, D){\n  if(it === ObjectProto)$defineProperty(OPSymbols, key, D);\n  anObject(it);\n  key = toPrimitive(key, true);\n  anObject(D);\n  if(has(AllSymbols, key)){\n    if(!D.enumerable){\n      if(!has(it, HIDDEN))dP(it, HIDDEN, createDesc(1, {}));\n      it[HIDDEN][key] = true;\n    } else {\n      if(has(it, HIDDEN) && it[HIDDEN][key])it[HIDDEN][key] = false;\n      D = _create(D, {enumerable: createDesc(0, false)});\n    } return setSymbolDesc(it, key, D);\n  } return dP(it, key, D);\n};\nvar $defineProperties = function defineProperties(it, P){\n  anObject(it);\n  var keys = enumKeys(P = toIObject(P))\n    , i    = 0\n    , l = keys.length\n    , key;\n  while(l > i)$defineProperty(it, key = keys[i++], P[key]);\n  return it;\n};\nvar $create = function create(it, P){\n  return P === undefined ? _create(it) : $defineProperties(_create(it), P);\n};\nvar $propertyIsEnumerable = function propertyIsEnumerable(key){\n  var E = isEnum.call(this, key = toPrimitive(key, true));\n  if(this === ObjectProto && has(AllSymbols, key) && !has(OPSymbols, key))return false;\n  return E || !has(this, key) || !has(AllSymbols, key) || has(this, HIDDEN) && this[HIDDEN][key] ? E : true;\n};\nvar $getOwnPropertyDescriptor = function getOwnPropertyDescriptor(it, key){\n  it  = toIObject(it);\n  key = toPrimitive(key, true);\n  if(it === ObjectProto && has(AllSymbols, key) && !has(OPSymbols, key))return;\n  var D = gOPD(it, key);\n  if(D && has(AllSymbols, key) && !(has(it, HIDDEN) && it[HIDDEN][key]))D.enumerable = true;\n  return D;\n};\nvar $getOwnPropertyNames = function getOwnPropertyNames(it){\n  var names  = gOPN(toIObject(it))\n    , result = []\n    , i      = 0\n    , key;\n  while(names.length > i){\n    if(!has(AllSymbols, key = names[i++]) && key != HIDDEN && key != META)result.push(key);\n  } return result;\n};\nvar $getOwnPropertySymbols = function getOwnPropertySymbols(it){\n  var IS_OP  = it === ObjectProto\n    , names  = gOPN(IS_OP ? OPSymbols : toIObject(it))\n    , result = []\n    , i      = 0\n    , key;\n  while(names.length > i){\n    if(has(AllSymbols, key = names[i++]) && (IS_OP ? has(ObjectProto, key) : true))result.push(AllSymbols[key]);\n  } return result;\n};\n\n// 19.4.1.1 Symbol([description])\nif(!USE_NATIVE){\n  $Symbol = function Symbol(){\n    if(this instanceof $Symbol)throw TypeError('Symbol is not a constructor!');\n    var tag = uid(arguments.length > 0 ? arguments[0] : undefined);\n    var $set = function(value){\n      if(this === ObjectProto)$set.call(OPSymbols, value);\n      if(has(this, HIDDEN) && has(this[HIDDEN], tag))this[HIDDEN][tag] = false;\n      setSymbolDesc(this, tag, createDesc(1, value));\n    };\n    if(DESCRIPTORS && setter)setSymbolDesc(ObjectProto, tag, {configurable: true, set: $set});\n    return wrap(tag);\n  };\n  redefine($Symbol[PROTOTYPE], 'toString', function toString(){\n    return this._k;\n  });\n\n  $GOPD.f = $getOwnPropertyDescriptor;\n  $DP.f   = $defineProperty;\n  require('./_object-gopn').f = gOPNExt.f = $getOwnPropertyNames;\n  require('./_object-pie').f  = $propertyIsEnumerable;\n  require('./_object-gops').f = $getOwnPropertySymbols;\n\n  if(DESCRIPTORS && !require('./_library')){\n    redefine(ObjectProto, 'propertyIsEnumerable', $propertyIsEnumerable, true);\n  }\n\n  wksExt.f = function(name){\n    return wrap(wks(name));\n  }\n}\n\n$export($export.G + $export.W + $export.F * !USE_NATIVE, {Symbol: $Symbol});\n\nfor(var symbols = (\n  // 19.4.2.2, 19.4.2.3, 19.4.2.4, 19.4.2.6, 19.4.2.8, 19.4.2.9, 19.4.2.10, 19.4.2.11, 19.4.2.12, 19.4.2.13, 19.4.2.14\n  'hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables'\n).split(','), i = 0; symbols.length > i; )wks(symbols[i++]);\n\nfor(var symbols = $keys(wks.store), i = 0; symbols.length > i; )wksDefine(symbols[i++]);\n\n$export($export.S + $export.F * !USE_NATIVE, 'Symbol', {\n  // 19.4.2.1 Symbol.for(key)\n  'for': function(key){\n    return has(SymbolRegistry, key += '')\n      ? SymbolRegistry[key]\n      : SymbolRegistry[key] = $Symbol(key);\n  },\n  // 19.4.2.5 Symbol.keyFor(sym)\n  keyFor: function keyFor(key){\n    if(isSymbol(key))return keyOf(SymbolRegistry, key);\n    throw TypeError(key + ' is not a symbol!');\n  },\n  useSetter: function(){ setter = true; },\n  useSimple: function(){ setter = false; }\n});\n\n$export($export.S + $export.F * !USE_NATIVE, 'Object', {\n  // 19.1.2.2 Object.create(O [, Properties])\n  create: $create,\n  // 19.1.2.4 Object.defineProperty(O, P, Attributes)\n  defineProperty: $defineProperty,\n  // 19.1.2.3 Object.defineProperties(O, Properties)\n  defineProperties: $defineProperties,\n  // 19.1.2.6 Object.getOwnPropertyDescriptor(O, P)\n  getOwnPropertyDescriptor: $getOwnPropertyDescriptor,\n  // 19.1.2.7 Object.getOwnPropertyNames(O)\n  getOwnPropertyNames: $getOwnPropertyNames,\n  // 19.1.2.8 Object.getOwnPropertySymbols(O)\n  getOwnPropertySymbols: $getOwnPropertySymbols\n});\n\n// 24.3.2 JSON.stringify(value [, replacer [, space]])\n$JSON && $export($export.S + $export.F * (!USE_NATIVE || $fails(function(){\n  var S = $Symbol();\n  // MS Edge converts symbol values to JSON as {}\n  // WebKit converts symbol values to JSON as null\n  // V8 throws on boxed symbols\n  return _stringify([S]) != '[null]' || _stringify({a: S}) != '{}' || _stringify(Object(S)) != '{}';\n})), 'JSON', {\n  stringify: function stringify(it){\n    if(it === undefined || isSymbol(it))return; // IE8 returns string on undefined\n    var args = [it]\n      , i    = 1\n      , replacer, $replacer;\n    while(arguments.length > i)args.push(arguments[i++]);\n    replacer = args[1];\n    if(typeof replacer == 'function')$replacer = replacer;\n    if($replacer || !isArray(replacer))replacer = function(key, value){\n      if($replacer)value = $replacer.call(this, key, value);\n      if(!isSymbol(value))return value;\n    };\n    args[1] = replacer;\n    return _stringify.apply($JSON, args);\n  }\n});\n\n// 19.4.3.4 Symbol.prototype[@@toPrimitive](hint)\n$Symbol[PROTOTYPE][TO_PRIMITIVE] || require('./_hide')($Symbol[PROTOTYPE], TO_PRIMITIVE, $Symbol[PROTOTYPE].valueOf);\n// 19.4.3.5 Symbol.prototype[@@toStringTag]\nsetToStringTag($Symbol, 'Symbol');\n// 20.2.1.9 Math[@@toStringTag]\nsetToStringTag(Math, 'Math', true);\n// 24.3.3 JSON[@@toStringTag]\nsetToStringTag(global.JSON, 'JSON', true);","// https://github.com/DavidBruant/Map-Set.prototype.toJSON\nvar $export  = require('./_export');\n\n$export($export.P + $export.R, 'Map', {toJSON: require('./_collection-to-json')('Map')});","// https://github.com/DavidBruant/Map-Set.prototype.toJSON\nvar $export  = require('./_export');\n\n$export($export.P + $export.R, 'Set', {toJSON: require('./_collection-to-json')('Set')});","require('./_wks-define')('asyncIterator');","require('./_wks-define')('observable');","require('./es6.array.iterator');\nvar global        = require('./_global')\n  , hide          = require('./_hide')\n  , Iterators     = require('./_iterators')\n  , TO_STRING_TAG = require('./_wks')('toStringTag');\n\nfor(var collections = ['NodeList', 'DOMTokenList', 'MediaList', 'StyleSheetList', 'CSSRuleList'], i = 0; i < 5; i++){\n  var NAME       = collections[i]\n    , Collection = global[NAME]\n    , proto      = Collection && Collection.prototype;\n  if(proto && !proto[TO_STRING_TAG])hide(proto, TO_STRING_TAG, NAME);\n  Iterators[NAME] = Iterators.Array;\n}","// Polyfill for creating CustomEvents on IE9/10/11\n\n// code pulled from:\n// https://github.com/d4tocchini/customevent-polyfill\n// https://developer.mozilla.org/en-US/docs/Web/API/CustomEvent#Polyfill\n\n(function() {\n  if (typeof window === 'undefined') {\n    return;\n  }\n\n  try {\n    var ce = new window.CustomEvent('test', { cancelable: true });\n    ce.preventDefault();\n    if (ce.defaultPrevented !== true) {\n      // IE has problems with .preventDefault() on custom events\n      // http://stackoverflow.com/questions/23349191\n      throw new Error('Could not prevent default');\n    }\n  } catch (e) {\n    var CustomEvent = function(event, params) {\n      var evt, origPrevent;\n      params = params || {\n        bubbles: false,\n        cancelable: false,\n        detail: undefined\n      };\n\n      evt = document.createEvent('CustomEvent');\n      evt.initCustomEvent(\n        event,\n        params.bubbles,\n        params.cancelable,\n        params.detail\n      );\n      origPrevent = evt.preventDefault;\n      evt.preventDefault = function() {\n        origPrevent.call(this);\n        try {\n          Object.defineProperty(this, 'defaultPrevented', {\n            get: function() {\n              return true;\n            }\n          });\n        } catch (e) {\n          this.defaultPrevented = true;\n        }\n      };\n      return evt;\n    };\n\n    CustomEvent.prototype = window.Event.prototype;\n    window.CustomEvent = CustomEvent; // expose definition to window\n  }\n})();\n","import { addUrlHashParameter,\r\n    calcBorderWidth,\r\n    mergeObjects,\r\n    addUrlParameter,\r\n    getUrlHashParameterValue,\r\n    removeUrlHashParameter,\r\n    removeUrlParameter,\r\n    setCSSStyle\r\n} from './Helpers';\r\n\r\nwindow.Eventgallery = window.Eventgallery || {};\r\n\r\nEventgallery.jQuery = eventgallery.jQuery;\r\n\r\nEventgallery.Tools = {};\r\nEventgallery.Tools.mergeObjects = mergeObjects;\r\nEventgallery.Tools.calcBorderWidth = calcBorderWidth;\r\nEventgallery.Tools.addUrlHashParameter = addUrlHashParameter;\r\nEventgallery.Tools.getUrlHashParameterValue = getUrlHashParameterValue;\r\nEventgallery.Tools.removeUrlHashParameter = removeUrlHashParameter;\r\nEventgallery.Tools.addUrlParameter = addUrlParameter;\r\nEventgallery.Tools.removeUrlParameter = removeUrlParameter;\r\nEventgallery.Tools.setCSSStyle = setCSSStyle;\r\n","function removeElement(array, elm) {\r\n    const index = array.indexOf(elm);\r\n    if (index > -1) {\r\n        array.splice(index, 1);\r\n    }\r\n}\r\n\r\nfunction mergeObjects(defaults, options) {\r\n    if (options === null || defaults === null) {\r\n        return defaults;\r\n    }\r\n\r\n    for (let key in options) {\r\n        defaults[key] = options[key];\r\n    }\r\n\r\n    return defaults;\r\n}\r\n\r\n/**\r\n * calculates the border of the given elements with the given properties\r\n */\r\nfunction calcBorderWidth(elements, properties) {\r\n    let sum = 0;\r\n\r\n    for (let i=0; i<elements.length; i++) {\r\n        for (let j=0; j<properties.length; j++) {\r\n            let value = parseFloat( elements[i].css(properties[j]) );\r\n            if (!isNaN(value)) {\r\n                sum += value;\r\n            }\r\n        }\r\n    }\r\n\r\n    return sum;\r\n}\r\n\r\nfunction addUrlHashParameter(initialUrl, key, value) {\r\n    let url = removeUrlHashParameter(initialUrl, key),\r\n        fragments = url.split('#'),\r\n        urlpart = fragments[0],\r\n        hashparts = fragments.length>1? fragments[1].split(\"&\") : [],\r\n        result;\r\n\r\n    hashparts.push(encodeURIComponent(key) + \"=\" + encodeURIComponent(value));\r\n\r\n    if (hashparts.length>0) {\r\n        result = urlpart + '#' + hashparts.join('&');\r\n    } else {\r\n        result = urlpart;\r\n    }\r\n\r\n    return result;\r\n}\r\n\r\nfunction getUrlHashParameterValue(url, key) {\r\n    let fragments=url.split('#'),\r\n        hashparts = fragments.length>1? fragments[1].split(\"&\") : [],\r\n        result;\r\n\r\n    if (hashparts.length>0)\r\n    {\r\n        let prefix= encodeURIComponent(key)+'=';\r\n\r\n        for (let i=0; i<hashparts.length; i++) {\r\n            if (hashparts[i].indexOf(prefix, 0) === 0) {\r\n                result = hashparts[i].replace(prefix, '');\r\n            }\r\n        }\r\n    }\r\n\r\n    return result;\r\n}\r\n\r\nfunction removeUrlHashParameter(url, key) {\r\n    let fragments=url.split('#'),\r\n        urlpart= fragments[0],\r\n        hashparts = fragments.length>1? fragments[1].split(\"&\") : [],\r\n        result;\r\n\r\n    if (hashparts.length>0)\r\n    {\r\n        let prefix= encodeURIComponent(key)+'=',\r\n            newHashParts = [];\r\n\r\n        for (let i=0; i<hashparts.length; i++) {\r\n            if (hashparts[i].indexOf(prefix, 0) === 0) {\r\n\r\n            } else {\r\n                newHashParts.push(hashparts[i]);\r\n            }\r\n        }\r\n        hashparts = newHashParts;\r\n    }\r\n\r\n    if (hashparts.length>0) {\r\n        result = urlpart + '#' + hashparts.join('&');\r\n    } else {\r\n        result = urlpart;\r\n    }\r\n\r\n    return result;\r\n}\r\n\r\nfunction addUrlParameter(initialUrl, key, value) {\r\n    let url = removeUrlParameter(initialUrl, key),\r\n        fragments = url.split('#'),\r\n        urlparts= fragments[0].split('?'),\r\n        result;\r\n\r\n    if (urlparts.length === 1) {\r\n        result = urlparts[0] + '?' + encodeURIComponent(key) + \"=\" + encodeURIComponent(value);\r\n    } else {\r\n        result = urlparts.join('?') + '&' + encodeURIComponent(key) + \"=\" + encodeURIComponent(value);\r\n    }\r\n\r\n    if (fragments.length>1) {\r\n        return result + '#' + fragments[1];\r\n    }\r\n\r\n    return result;\r\n}\r\n\r\nfunction removeUrlParameter(url, key) {\r\n    let fragments=url.split('#'),\r\n        urlparts= fragments[0].split('?'),\r\n        result;\r\n\r\n    if (urlparts.length>1)\r\n    {\r\n        let prefix= encodeURIComponent(key)+'=';\r\n        let pars= urlparts[1].split('&');\r\n\r\n        for (let i=0; i<pars.length; i++) {\r\n            if (pars[i].indexOf(prefix, 0) === 0) {\r\n                pars.splice(i, 1);\r\n            }\r\n        }\r\n        if (pars.length > 0) {\r\n            result = urlparts[0] + '?' + pars.join('&');\r\n        }\r\n        else {\r\n            result = urlparts[0];\r\n        }\r\n    }\r\n    else {\r\n        result =  urlparts[0];\r\n    }\r\n\r\n    if (fragments.length>1) {\r\n        return result + '#' + fragments[1];\r\n    }\r\n\r\n    return result;\r\n}\r\n\r\nfunction setCSSStyle (nodes, style, value) {\r\n    for (let i=0; i<nodes.length; i++) {\r\n        nodes[i].style[style] = value;\r\n    }\r\n}\r\n\r\nexport { removeElement, addUrlHashParameter, calcBorderWidth, mergeObjects, addUrlParameter, getUrlHashParameterValue, removeUrlHashParameter, removeUrlParameter, setCSSStyle };","//import \"@babel/polyfill\";\r\nimport \"custom-event-polyfill\";\r\n\r\n\r\nrequire('./common/js/EventgalleryTools.js');\r\n\r\nrequire('./frontend/js/EventgalleryCart.js');\r\nrequire('./frontend/js/EventgalleryBehavior.js');\r\nrequire('./frontend/js/EventgalleryImage.js');\r\nrequire('./frontend/js/EventgalleryRow.js');\r\nrequire('./frontend/js/EventgalleryImageList.js');\r\nrequire('./frontend/js/EventgalleryCart.js');\r\nrequire('./frontend/js/EventgalleryEventsList.js');\r\nrequire('./frontend/js/EventgalleryEventsTiles.js');\r\nrequire('./frontend/js/EventgalleryJSGallery2.js');\r\nrequire('./frontend/js/EventgalleryLazyload.js');\r\nrequire('./frontend/js/EventgallerySizeCalculator.js');\r\nrequire('./frontend/js/EventgallerySocialShareButton.js');\r\nrequire('./frontend/js/EventgallerySquareList.js');\r\nrequire('./frontend/js/EventgalleryTilesCollection.js');\r\nrequire('./frontend/js/EventgalleryTouch.js');\r\nrequire('./frontend/js/EventgalleryGooglePhotosProcessor.js');\r\n\r\nrequire('./frontend/js/Modules.js');\r\n\r\nrequire('./frontend/js/PhotoSwipeGallery.js');\r\nrequire('./frontend/js/PhotoSwipeGallerySlide.js');\r\n\r\nrequire('./frontend/less/eventgallery.less');\r\nrequire('./frontend/less/font-awesome/font-awesome.less');\r\n\r\nrequire(\"./photoswipe/photoswipe.css\");\r\nrequire(\"./photoswipe/default-skin/default-skin.css\");\r\n\r\n\r\n\r\n// Required Core Stylesheet\r\nimport \"@glidejs/glide/src/assets/sass/glide.core.scss\";\r\nimport \"./frontend/sass/glide/glide.theme.scss\";\r\n\r\n\r\n\r\n","import PhotoSwipeGallery from \"./PhotoSwipeGallery\";\r\nimport Overlay from \"./Overlay\";\r\nimport SliderStarter from \"./slider/SliderStarter\";\r\nimport Polyfill from \"./Polyfill\";\r\n\r\n(function(Eventgallery, jQuery){\r\n\t\"use strict\";\r\n    jQuery( document ).ready(function() {\r\n\r\n\t\t/*\r\n\t\t* GRID LIST OF EVENTS\r\n\t\t*/\r\n\r\n        jQuery('.eventgallery-events-gridlist').each(function(index, container){\r\n        \tvar $container = jQuery(container);\r\n\t    \tvar $thumbnails = $container.find('.event-thumbnails .event-thumbnail');\r\n\r\n\t        var options = {\r\n\t            rowHeightPercentage: 100,\r\n\t            imagesetContainer: $container.find('.event-thumbnails').first(),\r\n\t            imageset: $thumbnails,\r\n\t            lazyloader: null,\r\n\t            initComplete: function () {\r\n\t                var lazyLoadOptions = {container: container};\r\n                    options.eventgalleryLazyloader = new Eventgallery.Lazyload(lazyLoadOptions);\r\n\t            },\r\n\t            resizeStart: function () {\r\n\t                $container.find('.event-thumbnails .event-thumbnail img.eventgallery-lazyme').removeClass('eventgallery-lazyload-loaded').addClass('eventgallery-lazyload-loading');\r\n\t            },\r\n\t            resizeComplete: function () {\r\n\t                options.eventgalleryLazyloader.initialize();\r\n\t                jQuery(window).trigger('scroll');\r\n\t            }\r\n\t        };\r\n\r\n\t        // initialize the imagelist\r\n\r\n\t        if ($thumbnails.length>0) {\r\n\t        \tnew Eventgallery.EventsList(options);\r\n\t        }\r\n        });\r\n\r\n\r\n\t\t/*\r\n\t\t* TILE LIST OF EVENTS\r\n\t\t*/\r\n\r\n\t    jQuery('.eventgallery-events-tiles-list').each(function(index, container){\r\n\t    \tvar $container = jQuery(container);\r\n\r\n\t        var options = {\r\n\t            imagesetContainer: $container.find('.event-thumbnails').first(),\r\n\t            imageset: $container.find('.event-thumbnail'),\r\n\t            eventgalleryTilesCollection: null,\r\n\t            eventgalleryLazyloader: null,\r\n\t            initComplete: function () {\r\n\t                var lazyLoadOptions = {container: container};\r\n                    options.eventgalleryLazyloader = new Eventgallery.Lazyload(lazyLoadOptions);\r\n\r\n\t                var tilesOptions = {\r\n\t                    tiles: $container.find('.eventgallery-tiles .eventgallery-tile'),\r\n\t                    tilesContainer: $container.find('.eventgallery-tiles')\r\n\t                };\r\n\t                options.eventgalleryTilesCollection = new Eventgallery.TilesCollection(tilesOptions);\r\n\t                options.eventgalleryTilesCollection.calculate();\r\n\t                // we need to recalculate the whole thing because it might happen that a font loads\r\n\t                // and the size of a tile changes.\r\n\t                jQuery(window).load( function(){\r\n\t                    options.eventgalleryTilesCollection.calculate();\r\n\t                });\r\n\r\n\t            },\r\n\t            resizeStart: function () {\r\n\t                $container.find('.event-thumbnails .event-thumbnail img.eventgallery-lazyme').removeClass('eventgallery-lazyload-loaded').addClass('eventgallery-lazyload-loading');\r\n\t            },\r\n\t            resizeComplete: function () {\r\n\t                options.eventgalleryLazyloader.initialize();\r\n\t                options.eventgalleryTilesCollection.calculate();\r\n\t                jQuery(window).trigger('scroll');\r\n\t            }\r\n\t        };\r\n\r\n\t        // initialize the imagelist\r\n\t        new Eventgallery.EventsTiles(options);\r\n\r\n\t    });\r\n\r\n\t\t/*\r\n\t\t* TILES LIST OF IMAGES\r\n\t\t*/\r\n\r\n\t    jQuery('.eventgallery-event-tiles-list').each(function(index, container){\r\n\t    \tvar $container = jQuery(container);\r\n\t        var options = {\r\n\t            imagesetContainer: $container.find('.event-thumbnails').first(),\r\n\t            imageset: $container.find('.event-thumbnail'),\r\n\t            adjustMode: 'width',\r\n\t            eventgalleryLazyloader: null,\r\n\t            eventgalleryTilesCollection: null,\r\n\t            initComplete: function () {\r\n\t                var lazyLoadOptions = {container: container};\r\n\t                var tilesOptions = {\r\n\t                    tiles: $container.find('.eventgallery-tiles .eventgallery-tile'),\r\n\t                    tilesContainer: $container.find('.eventgallery-tiles')\r\n\t                };\r\n\r\n                    options.eventgalleryTilesCollection = new Eventgallery.TilesCollection(tilesOptions);\r\n                    options.eventgalleryTilesCollection.calculate();\r\n                    options.eventgalleryLazyloader = new Eventgallery.Lazyload(lazyLoadOptions);\r\n\r\n\t                // we need to recalculate the whole thing because it might happen that a font loads\r\n\t                // and the size of a tile changes.\r\n\t                jQuery(window).load( function(){\r\n\t                    options.eventgalleryTilesCollection.calculate();\r\n                        options.eventgalleryLazyloader = new Eventgallery.Lazyload(lazyLoadOptions);\r\n\t                });\r\n\r\n\t            },\r\n\t            resizeStart: function () {\r\n\t                $container.find('.event-thumbnails .event-thumbnail img.eventgallery-lazyme').removeClass('eventgallery-lazyload-loaded').addClass('eventgallery-lazyload-loading');\r\n\t            },\r\n\t            resizeComplete: function () {\r\n\t                options.eventgalleryLazyloader.initialize();\r\n\t                options.eventgalleryTilesCollection.calculate();\r\n\t                jQuery(window).trigger('scroll');\r\n\t            }\r\n\t        };\r\n\r\n\t        // initialize the imagelist\r\n\t        new Eventgallery.EventsTiles(options);\r\n    \t});\r\n\r\n\t\t/*\r\n\t\t* SIMPLE IMAGE LIST\r\n\t\t*/\r\n\t\tjQuery('.eventgallery-event-gridlist').each(function(index, container){\r\n\t\t\tvar $container = jQuery(container);\r\n\t\t\tvar options = {\r\n                imagesetContainer: $container.find('.event-thumbnails').first(),\r\n                imageset: $container.find('.event-thumbnail'),\r\n                adjustMode: 'height',\r\n            \teventgalleryLazyloader: null,\r\n                initComplete: function () {\r\n                \tvar lazyLoadOptions = {container: container};\r\n                    var gridOptions = {\r\n                        tiles: $container.find('.eventgallery-simplelist .eventgallery-simplelist-tile'),\r\n                        tilesContainer: $container.find('.eventgallery-simplelist'),\r\n                        thumbSelector: '.event-thumbnail',\r\n                        thumbContainerSelector: '.event-thumbnails'\r\n                    };\r\n\r\n                    options.eventgalleryLazyloader = new Eventgallery.Lazyload(lazyLoadOptions);\r\n                    // we need to recalculate the whole thing because it might happen that a font loads\r\n                    // and the size of a tile changes.\r\n                    jQuery(window).load( function(){\r\n\r\n                        options.eventgalleryLazyloader = new Eventgallery.Lazyload(lazyLoadOptions);\r\n                    });\r\n\r\n                },\r\n                resizeStart: function () {\r\n                    $container.find('.event-thumbnails .event-thumbnail img.eventgallery-lazyme').removeClass('eventgallery-lazyload-loaded').addClass('eventgallery-lazyload-loading');\r\n                },\r\n                resizeComplete: function () {\r\n                    options.eventgalleryLazyloader.initialize();\r\n                    jQuery(window).trigger('scroll');\r\n                }\r\n            };\r\n\r\n            // initialize the imagelist\r\n            new Eventgallery.EventsTiles(options);\r\n\t\t});\r\n\r\n\t\t/*\r\n\t\t* IMAGE LIST\r\n\t\t*/\r\n\r\n        jQuery('.eventgallery-imagelist').each(function(index, imagesetContainer){\r\n\t\t\tvar $imagesetContainer = jQuery(imagesetContainer);\r\n            var options = {\r\n                rowHeight: $imagesetContainer.data('rowheight'),\r\n                rowHeightJitter: $imagesetContainer.data('rowheightjitter'),\r\n                firstImageRowHeight: $imagesetContainer.data('firstimagerowheight'),\r\n                doFillLastRow: $imagesetContainer.data('dofilllastrow') === true,\r\n                imagesetContainer: imagesetContainer,\r\n                imageset: $imagesetContainer.find('.thumbnail'),\r\n                eventgalleryLazyloader: null,\r\n\r\n                initComplete: function () {\r\n                \tvar lazyLoadOptions = {container: imagesetContainer};\r\n                    options.eventgalleryLazyloader = new Eventgallery.Lazyload(lazyLoadOptions);\r\n                },\r\n                resizeStart: function () {\r\n                    $imagesetContainer.find('.thumbnail img.eventgallery-lazyme').removeClass('eventgallery-lazyload-loaded').addClass('eventgallery-lazyload-loading');\r\n                },\r\n                resizeComplete: function () {\r\n                    options.eventgalleryLazyloader.initialize();\r\n                    jQuery(window).trigger('scroll');\r\n                }\r\n            };\r\n\r\n            // initialize the imagelist\r\n            new Eventgallery.Imagelist(options);\r\n        });\r\n\r\n\t\t/*\r\n\t\t * SQUARE SIZED LIST OF IMAGES\r\n\t\t */\r\n\r\n\t\tjQuery('.eventgallery-event-square-list').each(function(index, container){\r\n\t\t\tvar $container = jQuery(container);\r\n\t\t\tvar options = {\r\n\t\t\t\timagesetContainer: $container.find('.event-thumbnails').first(),\r\n\t\t\t\timageset: $container.find('.event-thumbnail'),\r\n\t\t\t\tadjustMode: 'width',\r\n\t\t\t\teventgalleryLazyloader: null,\r\n\t\t\t\tinitComplete: function () {\r\n\t\t\t\t\tvar lazyLoadOptions = {container: container};\r\n\t\t\t\t\toptions.eventgalleryLazyloader = new Eventgallery.Lazyload(lazyLoadOptions);\r\n\r\n\t\t\t\t},\r\n\t\t\t\tresizeStart: function () {\r\n\t\t\t\t\t$container.find('.event-thumbnails .event-thumbnail img.eventgallery-lazyme').removeClass('eventgallery-lazyload-loaded').addClass('eventgallery-lazyload-loading');\r\n\t\t\t\t},\r\n\t\t\t\tresizeComplete: function () {\r\n\t\t\t\t\toptions.eventgalleryLazyloader.initialize();\r\n\t\t\t\t\tjQuery(window).trigger('scroll');\r\n\t\t\t\t}\r\n\t\t\t};\r\n\r\n\t\t\t// initialize the imagelist\r\n\t\t\tnew Eventgallery.SquareList(options);\r\n\t\t});\r\n\r\n\r\n\t\t/**\r\n\t\t * sets the radio button if one clicks in a table row.\r\n\t\t */\r\n\t\tjQuery('.eventgallery-imagetype-selection-row').click(function(e){\r\n\t\t\tvar $target = jQuery(e.target);\r\n\t\t\t$target.closest('tr').find('input').prop(\"checked\", true);\r\n\t\t});\r\n\r\n\t\tjQuery( document ).on('touchend click', '.eventgallery-cart-connector', function(e) {\r\n\t\t\te.preventDefault();\r\n\t\t\te.stopPropagation();\r\n\t\t\tvar link = jQuery(e.target);\r\n\r\n\t\t\tif (!link.attr('data-href')) {\r\n\t\t\t\tlink = link.parent('SPAN');\r\n\t\t\t}\r\n\r\n\t\t\twindow.location.href = link.attr('data-href');\r\n\t\t});\r\n\r\n        /**\r\n\t\t * Lightbox init\r\n         * @type {PhotoSwipeGallery}\r\n         */\r\n        Eventgallery.lightbox = new PhotoSwipeGallery();\r\n        Eventgallery.lightbox.initPhotoSwipe();\r\n\r\n        /**\r\n\t\t * Single Image Page\r\n         */\r\n        jQuery('.singleimage-zoom').click(function(e){\r\n            e.preventDefault();\r\n            jQuery('#bigimagelink').click();\r\n        });\r\n\r\n        /**\r\n\t\t * content overlay\r\n         */\r\n        jQuery('a[data-eventgallery-overlay]').each(function(item){\r\n        \tlet contentId = this.getAttribute('href');\r\n        \tjQuery(this).click(function(e){\r\n                let overlay = new Overlay();\r\n\r\n                overlay.openOverlay(document.getElementById(contentId.replace(\"#\",\"\")).innerHTML);\r\n            })\r\n        });\r\n\r\n        if (window.EventGalleryLightboxConfiguration && window.EventGalleryLightboxConfiguration.doPreventRightClick) {\r\n            jQuery(document).on(\"contextmenu\", 'a[data-eg-lightbox] img, img.pswp__img', function(){\r\n                return false;\r\n            });\r\n        }\r\n\r\n        let googlePhotosProcessor = new Eventgallery.GooglePhotosProcessor();\r\n        document.dispatchEvent(Polyfill.createNewEvent('eventgallery-images-added'));\r\n\r\n\r\n        let sliderElements = document.querySelectorAll('div[data-slider=\"1\"]');\r\n\r\n\r\n        for(let i=0; i<sliderElements.length; i++) {\r\n            let sliderStarter = new SliderStarter(sliderElements[i]);\r\n            let timer = null;\r\n            sliderStarter.start();\r\n\r\n            window.addEventListener(\"resize\", () => {\r\n            \tif (timer != null) {\r\n            \t\tclearTimeout(timer);\r\n\t\t\t\t}\r\n            \ttimer = setTimeout(() => sliderStarter.start(), 1000);\r\n            }, false);\r\n        }\r\n\r\n\r\n\r\n    }); //end domready\r\n})(Eventgallery, Eventgallery.jQuery);\r\n\r\n","import Overlay from \"./Overlay\";\r\nimport Polyfill from \"./Polyfill\";\r\n\r\n(function(Eventgallery, jQuery){\r\n\r\n\r\n    Eventgallery.Cart = function(newOptions) {\r\n        this.cart = [];\r\n        this.isMultiline = false;\r\n        this.options = {\r\n            buttonShowType: 'block',\r\n            emptyCartSelector: '.eventgallery-cart-empty',\r\n            cartSelector: '.eventgallery-ajaxcart',\r\n            cartItemContainerSelector: '.cart-items-container',\r\n            cartItemsSelector: '.eventgallery-ajaxcart .cart-items',\r\n            cartItemSelector: '.eventgallery-ajaxcart .cart-items .cart-item',\r\n            cartCountSelector: '.itemscount',\r\n            buttonDownSelector: '.toggle-down',\r\n            buttonUpSelector: '.toggle-up',\r\n            cartItemsMinHeight: null,\r\n            removeUrl: \"\",\r\n            add2cartUrl: \"\",\r\n            getCartUrl: \"\",\r\n            removeLinkTitle: \"Remove\"\r\n        };\r\n        this.options = Eventgallery.Tools.mergeObjects(this.options, newOptions);\r\n        this.initialize();\r\n    };\r\n\r\n    Eventgallery.Cart.prototype.slideUp = function() {\r\n        jQuery(this.options.cartItemContainerSelector).animate({height: this.options.cartItemsMinHeight});\r\n        jQuery(this.options.buttonUpSelector).css('display', 'none');\r\n        if (this.isMultiline) {\r\n            jQuery(this.options.buttonDownSelector).css('display', this.options.buttonShowType);\r\n        } else {\r\n            jQuery(this.options.buttonDownSelector).css('display', 'none');\r\n        }\r\n    };\r\n\r\n    Eventgallery.Cart.prototype.slideDown = function() {\r\n        jQuery(this.options.cartItemContainerSelector).animate({height: jQuery(this.options.cartItemsSelector).height()});\r\n        jQuery(this.options.buttonDownSelector).css('display', 'none');\r\n        jQuery(this.options.buttonUpSelector).css('display', this.options.buttonShowType);\r\n    };\r\n\r\n    Eventgallery.Cart.prototype.initialize = function() {\r\n\r\n        jQuery(this.options.buttonDownSelector).click(jQuery.proxy(function (event) {\r\n            event.preventDefault();\r\n            this.slideDown();\r\n        }, this));\r\n\r\n        jQuery(this.options.buttonUpSelector).click(jQuery.proxy(function (event) {\r\n            event.preventDefault();\r\n            this.slideUp();\r\n        }, this));\r\n\r\n        let $document = jQuery( document );\r\n\r\n        $document.off('change', '.eventgallery-cartquantity');\r\n        $document.on ('change', '.eventgallery-cartquantity', jQuery.proxy(this.updateQuantity, this));\r\n\r\n\r\n        $document.off('click', '.eventgallery-openAdd2cart');\r\n        $document.on ('click', '.eventgallery-openAdd2cart', jQuery.proxy(this.openOverlay, this));\r\n\r\n        $document.off('touchend click', '.eventgallery-opencart');\r\n        $document.on ('touchend click', '.eventgallery-opencart', jQuery.proxy(this.openCart, this));\r\n\r\n        $document.off('touchend click', '.eventgallery-qtyplus');\r\n        $document.on ('touchend click', '.eventgallery-qtyplus', jQuery.proxy(this.quantityPlus, this));\r\n\r\n        $document.off('touchend click', '.eventgallery-qtyminus');\r\n        $document.on ('touchend click', '.eventgallery-qtyminus', jQuery.proxy(this.quantityMinus, this));\r\n\r\n        $document.off('touchend click', '.eventgallery-removeFromCart');\r\n        $document.on ('touchend click', '.eventgallery-removeFromCart', jQuery.proxy(this.removeFromCart, this));\r\n\r\n        $document.on('updatecartlinks', jQuery.proxy(function (event) {\r\n            this.populateCart(true);\r\n        }, this));\r\n\r\n        $document.on('updatecart', jQuery.proxy(function (event, cart) {\r\n            this.cart = cart;\r\n            this.populateCart(false);\r\n        }, this));\r\n\r\n        this.updateCart();\r\n    };\r\n\r\n    Eventgallery.Cart.prototype.openOverlay = function(e) {\r\n        e.preventDefault();\r\n        e.stopPropagation();\r\n\r\n        var link = jQuery(e.target);\r\n        if (!link.attr('data-id')) {\r\n            link = link.parent('[data-id]');\r\n        }\r\n\r\n        let overlay = new Overlay();\r\n        overlay.openOverlay(EventGalleryCartConfiguration.add2carturl + '&' + link.attr('data-id'));\r\n\r\n        return false;\r\n    };\r\n\r\n    Eventgallery.Cart.prototype.openCart = function(e) {\r\n        let $button;\r\n        if (e.target.tagName !== 'BUTTON') {\r\n            $button = jQuery(e.target).parent('button');\r\n        } else {\r\n            $button = jQuery(e.target);\r\n        }\r\n        e.preventDefault();\r\n        window.location.href = $button.attr('data-href');\r\n    };\r\n\r\n    Eventgallery.Cart.prototype.updateCartItemContainer = function () {\r\n\r\n        // detect multiple rows\r\n\r\n        this.isMultiline = false;\r\n        var y = -1;\r\n        var currentObject =  this;\r\n\r\n        jQuery(this.options.cartItemSelector).each(function () {\r\n            var posY = jQuery(this).position().top;\r\n            if (y < 0) {\r\n                y = posY;\r\n            } else if (y != posY) {\r\n                currentObject.isMultiline = true;\r\n            }\r\n        });\r\n\r\n        if (this.isMultiline) {\r\n            // prevent showing the wrong button. Basically this is an inital action if a second row is created.\r\n            var down = jQuery(this.options.buttonDownSelector);\r\n            var up = jQuery(this.options.buttonUpSelector);\r\n\r\n            if (down.css('display') == 'none' && up.css('display') == 'none') {\r\n                down.css('display', this.options.buttonShowType);\r\n            } else {\r\n                // update if a third or more row is created\r\n                if (up.css('display') != 'none') {\r\n                    // timeout to avoid any size issues because of a slow browser\r\n                    setTimeout(jQuery.proxy(function() {\r\n                        this.slideDown();\r\n                    }, this), 1000);\r\n                }\r\n            }\r\n        } else {\r\n            this.slideUp();\r\n        }\r\n    };\r\n\r\n    Eventgallery.Cart.prototype.populateCart = function (linksOnly) {\r\n\r\n        if (this.cart.length === 0) {\r\n            jQuery(this.options.cartSelector).slideUp();\r\n            jQuery(this.options.emptyCartSelector).slideDown();\r\n        } else {\r\n            jQuery(this.options.cartSelector).slideDown();\r\n            jQuery(this.options.emptyCartSelector).slideUp();\r\n        }\r\n        // define where all the cart html items are located\r\n\r\n        var cartHTML = jQuery(this.options.cartItemsSelector);\r\n        if (cartHTML === null) {\r\n            return;\r\n        }\r\n        // clear the html showing the current cart\r\n        if (!linksOnly) {\r\n            cartHTML.html(\"\");\r\n        }\r\n\r\n        // reset cart button icons\r\n        jQuery('.eventgallery-add2cart i.egfa').addClass('egfa-cart-plus').removeClass('egfa-shopping-cart');\r\n\r\n\r\n        for (var i = this.cart.length - 1; i >= 0; i--) {\r\n            //create the id. It's always folder=foo&file=bar\r\n            var id = 'folder=' + encodeURIComponent(this.cart[i].folder) + '&file=' + encodeURIComponent(this.cart[i].file);\r\n            //add the item to the cart. Currently we simple refresh the whole cart.\r\n            if (!linksOnly) {\r\n                cartHTML.html(cartHTML.html() +\r\n                    '<div class=\"cart-item\"><span class=\"badge\">'+this.cart[i].count+'</span>' +\r\n                    this.cart[i].imagetag +\r\n                    '<a href=\"#\" title=\"' + this.options.removeLinkTitle + '\" class=\"button-removeFromCart eventgallery-removeFromCart\" data-id=\"lineitemid=' + this.cart[i].lineitemid + '\">'+\r\n                    '<i class=\"egfa egfa-2x egfa-remove\"></i>' +\r\n                    '</a></div>');\r\n            }\r\n            // mark the add2cart link to show the item is already in the cart\r\n            jQuery('.eventgallery-add2cart[data-id*=\\'' + id + '\\'] i.egfa').addClass('egfa-shopping-cart').removeClass('egfa-cart-plus');\r\n        }\r\n\r\n        if (!linksOnly) {\r\n            cartHTML.html(cartHTML.html() + '<div style=\"clear:both\"></div>');\r\n            if (null === this.options.cartItemsMinHeight) {\r\n                this.options.cartItemsMinHeight = jQuery(this.options.cartItemContainerSelector).height();\r\n            }\r\n            this.updateCartItemContainer();\r\n        }\r\n\r\n        jQuery('.itemscount').html(this.cart.length);\r\n\r\n        if (Eventgallery !== undefined && Eventgallery.lightbox !== undefined) {\r\n            Eventgallery.lightbox.reload();\r\n        }\r\n\r\n        // tigger the loading of Google Photos images for example.\r\n        document.dispatchEvent(Polyfill.createNewEvent('eventgallery-images-added'));\r\n    };\r\n\r\n    Eventgallery.Cart.prototype.updateCart = function () {\r\n        jQuery.getJSON(\r\n            this.options.getCartUrl,\r\n            {json: 'yes'},\r\n            function (data) {\r\n                if (data !== undefined) {\r\n                    jQuery(document).trigger( 'updatecart', [data] );\r\n                }\r\n            }\r\n        );\r\n    };\r\n\r\n    Eventgallery.Cart.prototype.removeFromCart = function (event) {\r\n        return this.doRequest(event, this.options.removeUrl);\r\n    };\r\n\r\n    Eventgallery.Cart.prototype.updateQuantity = function (event) {\r\n\r\n        var $inputFild = jQuery(event.target),\r\n            imagetypeid = $inputFild.data('imagetypeid'),\r\n            quantity = parseInt($inputFild.val()),\r\n            data = $inputFild.data('id');\r\n\r\n        event.preventDefault();\r\n        data = data + '&quantity=' + quantity;\r\n        return this.doRequest(event, this.options.add2cartUrl, data);\r\n\r\n    };\r\n\r\n    Eventgallery.Cart.prototype.quantityPlus = function(e) {\r\n        e.preventDefault();\r\n\r\n        var fieldName = jQuery(e.target).attr('field'),\r\n            inputField = jQuery('input[name='+fieldName+']'),\r\n            currentVal = parseInt(inputField.val());\r\n\r\n        if (!isNaN(currentVal)) {\r\n            var maxOrderQuantity = inputField.data('maxorderquantity');\r\n            if (maxOrderQuantity === 0 || inputField.val()<maxOrderQuantity) {\r\n                inputField.val(currentVal + 1);\r\n            }\r\n            inputField.change();\r\n        } else {\r\n            inputField.val(0);\r\n        }\r\n    };\r\n\r\n    Eventgallery.Cart.prototype.quantityMinus = function(e) {\r\n        e.preventDefault();\r\n\r\n        var fieldName = jQuery(e.target).attr('field'),\r\n            inputField = jQuery('input[name='+fieldName+']'),\r\n            currentVal = parseInt(inputField.val());\r\n\r\n        if (!isNaN(currentVal) && currentVal > 0) {\r\n            inputField.val(currentVal - 1).change();\r\n        } else {\r\n            inputField.val(0);\r\n        }\r\n    };\r\n\r\n    Eventgallery.Cart.prototype.doRequest = function (event, url, data) {\r\n\r\n        event.preventDefault();\r\n\r\n        var linkElement = jQuery(event.target);\r\n\r\n        if (!linkElement.attr('data-id')) {\r\n            linkElement = linkElement.parent('[data-id]');\r\n        }\r\n\r\n        var iconElement = linkElement.children('i');\r\n        if (data === undefined) {\r\n            data = linkElement.attr('data-id');\r\n        }\r\n\r\n        iconElement.removeClass(\"egfa-cart-plus\").removeClass(\"egfa-shopping-cart\").addClass('egfa-spin egfa-gear');\r\n\r\n        jQuery.getJSON(\r\n            url,\r\n            data,\r\n            function (data) {\r\n\r\n                if (data !== undefined) {\r\n                    jQuery(document).trigger( 'updatecart', [data] );\r\n                }\r\n\r\n                iconElement.removeClass('egfa-spin').removeClass('egfa-gear').addClass('');\r\n\r\n            }\r\n        );\r\n\r\n        return true;\r\n    };\r\n\r\n})(Eventgallery, Eventgallery.jQuery);\r\n\r\n","(function(Eventgallery, jQuery){\r\n\r\nEventgallery.EventsList = function(newOptions) {\r\n    Eventgallery.Imagelist.call(this, newOptions);\r\n};\r\n\r\nEventgallery.EventsList.prototype = new Eventgallery.Imagelist();\r\nEventgallery.EventsList.prototype.constructor = Eventgallery.EventsList;\r\n\r\n\r\nEventgallery.EventsList.prototype.processList = function() {\r\n    /* processes the image list*/    \r\n    var width = this.width;\r\n    var currentObject = this;\r\n    jQuery.each(this.images, function () {\r\n        var height = Math.ceil(width * currentObject.options.rowHeightPercentage / 100);\r\n        this.setSize(width, height);\r\n    });\r\n};\r\n\r\n})(Eventgallery, Eventgallery.jQuery);\r\n","(function(Eventgallery, jQuery){\r\n\r\n/* processes a list of images and tries to resize separately*/\r\nEventgallery.EventsTiles = function(newOptions) {\r\n    Eventgallery.Imagelist.call(this, newOptions);\r\n};\r\n\r\nEventgallery.EventsTiles.prototype = new Eventgallery.Imagelist();\r\nEventgallery.EventsTiles.prototype.constructor = Eventgallery.EventsTiles;\r\n\r\nEventgallery.EventsTiles.prototype.processList = function() {\r\n    var width = this.width;\r\n    var currentObject = this;\r\n      \t \r\n    jQuery.each(this.images, function () {\r\n        var newHeight = Math.round(this.height / this.width * width);\r\n        var newWidth = width;\r\n        if (currentObject.options.adjustMode == \"height\" && this.height>this.width) {\r\n            newHeight = width;\r\n            newWidth = Math.round(this.width / this.height * newHeight);\r\n        }\r\n\r\n        this.setSize(newWidth, newHeight);\r\n        \r\n    });\r\n};\r\n\r\n})(Eventgallery, Eventgallery.jQuery);\r\n\r\n","import URLHelper from \"./URLHelper\";\r\n\r\n(function(Eventgallery){\r\n\r\n    const LOADING_MATCHER = 'gp.svg';\r\n    const MARKER_IMAGE_IS_IN_PROGRESS_ATTRIBUTE = 'data-eg-gp-processing';\r\n\r\nEventgallery.GooglePhotosProcessor = class {\r\n\r\n\r\n\r\n    constructor() {\r\n\r\n        this.albumUrl = \"\";\r\n        this.albumsUrl = \"\";\r\n\r\n        // noinspection JSUnresolvedVariable\r\n        if (window.EventGalleryGooglePhotosConfiguration) {\r\n            this.albumUrl = window.EventGalleryGooglePhotosConfiguration.albumUrl;\r\n            this.albumsUrl = window.EventGalleryGooglePhotosConfiguration.albumsUrl;\r\n        }\r\n\r\n        document.addEventListener(\"eventgallery-images-added\", () => this.processImages());\r\n\r\n    };\r\n\r\n    // noinspection JSUnusedGlobalSymbols\r\n    processImages() {\r\n\r\n        let albums = this._groupByAlbum(this._collectHTMLElements());\r\n        this._markImagesAsInProgress(albums);\r\n        this._getMainImageDataFromServer(albums);\r\n\r\n    }\r\n\r\n    // noinspection JSMethodCanBeStatic\r\n    /**\r\n     * Grabs IMG tag items from the DOM for Google Photos image placeholder.\r\n     *\r\n     * @returns <Element>[]\r\n     * @private\r\n     */\r\n     _collectHTMLElements() {\r\n        let htmlCollection = document.getElementsByTagName('IMG');\r\n\r\n        let foundImageHTMLElements = /** @type {HTMLElement} */[...htmlCollection];\r\n\r\n        let result = foundImageHTMLElements.filter(img => {\r\n            let backgroundImage = img.style.backgroundImage;\r\n            let longDesc = img.getAttribute('longdesc');\r\n            let src = img.src;\r\n\r\n            if (img.getAttribute(MARKER_IMAGE_IS_IN_PROGRESS_ATTRIBUTE) === '1') {\r\n                return false;\r\n            }\r\n\r\n            return (backgroundImage && backgroundImage.indexOf(LOADING_MATCHER)>0)\r\n                || (longDesc && longDesc.indexOf(LOADING_MATCHER)>0)\r\n                || (src && src.indexOf(LOADING_MATCHER)>0);\r\n        });\r\n\r\n        htmlCollection = document.getElementsByTagName('A');\r\n        let foundLinkHTMLElements = /** @type {HTMLElement} */[...htmlCollection];\r\n        result = result.concat(foundLinkHTMLElements.filter(a => {\r\n            let longDesc = a.getAttribute('longdesc');\r\n            let rel = a.getAttribute('rel');\r\n            let href = a.getAttribute('href');\r\n\r\n            if (a.getAttribute(MARKER_IMAGE_IS_IN_PROGRESS_ATTRIBUTE) === '1') {\r\n                return false;\r\n            }\r\n            return (href && href.indexOf(LOADING_MATCHER)>0)\r\n                || (longDesc && longDesc.indexOf(LOADING_MATCHER)>0)\r\n                || (rel && rel.indexOf(LOADING_MATCHER)>0);\r\n        }));\r\n\r\n        return result;\r\n\r\n    }\r\n\r\n    /**\r\n     *\r\n     * @param albums {Map<any, any>}\r\n     * @private\r\n     */\r\n    _markImagesAsInProgress(albums) {\r\n        for (let [foldername, album] of albums) {\r\n            /**\r\n             * @var ParsedHTMLElement parsedHTMLElement\r\n             */\r\n            album.forEach(parsedHTMLElement => {\r\n              parsedHTMLElement.getHTMLElement().setAttribute(MARKER_IMAGE_IS_IN_PROGRESS_ATTRIBUTE, 1);\r\n            })\r\n        }\r\n    }\r\n\r\n    /**\r\n     * sorts all found images into a map: key=folder, value=array of\r\n     *\r\n     * @param htmlElements\r\n     * @returns {Map<any, any>}\r\n     * @private\r\n     */\r\n    _groupByAlbum(htmlElements) {\r\n        let albums = new Map();\r\n        htmlElements.forEach((imageHTMLElement) => {\r\n           let parsedHTMLElement = this._parseHTMLElement(imageHTMLElement);\r\n            parsedHTMLElement.updateParameters();\r\n           let folder = parsedHTMLElement.parameters.get('folder');\r\n\r\n           if (!albums.get(folder)) {\r\n             albums.set(folder, []);\r\n           }\r\n\r\n           albums.get(folder).push(parsedHTMLElement);\r\n        });\r\n\r\n        return albums;\r\n    }\r\n\r\n    // noinspection JSMethodCanBeStatic\r\n    /**\r\n     *\r\n     * @param htmlElement\r\n     * @returns {ParsedHTMLElement}\r\n     * @private\r\n     */\r\n    _parseHTMLElement(htmlElement) {\r\n        if (htmlElement.tagName === 'IMG') {\r\n            return new ParsedImageHTMLElement(htmlElement);\r\n        }\r\n        return new ParsedLinkHTMLElement(htmlElement);\r\n    }\r\n\r\n\r\n    /**\r\n     * starts several requests to the server to determine\r\n     *\r\n     * @param albums\r\n     * @private\r\n     */\r\n    _getAlbumDataFromServer(albums) {\r\n        for (let [foldername, album] of albums) {\r\n            this._doAlbumRequest(foldername, album);\r\n        }\r\n    }\r\n\r\n    _doAlbumRequest(foldername, album) {\r\n        Eventgallery.jQuery.getJSON(this.albumUrl + '&folder=' + foldername, data => {\r\n            this._processAlbumResult(album, data);\r\n        });\r\n    }\r\n\r\n    _processAlbumResult(album, data) {\r\n        this._replaceImages(album, data);\r\n    }\r\n\r\n    _getMainImageDataFromServer(albums) {\r\n        let albumsWithMainImagesOnly = this._filterForAlbumsWithMainImageOnly(albums);\r\n\r\n        if (albumsWithMainImagesOnly.size > 0) {\r\n            this._doAlbumsRequest(albumsWithMainImagesOnly, albums);\r\n            for (let [foldername, album] of albumsWithMainImagesOnly) {\r\n                albums.delete(foldername);\r\n            }\r\n        }\r\n\r\n        this._getAlbumDataFromServer(albums);\r\n    }\r\n\r\n    _doAlbumsRequest(albumsWithMainImagesOnly, albums) {\r\n        Eventgallery.jQuery.getJSON(this.albumsUrl, data => {\r\n            this._processAlbumsResult(albumsWithMainImagesOnly, albums, data);\r\n        });\r\n    }\r\n\r\n    _processAlbumsResult(albumsWithMainImagesOnly, albums, data) {\r\n        for (let [key, album] of albumsWithMainImagesOnly) {\r\n            this._replaceImages(album, data[key]);\r\n        }\r\n        this._getAlbumDataFromServer(albums);\r\n    }\r\n\r\n    // noinspection JSMethodCanBeStatic\r\n    _filterForAlbumsWithMainImageOnly(albums) {\r\n        let newAlbums = new Map();\r\n        for(let [key, album] of albums) {\r\n            let mainImages = album.filter(image => image.isMainImage());\r\n\r\n            if (mainImages.length> 0 && mainImages.length === album.length) {\r\n                newAlbums.set(key, album);\r\n            }\r\n        }\r\n        return newAlbums;\r\n    }\r\n\r\n    _replaceImages(album, serverResult) {\r\n        if (album === undefined || serverResult === undefined) {\r\n            return;\r\n        }\r\n\r\n        album.forEach(parsedImageHTMLElement => {\r\n            let imageUrl = serverResult[parsedImageHTMLElement.getFile()];\r\n            if (imageUrl === undefined) {\r\n                return false;\r\n            }\r\n\r\n            parsedImageHTMLElement.updateParameters();\r\n            parsedImageHTMLElement.replaceElementLinks(imageUrl);\r\n\r\n        });\r\n\r\n        if (Eventgallery.lightbox) {\r\n            if (Eventgallery.lightbox.isOpen()) {\r\n                let link = Eventgallery.lightbox.getCurrentSlide().thumbnailContainer;\r\n                Eventgallery.lightbox._gallery.close();\r\n                setTimeout(()=>link.click(),500);\r\n            }\r\n        }\r\n    }\r\n};\r\n\r\nclass ParsedHTMLElement {\r\n    constructor(htmlElement) {\r\n        this.htmlElement = htmlElement;\r\n        this.parameters = null;\r\n        this.attributeNames = new Set();\r\n        this.styleAttributeNames = new Set();\r\n    }\r\n\r\n    updateParametersWithUrl(url) {\r\n        let parameterString = url.substring(url.indexOf('#')+1);\r\n        this.parameters = URLHelper.parseURLParameter(parameterString);\r\n    }\r\n\r\n    updateParameters() {\r\n        for(let n of this.attributeNames) {\r\n            let url = this.getHTMLElement().getAttribute(n);\r\n            if (url && url.indexOf(LOADING_MATCHER)>0) {\r\n                this.updateParametersWithUrl(url);\r\n                return;\r\n            }\r\n        }\r\n\r\n        for(let n of this.styleAttributeNames) {\r\n            let url = URLHelper.extractBackgroudUrl(this.getHTMLElement().style[n]);\r\n            if (url && url.indexOf(LOADING_MATCHER)>0) {\r\n                this.updateParametersWithUrl(url);\r\n                return;\r\n            }\r\n        }\r\n    }\r\n\r\n\r\n    replaceElementLinks(imageUrl) {\r\n\r\n        for(let n of this.attributeNames) {\r\n            let url = this.getHTMLElement().getAttribute(n);\r\n            if (url && url.indexOf(LOADING_MATCHER)>0) {\r\n                this.getHTMLElement().setAttribute(n, this.getImageUrl(imageUrl, this.getWidth(url)));\r\n            }\r\n        }\r\n\r\n        for(let n of this.styleAttributeNames) {\r\n            let url = URLHelper.extractBackgroudUrl(this.getHTMLElement().style[n]);\r\n            if (url && url.indexOf(LOADING_MATCHER)>0) {\r\n                this.getHTMLElement().style[n] = 'url(' + this.getImageUrl(imageUrl, this.getWidth(url)) + ')';\r\n            }\r\n        }\r\n    }\r\n\r\n    getHTMLElement() {\r\n        return this.htmlElement;\r\n    }\r\n\r\n    getFolder() {\r\n        return this.parameters.get('folder');\r\n    }\r\n\r\n    getFile() {\r\n        return this.parameters.get('file');\r\n    }\r\n\r\n\r\n    getWidth(url) {\r\n        return URLHelper.parseURLParameter(url).get('width');\r\n    }\r\n\r\n    getImageUrl(imageUrl, width) {\r\n        return imageUrl + '=w' + width;\r\n    }\r\n\r\n    isMainImage() {\r\n        return this.parameters.get('m') === '1';\r\n    }\r\n}\r\n\r\nclass ParsedLinkHTMLElement extends ParsedHTMLElement {\r\n\r\n    constructor(htmlElement) {\r\n        super(htmlElement);\r\n        this.attributeNames = new Set(['href', 'longDesc', 'rel']);\r\n    }\r\n\r\n}\r\n\r\nclass ParsedImageHTMLElement extends ParsedHTMLElement{\r\n\r\n    constructor(htmlElement) {\r\n        super(htmlElement);\r\n        this.attributeNames = new Set(['src', 'longDesc']);\r\n        this.styleAttributeNames = new Set(['backgroundImage']);\r\n    }\r\n}\r\n\r\n\r\n})(Eventgallery);\r\n","(function(Eventgallery, jQuery){\r\n\r\n    /*\r\n     Class to manage an image. This can be the img tag or a container. It has to manage glue itself.\r\n     */\r\n    Eventgallery.Image = function(image, index, newOptions) {\r\n\r\n        this.options = Eventgallery.Tools.mergeObjects(this.options, newOptions);\r\n        this.tag = jQuery(image);\r\n        this.index = index;\r\n        this.calculatedWidth = 0;\r\n        this.calcSize();\r\n    };\r\n\r\n    Eventgallery.Image.prototype.calcSize = function () {\r\n        // glue includes everything but the image width/heigt: margin, padding, border\r\n        var image = this.tag.find('img').first();\r\n\r\n        if (image.length === 0) {\r\n            return;\r\n        }\r\n\r\n        var elements = [this.tag, image];\r\n\r\n        this.glueLeft = Eventgallery.Tools.calcBorderWidth(elements, ['padding-left', 'margin-left', 'border-left-width']);\r\n        this.glueRight = Eventgallery.Tools.calcBorderWidth(elements, ['padding-right', 'margin-right', 'border-right-width']);\r\n        this.glueTop = Eventgallery.Tools.calcBorderWidth(elements, ['padding-top', 'margin-top', 'border-top-width']);\r\n        this.glueBottom = Eventgallery.Tools.calcBorderWidth(elements, ['padding-bottom', 'margin-bottom', 'border-bottom-width']);\r\n\r\n        // get image size from data- attributes\r\n\r\n        this.width = image.data(\"width\");\r\n        this.height = image.data(\"height\");\r\n\r\n\r\n        // fallback of data- attributes are not there\r\n        if (this.width === undefined) {\r\n            this.width = this.tag.width() - this.glueLeft - this.glueRight;\r\n        }\r\n\r\n        if (this.height === undefined) {\r\n            this.height = this.tag.height() - this.glueTop - this.glueBottom;\r\n        }\r\n    };\r\n\r\n    /**\r\n     * calculates the height of that image container. This includes the image and the gap on top/bottom\r\n     *\r\n     * @returns float\r\n     */\r\n    Eventgallery.Image.prototype.getImageTagHeight = function() {\r\n        return parseFloat(window.getComputedStyle(this.tag[0]).height) + this.glueTop + this.glueBottom;\r\n    };\r\n\r\n    Eventgallery.Image.prototype.setSize = function (width, height) {\r\n\r\n        var isFlickr = false;\r\n        var newWidth = width - this.glueLeft - this.glueRight;\r\n        var newHeight = height - this.glueTop - this.glueBottom;\r\n\r\n\r\n        var ratio = this.width / this.height;\r\n\r\n        //console.log(\"the size of the image should be: \"+width+\"x\"+height+\" so I have to set it to: \"+newWidth+\"x\"+newHeight);\r\n        //adjust background images\r\n        var image = this.tag.find('img');\r\n        if (image.length === 0) {\r\n            return;\r\n        }\r\n\r\n        var sizeCalculator = new Eventgallery.SizeCalculator();\r\n\r\n        // set a new background image\r\n        var backgroundImageStyle = image.css('background-image');\r\n        var longDesc = image.attr('longDesc');\r\n        if (!longDesc) {\r\n            longDesc = \"\";\r\n        }\r\n\r\n        var secret = image.data('secret');\r\n\r\n        if (secret !== undefined) {\r\n            var secret_o = image.data('secret_o'),\r\n                secret_h = image.data('secret_h'),\r\n                secret_k = image.data('secret_k'),\r\n                farm = image.data('farm'),\r\n                server = image.data('server'),\r\n                id = image.data('id');\r\n            var imageUrl = sizeCalculator.getFlickrURL(farm,  server, secret, secret_h, secret_k, secret_o, id, newWidth, newHeight, this.width, this.height);\r\n            backgroundImageStyle = \"url('\" + imageUrl + \"')\";\r\n            longDesc = imageUrl;\r\n\r\n            isFlickr = true;\r\n\r\n        } else {\r\n\r\n            var googleWidth = sizeCalculator.getSize(newWidth, newHeight, ratio);\r\n\r\n            backgroundImageStyle = sizeCalculator.adjustImageURL(backgroundImageStyle, googleWidth);\r\n            longDesc = sizeCalculator.adjustImageURL(longDesc, googleWidth);\r\n        }\r\n\r\n        image.css('background-image', backgroundImageStyle);\r\n        image.attr('longDesc', longDesc);\r\n        image.css('display', 'block');\r\n        image.css('margin', 'auto');\r\n\r\n        // IE8 fix: check the width/height first\r\n        if (newWidth>0) {\r\n            image.css('width', newWidth);\r\n        }\r\n        if (newHeight>0) {\r\n            image.css('height', newHeight);\r\n        }\r\n\r\n    };\r\n\r\n})(Eventgallery, Eventgallery.jQuery);","(function(Eventgallery, jQuery){\r\n\r\nEventgallery.Imagelist = function(newOptions) {\r\n\r\n    this.options = {\r\n        rowHeightPercentage: 100,\r\n        rowHeight: 150,\r\n        rowHeightJitter: 0,\r\n        minImageWidth: 150,\r\n        // resize the last image to full width\r\n        doFillLastRow: false,\r\n        // the object where we try to get the width from\r\n        imagesetContainer: null,\r\n\t\t// the object containing all the images elements. Usually they are retieved with a selector like '.imagelist a',\r\n        imageset: null,\r\n        firstImageRowHeight: 2,\r\n        initComplete: function () {\r\n        },\r\n        resizeStart: function () {\r\n        },\r\n        resizeComplete: function () {\r\n        }\r\n    };\r\n\tthis.images = [];\r\n\t// used to compare for width changes\r\n\tthis.eventgalleryPageWidth = 0;\r\n\t// the width of the container. This is kind of tricky since there can be many containers or just one.\r\n\tthis.width = null;\r\n    this.options = Eventgallery.Tools.mergeObjects(this.options, newOptions);\r\n    if (undefined !== newOptions) {\r\n        this.initialize();\r\n    }\r\n};\r\n\r\nEventgallery.Imagelist.prototype.initialize = function () {\r\n    var currentObject = this;\r\n    this.width = jQuery(this.options.imagesetContainer).width();\r\n\r\n    // save the current width so we don't react on an resize event if not necessary\r\n    this.eventgalleryPageWidth = this.width;\r\n\r\n    var images_tags = this.options.imageset;\r\n    this.images = [];\r\n\r\n    jQuery.each(images_tags, function (index, item) {\r\n        currentObject.images.push(new Eventgallery.Image(item, index));\r\n    });\r\n\r\n    jQuery(window).resize( jQuery.proxy(function () {\r\n        window.clearTimeout(this.eventgalleryTimer);\r\n\r\n        this.eventgalleryTimer = setTimeout(() => {\r\n            let new_width = jQuery(this.options.imagesetContainer).width();\r\n            this.width = new_width;\r\n            if (this.eventgalleryPageWidth !== new_width) {\r\n                this.options.resizeStart();\r\n                this.eventgalleryPageWidth = new_width;\r\n\r\n                jQuery(this.options.imagesetContainer).css('min-height', this.options.rowHeight*this.images.length);\r\n\r\n                this.processList();\r\n\r\n                jQuery(this.options.imagesetContainer).css('min-height','0px');\r\n\r\n                this.options.resizeComplete();\r\n            }\r\n        }, 500);\r\n\r\n    }, this) );\r\n\r\n\tjQuery(this.options.imagesetContainer).css('min-height', this.options.rowHeight*this.images.length);\r\n\r\n    this.processList();\r\n\r\n\tjQuery(this.options.imagesetContainer).css('min-height','0px');\r\n\r\n    //add a tiny timeout. This prevents some issue with lazyload\r\n\t//where images didn't load since the offset was wrong.\r\n    window.setTimeout(this.options.initComplete, 1);\r\n};\r\n\r\n/*calculated the with of an element*/\r\nEventgallery.Imagelist.prototype.getRowWidth = function () {\r\n    var rowWidth = this.width;\r\n\r\n    /* fix for the internet explorer if width if 45.666% == 699.87px*/\r\n    if (window.getComputedStyle) {\r\n        rowWidth = Math.floor(parseFloat(window.getComputedStyle(this.options.imagesetContainer).width) ) - 1;\r\n    } else {\r\n        rowWidth = rowWidth - 1;\r\n    }\r\n\r\n    return rowWidth;\r\n};\r\n\r\n/* processes the image list*/\r\nEventgallery.Imagelist.prototype.processList = function () {\r\n\r\n\tvar options;\r\n\r\n    /* find out how much space we have*/\r\n    var rowWidth = this.getRowWidth();\r\n\r\n\r\n    /* get a copy of the image list because we will pop the image during iteration*/\r\n    var imagesToProcess = this.images.slice(0);\r\n\r\n    if (imagesToProcess.length === 0) {\r\n        return;\r\n    }\r\n\r\n    /* display the first image larger */\r\n    if (this.options.firstImageRowHeight > 1) {\r\n        var image = imagesToProcess.shift();\r\n\r\n        /*if we have a large image, we have to hide it to get the real available space*/\r\n        image.tag.css('display', 'none');\r\n        rowWidth = this.getRowWidth();\r\n        image.tag.css('display', 'block');\r\n\r\n        var imageHeight = this.options.firstImageRowHeight * this.options.rowHeight;\r\n        var imageWidth = Math.floor(image.width / image.height * imageHeight);\r\n\r\n        if (imageWidth + this.options.minImageWidth >= rowWidth) {\r\n            imageWidth = rowWidth;\r\n        }\r\n\r\n        image.setSize(imageWidth, imageHeight);\r\n\r\n        let rowHeightForRightSideImages = this.options.rowHeight;\r\n\r\n        // in case the browser zooms to 110%, we need to make sure, the first image is smaller thand\r\n        // the images to the right. We do this by checking if there is a height difference between the\r\n        // height we want to get and the actual height. If there is one, we add a pixel to the rows\r\n        // on the right side.\r\n        if (imageHeight > image.getImageTagHeight()) {\r\n            rowHeightForRightSideImages = (imageHeight + 1) / this.options.firstImageRowHeight;\r\n        }\r\n\r\n        options = {\r\n            maxWidth: rowWidth - imageWidth,\r\n            maxHeight: rowHeightForRightSideImages,\r\n            adjustHeight: false\r\n        };\r\n\r\n        if (options.maxWidth > 0) {\r\n            this.generateRows(imagesToProcess, this.options.firstImageRowHeight, options, false);\r\n        }\r\n    }\r\n\r\n    options = {\r\n        maxWidth: rowWidth,\r\n        maxHeight: this.options.rowHeight,\r\n        heightJitter: this.options.rowHeightJitter,\r\n        doFillLastRow: this.options.doFillLastRow\r\n    };\r\n\r\n    this.generateRows(imagesToProcess, 99999, options, true);\r\n\r\n};\r\n\r\n    /**\r\n     * @param imagesToProcess\r\n     * @param numberOfRowsToCreate\r\n     * @param options\r\n     * @param finalRows\r\n     */\r\nEventgallery.Imagelist.prototype.generateRows = function (imagesToProcess, numberOfRowsToCreate, options, finalRows) {\r\n\tvar currentRow = new Eventgallery.Row(options);\r\n\r\n    while (imagesToProcess.length > 0 && numberOfRowsToCreate > 0) {\r\n        var addSuccessfull = currentRow.add(imagesToProcess[0]);\r\n        if (addSuccessfull) {\r\n            imagesToProcess.shift();\r\n        } else {\r\n            currentRow.processRow();\r\n            numberOfRowsToCreate--;\r\n            if (numberOfRowsToCreate === 0) break;\r\n            currentRow = new Eventgallery.Row(options);\r\n        }\r\n    }\r\n\r\n\tif (finalRows) {currentRow.isLastRow = true;}\r\n    currentRow.processRow();\r\n};\r\n\r\n})(Eventgallery, Eventgallery.jQuery);\r\n","import PhotoSwipe from \"../../photoswipe/photoswipe\";\r\nimport PhotoSwipeUIDefault from \"../../photoswipe/photoswipe-ui-default\";\r\n\r\n(function(Eventgallery, jQuery){\r\n    /*\r\n     *    Constructor. Starts up the whole thing :-)\r\n     *\r\n     *    This script is free to use. It has been created by http://www.aplusmedia.de and\r\n     *    can be downloaded on http://www.esteak.net.\r\n     *    License: GNU GPL 2.0: http://creativecommons.org/licenses/GPL/2.0/\r\n     *    Example on: http://blog.aplusmedia.de/moo-gallery2\r\n     *    Known issues:\r\n     *    - preloading does not care about initialIndex param\r\n     *    - hovering to a control over the border of the big image will make the other one flickering\r\n     *    - if you enter and leave the control area very quickly, the control flickers sometimes\r\n     *    - does not work in IE6\r\n     *\r\n     *    @param {Array} thumbs, An array of HTML elements\r\n     *    @param {HTMLelement} bigImageContainer, the full size image\r\n     *    @param {HTMLelement} pageContainer, If you have several pages, put them in this container\r\n     *    @param {Object} options, You have to pass imagesPerPage if you have more than one!\r\n     */\r\n    Eventgallery.JSGallery2 = function(thumbs, bigImageContainer, pageContainer, newOptions) {\r\n\r\n        this.options = {\r\n            'prevHandle': null,\t\t\t//if you pass a previous page handle in here, it will be hidden if it's not needed\r\n            'nextHandle': null,\t\t\t//like above, but for next page\r\n            'countHandle': null,\t\t//handle of the counter variable\r\n            'titleTarget': null,\t\t//target HTML element where image texts are copied into\r\n            'initialIndex': -1,\t\t\t//which thumb to select after init. you could create deep links with it.\r\n            'maxOpacity': 0.8,\t\t\t//maximum opacity before cursor reaches prev/next control, then it will be set to 1 instantly.\r\n            'showSocialMediaButton': true,\r\n            'showCartButton': true,\r\n            'showCartConnector': false,\r\n            'cartConnectorLinkRel': '',\r\n            'activeClass': 'thumbnail-active', // the css class for the active thumbnail\r\n            'lightboxRel': 'lightbo2', // the trigger rel for the lightbox script\r\n            'touchContainerSelector' : '#bigimageContainer'\r\n        };\r\n\r\n        this.options = Eventgallery.Tools.mergeObjects(this.options, newOptions);\r\n\r\n        var pages = jQuery(pageContainer).children('div');\r\n\r\n\t\t// defines if thumbs are currently running\r\n\t\tthis.running = false;\r\n        this.currentPageNumber = 0;\r\n\r\n        this.blockKeys = false;\r\n        this.imagesPerFirstPage = jQuery(pages[0]).find('div.ajax-thumbnail-container').length;\r\n        this.imagesPerPage = this.imagesPerFirstPage;\r\n\r\n        if (pages.length>1 && jQuery(pages[1]).find('div.ajax-thumbnail-container').length>0)  {\r\n            this.imagesPerPage = jQuery(pages[1]).find('div.ajax-thumbnail-container').length;\r\n        }\r\n\r\n        this.thumbs = thumbs;\r\n\r\n        this.bigImage = jQuery(bigImageContainer);\r\n        this.pageContainer = jQuery(pageContainer);\r\n        this.convertThumbs();\r\n\r\n        this.lastPage = Math.ceil((this.thumbs.length - this.imagesPerFirstPage) / this.imagesPerPage) + 1;\r\n\r\n        var url = document.location.href;\r\n        this.initialIndex = parseInt(Eventgallery.Tools.getUrlHashParameterValue(url, 'imageno'));\r\n        if (isNaN(this.initialIndex)) {\r\n            this.initialIndex = 0;\r\n        }\r\n\r\n\r\n        this.createControls();\r\n\r\n        this.createGallerySlides();\r\n\r\n        this.gotoPage(0);\r\n\r\n        if (this.options.initialIndex !== -1) {\r\n            this.unBlockKeys();\r\n            this.selectByIndex(this.options.initialIndex);\r\n        } else if (this.initialIndex !== 0) {\r\n\r\n            this.unBlockKeys();\r\n            this.selectByIndex(this.initialIndex);\r\n        }\r\n\r\n    };\r\n\r\n    Eventgallery.JSGallery2.prototype.createGallerySlides = function() {\r\n        this.slides = [];\r\n        jQuery.each(this.thumbs, (count, thumbContainer) => {\r\n            let lightboxLinkElement = thumbContainer.getElementsByTagName('A')[0];\r\n\r\n            let newSrc = lightboxLinkElement.getAttribute('rel');\r\n            let title =  decodeURIComponent(lightboxLinkElement.getAttribute('data-description'));\r\n            let slide =    {\r\n                w: lightboxLinkElement.getAttribute('data-width'),\r\n                h: lightboxLinkElement.getAttribute('data-height'),\r\n                src: lightboxLinkElement.getAttribute('href'),\r\n                title: title\r\n            };\r\n            this.slides.push(slide)\r\n        });\r\n    };\r\n\r\n    Eventgallery.JSGallery2.prototype.createControls = function () {\r\n        this.prevLink = jQuery('<a href=\"#\" class=\"link jsgallery-prev\"></a>');\r\n        this.prevLink.bind('click', jQuery.proxy(this.prevImage, this));\r\n        this.prevLink.mouseleave(jQuery.proxy(this.mouseLeaveHandler, this));\r\n\r\n        this.prevLink.mouseover( jQuery.proxy( function (e) {\r\n            this.focusControl(e, this.prevLink);\r\n        }, this));\r\n\r\n        this.zoomLink = jQuery('<a href=\"#\" class=\"link jsgallery-zoom\"></a>');\r\n        this.zoomLink.mouseleave(jQuery.proxy(this.mouseLeaveHandler, this));\r\n\r\n        this.zoomLink.mouseover( jQuery.proxy(function (e) {\r\n            this.focusControl(e, this.zoomLink);\r\n        }, this));\r\n\r\n        this.nextLink = jQuery('<a href=\"#\" class=\"link jsgallery-next\"></a>');\r\n        this.nextLink.bind('click', jQuery.proxy(this.nextImage, this));\r\n        this.nextLink.mouseleave(jQuery.proxy(this.mouseLeaveHandler, this));\r\n\r\n        this.nextLink.mouseover(jQuery.proxy(function (e) {\r\n            this.focusControl(e, this.nextLink);\r\n        }, this));\r\n\r\n\t\tthis.bigImage.parent().append(this.prevLink);\r\n        this.bigImage.parent().append(this.zoomLink);\r\n        this.bigImage.parent().append(this.nextLink);\r\n\r\n        this.bigImage.load(()=>this.showBigImage());\r\n\r\n        if (this.options.showCartButton) {\r\n            this.add2cartLink = jQuery('<a href=\"#\" class=\"eventgallery-add2cart eventgallery-openAdd2cart jsgallery-add2cart\"><i class=\"egfa egfa-2x egfa-cart-plus\"></i></a>');\r\n            this.bigImage.parent().append(this.add2cartLink);\r\n            jQuery('body').trigger('updatecartlinks');\r\n        }\r\n\r\n        if (this.options.showCartConnector) {\r\n\r\n            this.cartConnectorLink = jQuery('<a href=\"#\" id=\"ajax-cartconnector\" class=\"button-cart-connector jsgallery-cartconnector\"><i class=\"egfa egfa-2x egfa-cart-plus\"></i></a>');\r\n            this.cartConnectorLink.attr('rel', this.options.cartConnectorLinkRel);\r\n            this.bigImage.parent().append(this.cartConnectorLink);\r\n        }\r\n\r\n        if (this.options.showSocialMediaButton) {\r\n            this.socialmediabutton = jQuery('<a id=\"ajax-social-media-button\" class=\"social-share-button social-share-button-open jsgallery-socialmedia\" rel=\"nofollow\" href=\"#\"><i class=\"egfa egfa-2x egfa-share-alt-square\"></i></a>');\r\n            this.socialmediabutton.click((e)=>Eventgallery.SocialShareButton.openShareDialog(e));\r\n            this.bigImage.parent().append(this.socialmediabutton);\r\n        }\r\n\r\n        jQuery(document).keydown(jQuery.proxy(this.keyboardHandler, this));\r\n\r\n\r\n\t\tvar options = {\r\n\t\t  dragLockToAxis: true,\r\n\t\t  dragBlockHorizontal: true,\r\n\t\t  swipeVelocityX: 0.2\r\n\t\t};\r\n\r\n\r\n\r\n\r\n\t\tvar swipeleft =  jQuery.proxy(function(e) {\r\n\t\t    this.nextImage(e);\r\n\t\t}, this);\r\n\r\n\t\tvar swiperight = jQuery.proxy(function(e) {\r\n\t\t    this.prevImage(e);\r\n\t\t}, this);\r\n\r\n        var tabaction = function(e) {\r\n            event.target.click();\r\n        };\r\n\r\n        Eventgallery.Touch.addTouch(this.options.touchContainerSelector,\r\n            swiperight,\r\n            swipeleft,\r\n            tabaction,\r\n            true\r\n        );\r\n\r\n        this.mouseLeaveHandler();\r\n    };\r\n\r\n    /**\r\n     * Focuses one control\r\n     *\r\n     * @param {Event} event\r\n     * @param {HTMLElement} control\r\n    */\r\n    Eventgallery.JSGallery2.prototype.focusControl = function (event, control) {\r\n        control.css('opacity', 1);\r\n    };\r\n\r\n    /**\r\n     * Hides the controls.\r\n     */\r\n    Eventgallery.JSGallery2.prototype.mouseLeaveHandler = function () {\r\n        jQuery(this.nextLink).css('opacity', 0);\r\n        jQuery(this.prevLink).css('opacity', 0);\r\n        jQuery(this.zoomLink).css('opacity', 0);\r\n    };\r\n\r\n    /**\r\n     * Handles keyboard interactions.\r\n     * @param {Event} event\r\n     */\r\n    Eventgallery.JSGallery2.prototype.keyboardHandler = function (event) {\r\n\r\n\r\n        if (!this.blockKeys && Eventgallery.lightbox.isOpen() !== true) {\r\n            if (event.keyCode >= 49 && event.keyCode <= 57) {\r\n                this.gotoPage(event.key - 1);\r\n            } else if (event.keyCode == 37) {\r\n                this.prevImage(event);\r\n            } else if (event.keyCode == 39) {\r\n                this.nextImage(event);\r\n            }\r\n        }\r\n    };\r\n\r\n    /**\r\n     *    Returns the distance to the mouse from the middle of a given element.\r\n     *    @param {HTMLelement} element\r\n     *    @param {Event} event\r\n     *    @return integer\r\n     */\r\n    Eventgallery.JSGallery2.prototype.getDistanceToMouse = function (element, event) {\r\n        var s = jQuery(element);\r\n        var xDiff = Math.abs(event.clientX - (s.position().left + s.width() / 2));\r\n        var yDiff = Math.abs(event.clientY - (s.position().top + s.height() / 2));\r\n        return Math.sqrt(Math.pow(xDiff, 2) + Math.pow(yDiff, 2));\r\n    };\r\n\r\n    Eventgallery.JSGallery2.prototype.resetThumbs = function () {\r\n       \tthis.running = false;\r\n\r\n\t\tthis.convertThumbs();\r\n\r\n        //if we like to select another image on that page than the first one\r\n        this.select(this.selectedContainer, true);\r\n    };\r\n\r\n    /**\r\n     *    Adds the border to the thumbs and so on. (conversion of static thumbs)\r\n     */\r\n    Eventgallery.JSGallery2.prototype.convertThumbs = function () {\r\n        var currentObject = this;\r\n        jQuery.each(this.thumbs, function (count, thumbContainer) {\r\n            currentObject.convertThumb(thumbContainer, count);\r\n        });\r\n    };\r\n\r\n    /**\r\n     * Converts one single thumb.\r\n     * @param {HTMLelement} thumbContainer\r\n     * @param {Integer} count\r\n     */\r\n    Eventgallery.JSGallery2.prototype.convertThumb = function (thumbContainer, count) {\r\n\r\n        if (thumbContainer === undefined) {\r\n            return;\r\n        }\r\n\r\n        var container = jQuery(thumbContainer);\r\n\r\n        container.click(jQuery.proxy(function(e) {\r\n            e.preventDefault();\r\n            this.select(container);\r\n        }, this));\r\n\r\n\r\n        container.css('position', 'relative');\r\n        container.attr('data-counter', count);\r\n        container.attr('href', '#');\r\n    };\r\n\r\n    /**\r\n     *    Removes key blocking.\r\n     */\r\n    Eventgallery.JSGallery2.prototype.unBlockKeys = function () {\r\n        this.blockKeys = false;\r\n    };\r\n\r\n    /**\r\n     *    Selects a certain image. (You have to pass the outer container of the image)\r\n     *    @param container\r\n     *    @param forceReload\r\n     */\r\n    Eventgallery.JSGallery2.prototype.select = function (container, forceReload) {\r\n        forceReload = typeof forceReload !== 'undefined' ? forceReload : false;\r\n\r\n        if (this.blockKeys || container === null) {\r\n            return false;\r\n        }\r\n\r\n\r\n        this.blockKeys = true;\r\n        if ( this.selectedContainer !== undefined ) {\r\n            //this prevents an ugly effect if you click on the currently selected item\r\n            if (container == this.selectedContainer && !forceReload) {\r\n                this.unBlockKeys();\r\n                return false;\r\n            }\r\n            this.deselect(this.selectedContainer);\r\n        }\r\n\r\n        // handle URL\r\n        if (history && history.pushState) {\r\n            history.pushState('', '', Eventgallery.Tools.addUrlHashParameter(window.location.href, 'imageno', this.thumbs.index(container)));\r\n        }\r\n\r\n        //if target image is not on current page, we have to go there first\r\n        var targetPage = Math.floor((jQuery(container).data('counter') - this.imagesPerFirstPage) / this.imagesPerPage) + 1;\r\n\r\n        if (this.currentPageNumber != targetPage) {\r\n            this.gotoPage(targetPage, container);\r\n        }\r\n        this.selectedContainer = container;\r\n\r\n        jQuery(container).addClass(this.options.activeClass);\r\n\r\n        //first link in the container\r\n        var source = jQuery(container).children().first();\r\n\r\n\r\n        // prepare the add2cart button\r\n        if (this.options.showCartButton) {\r\n            this.add2cartLink.attr('data-id', source.attr('data-id'));\r\n            //jQuery('.eventgallery-add2cart').attr('data-id', source.data('id'));\r\n        }\r\n\r\n        if (this.options.showCartConnector) {\r\n            this.cartConnectorLink.attr('data-folder', source.data('folder'));\r\n            this.cartConnectorLink.attr('data-file', source.data('file'));\r\n            this.cartConnectorLink.attr('href', decodeURIComponent(source.data('cart-connector-link')));\r\n        }\r\n\r\n        if (this.options.showSocialMediaButton) {\r\n            this.socialmediabutton.attr('data-link', decodeURIComponent(source.data('social-sharing-link')) );\r\n        }\r\n\r\n        jQuery(document).trigger('updatecartlinks');\r\n\r\n        // now lets set the image\r\n        this.setImage(source);\r\n    };\r\n\r\n\r\n    /**\r\n     * Selects an image by its thumbnail index.\r\n     * @param {integer} index of the thumbnail, starting with 0\r\n     */\r\n    Eventgallery.JSGallery2.prototype.selectByIndex = function (index) {\r\n        //this.mouseLeaveHandler();\r\n        if (index < 0 || this.thumbs.length <= index) {\r\n            index = 0;\r\n        }\r\n        this.select(this.thumbs[index]);\r\n    };\r\n\r\n    /**\r\n     *    Opposite to method above.\r\n     *    @param {HTMLelement} container\r\n     */\r\n    Eventgallery.JSGallery2.prototype.deselect = function (container) {\r\n        jQuery(container).removeClass(this.options.activeClass);\r\n    };\r\n\r\n    /**\r\n     *    Changes the full size image to given one.\r\n     *    @param lightboxLinkElement\r\n     */\r\n    Eventgallery.JSGallery2.prototype.setImage = function (lightboxLinkElement) {\r\n\r\n            this.bigImage.css('opacity', '0.1');\r\n            let newSrc = lightboxLinkElement.attr('rel');\r\n            let title =  decodeURIComponent(lightboxLinkElement.attr('data-description'));\r\n\r\n            this.zoomLink.unbind('click');\r\n\r\n            let currentIndex = this.thumbs.index(this.selectedContainer);\r\n\r\n            this.zoomLink.click((e) => {\r\n                this.createGallerySlides();\r\n\r\n                Eventgallery.lightbox.openPhotoSwipe(\r\n                    currentIndex, this.slides, true, false\r\n                );\r\n                Eventgallery.lightbox.setAfterChangeEventListener(() => {\r\n                    let gid = Eventgallery.lightbox.getCurrentSlide().gid;\r\n                    if (this.slides.length>0 && gid === this.slides[0].gid) {\r\n                        this.selectByIndex(Eventgallery.lightbox.getCurrentIndex());\r\n                    }\r\n                });\r\n            });\r\n            if (Eventgallery.lightbox.isOpen() === true) {\r\n               Eventgallery.lightbox.gotoSlide(currentIndex);\r\n            }\r\n\r\n            jQuery(this.options.titleTarget).html(title);\r\n\r\n            this.bigImage.attr('src', newSrc);\r\n            this.unBlockKeys();\r\n    };\r\n\r\n    Eventgallery.JSGallery2.prototype.showBigImage= function() {\r\n        this.bigImage.css('opacity', '1');\r\n    };\r\n\r\n    /**\r\n     *    Navigates to previous page.\r\n     */\r\n    Eventgallery.JSGallery2.prototype.prevPage = function () {\r\n        this.gotoPage(this.currentPageNumber - 1);\r\n    };\r\n    /**\r\n     *    Navigates to next page.\r\n     */\r\n    Eventgallery.JSGallery2.prototype.nextPage = function () {\r\n        this.gotoPage(this.currentPageNumber + 1);\r\n    };\r\n    /**\r\n     *    Selects the previous image.\r\n     */\r\n    Eventgallery.JSGallery2.prototype.prevImage = function (e) {\r\n        if (e !== undefined) {\r\n            e.preventDefault();\r\n        }\r\n        this.selectByIndex(this.thumbs.index(this.selectedContainer) - 1);\r\n    };\r\n    /**\r\n     *    Selects the next image.\r\n     */\r\n    Eventgallery.JSGallery2.prototype.nextImage = function (e) {\r\n        if (e !== undefined) {\r\n            e.preventDefault();\r\n        }\r\n        this.selectByIndex(this.thumbs.index(this.selectedContainer) + 1);\r\n    };\r\n\r\n    /**\r\n     * Zooms an image\r\n     */\r\n    Eventgallery.JSGallery2.prototype.zoomImage = function (e) {\r\n        if (e !== undefined) {\r\n            e.preventDefault();\r\n        }\r\n    };\r\n\r\n    /**\r\n     *    Navigates to given page and selects the first image of it.\r\n     *    Also hides the handles (if set).\r\n     *    @param {Integer} pageNumber, index of the target page (0-n)\r\n     *  @param {HTMLElement} selectImage, optionally receives a particular image to select\r\n     */\r\n    Eventgallery.JSGallery2.prototype.gotoPage = function (pageNumber, selectImage) {\r\n        //if we like to select another image on that page than the first one\r\n        if (pageNumber === 0) {\r\n            selectImage = selectImage === undefined ? this.thumbs[0] : selectImage;\r\n        } else {\r\n            let i = (pageNumber - 1) * this.imagesPerPage + this.imagesPerFirstPage;\r\n            selectImage = this.thumbs[i] === undefined ? selectImage : this.thumbs[i];\r\n        }\r\n\r\n        if (pageNumber >= 0 && pageNumber < this.lastPage) {\r\n\r\n            this.pageContainer.css('margin-left',\r\n            this.pageContainer.children().width() * pageNumber * -1);\r\n\r\n            // fix height of the page-container\r\n            var maxHeight = 0;\r\n            this.pageContainer.children().each(function (index, page) {\r\n                var height = jQuery(page).height();\r\n                if (height > maxHeight) {\r\n                    maxHeight = height;\r\n                }\r\n            });\r\n\r\n            this.pageContainer.css('height', maxHeight);\r\n\r\n            this.currentPageNumber = pageNumber;\r\n            this.select(selectImage);\r\n            this.updateHandles();\r\n\r\n        }\r\n    };\r\n\r\n    Eventgallery.JSGallery2.prototype.updateHandles = function () {\r\n        //update handles\r\n        var dummy;\r\n\r\n        if (this.options.prevHandle !== undefined) {\r\n            dummy = this.currentPageNumber === 0 ? this.options.prevHandle.fadeOut():this.options.prevHandle.fadeIn();\r\n        }\r\n        if (this.options.nextHandle !== undefined) {\r\n            dummy = this.currentPageNumber == this.lastPage - 1 ? this.options.nextHandle.fadeOut():this.options.nextHandle.fadeIn();\r\n        }\r\n\r\n        if (this.options.countHandle !== undefined) {\r\n            dummy = this.updatePagingBar(this.options.countHandle, this.currentPageNumber, this.lastPage);\r\n        }\r\n\r\n    };\r\n\r\n    Eventgallery.JSGallery2.prototype.updatePagingBar = function (countHandle, currentPage, pageCount) {\r\n\t\tvar i;\r\n\r\n        //init the pagingbar\r\n        if (pageCount > 1 && countHandle.html() === '') {\r\n\r\n            for (i = 0; i < pageCount; i++) {\r\n                this.createCountLink(this, countHandle, i);\r\n            }\r\n        }\r\n\r\n        var pageSpeed = this.options.pageSpeed;\r\n\r\n\r\n        if (pageCount > 9) {\r\n\r\n            for (i = 0; i < pageCount; i++) {\r\n                jQuery('#count' + i).css('display', 'inline');\r\n            }\r\n\r\n            var skipFromRight = pageCount;\r\n            var skipFromLeft = 0;\r\n\r\n            var spaceToRight = pageCount - currentPage - 1;\r\n            var spaceToLeft = currentPage;\r\n\r\n            if (spaceToLeft > 4 && spaceToRight > 4) {\r\n                skipFromLeft = currentPage - 4;\r\n                skipFromRight = currentPage + 5;\r\n            } else {\r\n                if (spaceToLeft <= 4) {\r\n                    skipFromLeft = 0;\r\n                    skipFromRight = currentPage + 5 + (4 - spaceToLeft);\r\n                }\r\n                if (spaceToRight <= 4) {\r\n                    skipFromLeft = currentPage - 4 - (4 - spaceToRight);\r\n                    skipFromRight = pageCount;\r\n                }\r\n            }\r\n\r\n            for (i = 0; i < skipFromLeft; i++) {\r\n                jQuery('#count' + i).css('display', 'none');\r\n            }\r\n\r\n            for (i = skipFromRight; i < pageCount; i++) {\r\n                jQuery('#count' + i).css('display', 'none');\r\n\r\n            }\r\n        }\r\n\r\n        jQuery(countHandle).children('.active').removeClass('active');\r\n        jQuery('#count' + currentPage).addClass('active');\r\n\r\n    };\r\n\r\n\r\n    Eventgallery.JSGallery2.prototype.createCountLink = function (gallery, countHandle, currentPageNumber) {\r\n\r\n        var myAnchor = jQuery('<a href=\"#\">' + (currentPageNumber + 1) + '</a>');\r\n\r\n\r\n        myAnchor.click(jQuery.proxy(function (e) {\r\n            this.gotoPage(currentPageNumber);\r\n            return false;\r\n        }, gallery));\r\n\r\n\r\n        var myListItem = jQuery('<li class=\"count\" id=\"count' + currentPageNumber + '\"></li>');\r\n\r\n        myListItem.append(myAnchor);\r\n\r\n        countHandle.append(myListItem);\r\n\r\n    };\r\n\r\n})(Eventgallery, Eventgallery.jQuery);\r\n","(function(Eventgallery, jQuery){\r\n\t\r\nEventgallery.Lazyload = function(newOptions) {\r\n\tthis.options = {\r\n        range: 200,\r\n        elements: 'img.eventgallery-lazyme',\r\n        container: window,\r\n        startPosition: -1,\r\n        onScroll: function () {\r\n            //console.log('scrolling');\r\n        },\r\n        onLoad: function (img) {\r\n            //console.log('image loaded');\r\n            img.removeClass('eventgallery-lazyload-loading').addClass('eventgallery-lazyload-loaded');\r\n        },\r\n        onComplete: function () {\r\n            //console.log('all images loaded');\r\n        }\r\n    };\r\n\r\n    /**\r\n     * This is useful if somebody wants to use an inner div to do the scroll magic.\r\n     * In this case putting a very high value in here would practically disable Layzload.\r\n     * We still need it to add the background images so we can't simply disable it.\r\n     */\r\n    if (typeof EventGalleryLazyloadRange != 'undefined') {\r\n        this.options.range = EventGalleryLazyloadRange;\r\n    }\r\n\r\n    this.initialize(newOptions);\r\n};\r\n\r\nEventgallery.Lazyload.prototype.initialize = function(newOptions) { \r\n    \r\n    this.options = Eventgallery.Tools.mergeObjects(this.options, newOptions);\r\n\r\n    this.$container = (this.options.container != window && this.options.container != document.body ? jQuery(this.options.container) : jQuery(document.body));\r\n    this.$elements = this.$container.find(this.options.elements);\r\n\r\n    this.containerDimension = jQuery(window).height();\r\n    this.startPosition = this.options.startPosition;\r\n    //var $offset = (this.options.container != window && this.options.container != document.body ? this.$container : jQuery(document.body));\r\n    var $offset = jQuery(document.body);\r\n\r\n\t//noinspection CoffeeScriptUnusedLocalSymbols\r\n    // this is necessary to make the current object available in new function\r\n    var self = this;\r\n    /* find elements remember and hold on to */\r\n\tfor(var index = 0; index < this.$elements.length; index++) {\r\n\t\tvar el = jQuery(this.$elements[index]);\t\t\r\n\t\r\n        /* reset image src IF the image is below the fold and range */\r\n        if (el.attr('longDesc')) {\r\n            el.addClass('eventgallery-lazyload-loading');\r\n        }\r\n    }\r\n\t\r\n    this.$elements = this.$elements.filter(function () {\r\n    \tvar $el = jQuery(this);\r\n\r\n        /* reset image src IF the image is below the fold and range */\r\n        if ($el.attr('longDesc')) {\r\n            return true;            \r\n        }\r\n    });\r\n    \r\n    /* create the action function */\r\n    var action = function () {\r\n        var currentPosition = jQuery(window).scrollTop();\r\n        \r\n        if (currentPosition > self.startPosition) {\r\n            self.$elements = self.$elements.filter(function () {\r\n            \tvar $el = jQuery(this);\r\n\t\t        var elPos = $el.offset().top - $offset.offset().top;\r\n\t\t        //console.log('currentPosition ', (currentPosition + self.options.range + self.containerDimension), ' >= elPos ', elPos);\r\n                if ((currentPosition + self.options.range + self.containerDimension) >= elPos) {\r\n                    if ($el.attr('longDesc')) {\r\n                        $el.css('background-image', 'url(\"' + $el.attr('longDesc') + '\")');\r\n                    }\r\n                    self.options.onLoad.call(self, $el);\r\n                    return false;\r\n                }\r\n                return true;\r\n            });\r\n            self.startPosition = currentPosition;\r\n        }\r\n        \r\n        self.options.onScroll.call();\r\n        /* remove this event IF no elements */\r\n        if (self.$elements.length === 0) {\r\n            jQuery(window).off('scroll', action);\r\n            self.options.onComplete.call();\r\n        }\r\n    };\r\n\r\n    /* listen for scroll */\r\n    jQuery(window).on('scroll', action);\r\n    \r\n    action();\r\n        \r\n};\r\n})(Eventgallery, Eventgallery.jQuery);","(function(Eventgallery, jQuery){\r\n\t\r\n/* processes a row is a image list */\r\nEventgallery.Row = function(newOptions) {\r\n\r\n\tthis.options = {\r\n        maxWidth: 960,\r\n        maxHeight: 250,\r\n        heightJitter: 0,\r\n        adjustHeight: true,\r\n        doFillLastRow: true\r\n    };\r\n    this.options = Eventgallery.Tools.mergeObjects(this.options, newOptions);\r\n    this.isLastRow = false;\r\n    this.images = [];\r\n    this.width = 0;\r\n    if (this.options.heightJitter > 0) {\r\n        this.options.maxHeight = Math.floor(this.options.maxHeight + (Math.random() * 2 * this.options.heightJitter) - this.options.heightJitter);\r\n    }\r\n};\r\n\r\nEventgallery.Row.prototype.add = function (eventgalleryImage) {\r\n    let imageWidth =eventgalleryImage.width / eventgalleryImage.height * this.options.maxHeight;\r\n\r\n    // determine the number of images per line. return false if the row if full.\r\n\r\n    let addThisImage = this.width + imageWidth <= this.options.maxWidth || this.images.length === 0;\r\n\r\n    if (!addThisImage) {\r\n        let gap = Math.abs(this.options.maxWidth - this.width - imageWidth) / this.options.maxWidth;\r\n        if (gap<0.2) {\r\n            addThisImage = true;\r\n        }\r\n    }\r\n\r\n    // determine the number of images per line. return false if the row if full.\r\n    if (addThisImage) {\r\n        this.images.push(eventgalleryImage);\r\n        eventgalleryImage.calculatedWidth = imageWidth;\r\n        this.width = this.width + imageWidth;\r\n        return true;\r\n    } else {\r\n        return false;\r\n    }\r\n};\r\n\r\nEventgallery.Row.prototype.processRow = function () {\r\n    let gap, rowHeight, i;\r\n\r\n    gap = this.options.maxWidth - this.width;\r\n\r\n    // if there is no gap to fill, we need to resize the last row to fit the image.\r\n    if (this.isLastRow && this.options.doFillLastRow === false && gap >=0 ) {\r\n        if (gap>=0) {\r\n            gap = 0;\r\n        }\r\n        rowHeight = this.options.maxHeight;\r\n    } else {\r\n\r\n        rowHeight = this.options.maxHeight / (this.width/this.options.maxWidth);\r\n    }\r\n\r\n    if (this.options.adjustHeight === false) {\r\n        rowHeight = this.options.maxHeight;\r\n    }\r\n\r\n    for (i=0; i < this.images.length; i++) {\r\n        var image = this.images[i];\r\n\r\n        var calculatedWidth = image.calculatedWidth;\r\n\r\n        // how much of the gap does this element need to fill?\r\n        var gapToClose = (calculatedWidth / this.width ) * gap;\r\n\r\n        image.setSize(calculatedWidth + gapToClose, rowHeight);\r\n    }\r\n\r\n\r\n};\r\n\r\n})(Eventgallery, Eventgallery.jQuery);","(function(Eventgallery){\r\n/* determines the size of an image so a image server can deliver it. */\r\n\r\nEventgallery.SizeCalculator = function(newOptions) {\r\n\tthis.options = {\r\n        // to be able to handle internal and google picasa images, we need to restrict the availabe image sizes.\r\n        availableSizes: [48, 104, 160, 288, 320, 400, 512, 640, 720, 800, 1024, 1280, 1440],\r\n        flickrSizes:   {100 : 't', 240 : 'm', 320 : 'n', 500 : '-', 640 : 'z', 800 : 'c', 1024 : 'b', 1600 : 'h', 2048 : 'k'}\r\n\r\n};\r\n    this.options = Eventgallery.Tools.mergeObjects(this.options, newOptions);   \r\n};\r\n\r\nEventgallery.SizeCalculator.prototype.adjustImageURL = function (url, size) {\r\n    url = url.replace(/=w(\\d+)/, '=w' + size);\r\n    url = url.replace(/width=(\\d+)/, 'width=' + size);\r\n    url = url.replace(/\\/s(\\d*)\\//, '/s' + size + '/');\r\n    url = url.replace(/\\/s(\\d*)-c\\//, '/s' + size + '-c/');\r\n\r\n    return url;\r\n};\r\n\r\n\r\nEventgallery.SizeCalculator.prototype.getFlickrURL = function(farm, server, secret,  secret_h, secret_k, secret_o, id, width, height, originalwidth, originalheight) {\r\n    var longSideSize,\r\n        originalLongSideSize,\r\n        sizeCode,\r\n        secretString,\r\n        sizeString,\r\n        ratio;\r\n\r\n    let minSizes = this.getMinSizes(width, height, originalwidth, originalheight);\r\n\r\n\r\n    if (originalwidth > originalheight) {\r\n        longSideSize = minSizes.width;\r\n        originalLongSideSize = originalwidth;\r\n    } else {\r\n        longSideSize = minSizes.height;\r\n        originalLongSideSize = originalheight;\r\n    }\r\n\r\n    if (originalLongSideSize < longSideSize) {\r\n        sizeCode = 'o';\r\n    } else {\r\n\r\n        for (var size in this.options.flickrSizes) {\r\n            if (size > longSideSize) {\r\n                sizeCode = this.options.flickrSizes[size];\r\n                break;\r\n            }\r\n        }\r\n    }\r\n\r\n    if (sizeCode === 'h' && secret_h === '') {\r\n        sizeCode = 'o'\r\n    }\r\n\r\n    if (sizeCode === 'k' && secret_k === '') {\r\n        sizeCode = 'o'\r\n    }\r\n\r\n    switch (sizeCode) {\r\n        case \"o\":\r\n            secretString = secret_o;\r\n            break;\r\n        case \"h\":\r\n            secretString = secret_h;\r\n            break;\r\n        case \"k\":\r\n            secretString = secret_k;\r\n            break;\r\n        default:\r\n            secretString = secret;\r\n    }\r\n\r\n    sizeString = sizeCode == '-' ? '' : '_' + sizeCode;\r\n    return 'https://farm' + farm + '.staticflickr.com/' + server + '/' + id + '_' + secretString + sizeString + '.jpg';\r\n};\r\n\r\nEventgallery.SizeCalculator.prototype.getSize = function (width, height, ratio) {\r\n\t\r\n    var googleWidth = this.options.availableSizes[0];\r\n\t\r\n\tfor(var index=0; index < this.options.availableSizes.length; index++) {\r\n\t\tvar item = \tthis.options.availableSizes[index];\r\n    \tvar widthOkay;\r\n        var heightOkay;\r\n        \r\n        if (googleWidth > this.options.availableSizes[0]){\r\n        \tbreak;\r\n        }\r\n        \r\n        var lastItem = index == this.options.availableSizes.length - 1;\r\n\r\n        if (ratio >= 1) {\r\n            widthOkay = item > width;\r\n            heightOkay = item / ratio > height;\r\n\r\n            if ((widthOkay && heightOkay) || lastItem) {\r\n                googleWidth = item;\r\n            }\r\n        } else {\r\n            heightOkay = item > height;\r\n            widthOkay = item * ratio > width;\r\n\r\n            if ((widthOkay && heightOkay) || lastItem) {\r\n                googleWidth = item;\r\n            }\r\n        }\r\n    }\r\n\t\r\n    return googleWidth;\r\n};\r\n\r\n    /**\r\n     * returns the minimum values for height and width to fill the given box size.\r\n     * @param boxWidth\r\n     * @param boxHeight\r\n     * @param originalWidth\r\n     * @param originalHeight\r\n     */\r\n    Eventgallery.SizeCalculator.prototype.getMinSizes = function (boxWidth, boxHeight, originalWidth, originalHeight) {\r\n\r\n\r\n          let ratio = originalWidth / originalHeight;\r\n\r\n          let height, width;\r\n\r\n          if (originalWidth > originalHeight) {\r\n              if (boxWidth > boxHeight) {\r\n                  width = boxWidth;\r\n                  height = boxWidth / ratio;\r\n                  if (height < boxHeight) {\r\n                      height = boxHeight;\r\n                      width = boxHeight * ratio;\r\n                  }\r\n              } else {\r\n                  height = boxHeight;\r\n                  width = boxHeight * ratio;\r\n                  if (width < boxWidth) {\r\n                      width = boxWidth;\r\n                      height = boxHeight * ratio;\r\n                  }\r\n              }\r\n          } else {\r\n              if (boxWidth > boxHeight) {\r\n                  width = boxWidth;\r\n                  height = boxWidth / ratio;\r\n                  if (height < boxHeight) {\r\n                      height = boxHeight;\r\n                      width = boxHeight * ratio;\r\n                  }\r\n              } else {\r\n                  height = boxHeight;\r\n                  width = boxHeight * ratio;\r\n                  if (width < boxWidth) {\r\n                      width = boxWidth;\r\n                      height = boxWidth / ratio;\r\n                  }\r\n              }\r\n          }\r\n\r\n          return {width: Math.ceil(width), height: Math.ceil(height)};\r\n    };\r\n\r\n})(Eventgallery);   ","(function(Eventgallery, jQuery){\r\n\r\n\tEventgallery.DownloadButton = class {\r\n\t\tstatic download(e, href, download) {\r\n\t\t\tlet a = document.createElement('a')\r\n\t\t\ta.href = href\r\n\t\t\ta.download = download\r\n\t\t\tdocument.body.appendChild(a)\r\n\t\t\ta.click()\r\n\t\t\tdocument.body.removeChild(a)\r\n\t\t}\r\n\t}\r\n\r\n\tEventgallery.ClickableButton = class {\r\n\t\tstatic click(e, href) {\r\n\t\t\tdocument.location.href = href;\r\n\t\t}\r\n\t}\r\n\r\n\tEventgallery.SocialShareButton = class {\r\n\t\tstatic openShareDialog(e) {\r\n\r\n\t\t\te.preventDefault();\r\n\t\t\te.stopPropagation();\r\n\r\n\t\t\tvar link = jQuery(e.target);\r\n\t\t\tif (!link.attr('data-link')) {\r\n\t\t\t\tlink = link.parent('[data-link]');\r\n\t\t\t}\r\n\r\n\t\t\tvar id = 'id_' + Math.ceil(Math.random()*10000000);\r\n\r\n\t\t\tvar targetPos = link.offset();\r\n\t\t\tvar myDiv = jQuery('<div><i class=\"egfa egfa-2x egfa-cog egfa-spin\"></i></div>');\r\n\t\t\tmyDiv.attr('id', id);\r\n\t\t\tmyDiv.addClass('social-sharing-toolbox');\r\n\r\n\t\t\tmyDiv.css( {\r\n\t\t\t\t'opacity': '1 !important',\r\n\t\t\t\t'position': 'absolute',\r\n\t\t\t\t'top': targetPos.top-10,\r\n\t\t\t\t'left': targetPos.left-10\r\n\t\t\t});\r\n\r\n\t\t\tjQuery('body').append(myDiv);\r\n\r\n\t\t\tmyDiv.fadeIn();\r\n\r\n\t\t\tmyDiv.load(link.attr('data-link'));\r\n\r\n\t\t\tvar timer = null;\r\n\r\n\t\t\tvar closeFunction = function(){\r\n\t\t\t\tmyDiv.fadeOut(300, function() {\r\n\t\t\t\t\tjQuery(this).remove();\r\n\t\t\t\t});\r\n\t\t\t\tjQuery(document).off('touchend click', closeFunction2);\r\n\t\t\t};\r\n\r\n\t\t\tmyDiv.mouseleave( function(){\r\n\t\t\t\ttimer = window.setTimeout(closeFunction, 1000);\r\n\t\t\t});\r\n\r\n\t\t\tmyDiv.mouseenter( function() {\r\n\t\t\t\twindow.clearTimeout(timer);\r\n\t\t\t});\r\n\r\n\t\t\t// this method is used to close the sharing windows if we click somewhere else.\r\n\t\t\tvar closeFunction2 = function(e) {\r\n\t\t\t\tif (e.target.id != id && jQuery(e.target).parents('#' + id).length === 0) {\r\n\t\t\t\t\tcloseFunction();\r\n\t\t\t\t}\r\n\t\t\t};\r\n\r\n\t\t\tjQuery(document).on('touchend click', closeFunction2);\r\n\r\n\t\t}\r\n\t};\r\n\r\n\tjQuery( document ).ready(function() {\r\n\r\n\r\n\t\tjQuery(document).on('touchend click', '.social-share-button-close', function(e) {\r\n\t\t\te.preventDefault();\r\n\t\t\tvar myDivs = jQuery(e.target).parents('.social-sharing-toolbox');\r\n\t\t\tmyDivs.fadeOut(300, function() {\r\n\t\t\t\tjQuery(this).remove();\r\n\t\t\t});\r\n\t\t});\r\n\r\n\r\n        let elements = document.querySelectorAll('.social-share-button-open');\r\n        for (let i=0; i<elements.length;i++) {\r\n            elements[i].addEventListener(\"click\", (e) => {\r\n\t\t\t\tEventgallery.SocialShareButton.openShareDialog(e);\r\n            }, true);\r\n        }\r\n\r\n\r\n\t\telements = document.querySelectorAll('.eg-download');\r\n\t\tfor (let i=0; i<elements.length;i++) {\r\n\t\t\tlet element = elements[i];\r\n\t\t\tlet href = element.getAttribute('data-href');\r\n\t\t\tlet download = element.getAttribute('data-download');\r\n\r\n\t\t\tif (download != null) {\r\n\t\t\t\telement.addEventListener(\"click\", (e) => {\r\n\t\t\t\t\tEventgallery.DownloadButton.download(e, href, download);\r\n\t\t\t\t}, true);\r\n\t\t\t} else {\r\n\t\t\t\telement.addEventListener(\"click\", (e) => {\r\n\t\t\t\t\tEventgallery.ClickableButton.click(e, href);\r\n\t\t\t\t}, true);\r\n\t\t\t}\r\n\t\t}\r\n\r\n    });\r\n})(Eventgallery, Eventgallery.jQuery);\r\n","(function(Eventgallery, jQuery){\r\n\r\n    /**\r\n     * Formats a list of images to appear square sized. This class is doing something like the Grid layout for events.\r\n     * @param newOptions\r\n     * @constructor\r\n     */\r\n    Eventgallery.SquareList = function(newOptions) {\r\n        Eventgallery.Imagelist.call(this, newOptions);\r\n    };\r\n\r\n    Eventgallery.SquareList.prototype = new Eventgallery.Imagelist();\r\n    Eventgallery.SquareList.prototype.constructor = Eventgallery.SquareList;\r\n\r\n\r\n    Eventgallery.SquareList.prototype.processList = function() {\r\n        /* processes the image list*/\r\n        var width = this.width;\r\n        var currentObject = this;\r\n        jQuery.each(this.images, function () {\r\n            this.setSize(width, width);\r\n        });\r\n    };\r\n\r\n})(Eventgallery, Eventgallery.jQuery);","(function(Eventgallery, jQuery){\r\n\r\n// create a tile layout and centers images in a tile\r\nEventgallery.TilesCollection = function(newOptions) {\r\n    this.options = {\r\n        tiles: jQuery('#events-tiles .event'),\r\n        tilesContainer: jQuery('#events-tiles .event-tiles')\r\n    };\r\n\t\r\n \tthis.options = Eventgallery.Tools.mergeObjects(this.options, newOptions);\r\n    this.tiles = this.options.tiles;\r\n    this.tilesContainer = this.options.tilesContainer;\r\n\t\r\n};\r\n\r\nEventgallery.TilesCollection.prototype.calculate = function() {\r\n\t\tvar i;\r\n\t\tvar currentObject = this;\r\n    \tvar tilesPerRow = 1;\r\n        var tile = jQuery(this.tiles[0]);\r\n    \t // reset grid to support resize and media queries\r\n        jQuery.each(this.tiles, function(index, tile) {\r\n            jQuery(tile).css( {\r\n                'visibility' : 'hidden',\r\n                'position' : 'static',\r\n                'float' : 'left'\r\n            });\r\n        });\r\n\r\n        // calculate tiles per row    \r\n        var y = tile.position().top;\r\n\r\n\r\n        for(i=1; i<this.tiles.length; i++) {\r\n            if (jQuery(this.tiles[i]).position().top != y) {\r\n                break;\r\n            }\r\n            tilesPerRow++;\r\n\r\n        }\r\n\r\n        // create array of height values for the columns\r\n        var columnHeight = [];\r\n        for (i=0; i<tilesPerRow; i++) {\r\n            columnHeight.push(0);\r\n        }\r\n\r\n        var columnWidth = tile.outerWidth();\r\n\r\n        jQuery.each(this.tiles, function(index, tile) {\r\n            var $tile = jQuery(tile);\r\n            $tile.data('height', $tile.outerHeight());\r\n        });\r\n\r\n        jQuery.each(this.tiles, function(index, tile) {\r\n\r\n            var $tile =  jQuery(tile),\r\n                smallestColumn = currentObject.getSmallestColumn(columnHeight);\r\n\r\n            $tile.css({\r\n                'left' : smallestColumn * columnWidth,\r\n                'top' : columnHeight[smallestColumn]\r\n            });\r\n\r\n            columnHeight[smallestColumn] = columnHeight[smallestColumn] + $tile.data('height');\r\n        });\r\n        \r\n        jQuery.each(this.tiles, function(index, tile) {\r\n            jQuery(tile).css({\r\n                'visibility' : 'visible',\r\n                'position' : 'absolute',\r\n                'float' : 'none'\r\n            });\r\n        });\r\n\r\n        jQuery(this.tilesContainer).css('height', columnHeight[this.getHighestColumn(columnHeight)]);\r\n\r\n};\r\n    \r\n/* \r\n* returns the position of the smallest value in the array\r\n*/\t\r\nEventgallery.TilesCollection.prototype.getSmallestColumn = function(columnHeight) {\r\n\r\n    var smallestColumnValue = columnHeight[0];\r\n    var smallestColumnNumber = 0;\r\n    \r\n    for(var i=0; i<columnHeight.length; i++) {\r\n        if (smallestColumnValue>columnHeight[i]) {\r\n            smallestColumnValue=columnHeight[i];\r\n            smallestColumnNumber = i;\r\n        }\r\n    \r\n    }\r\n    return smallestColumnNumber;\r\n\r\n};\r\n    \r\n/* \r\n* returns the position of the highest value in the array\r\n*/\r\nEventgallery.TilesCollection.prototype.getHighestColumn = function(columnHeight) {\r\n\r\n    var columnValue = columnHeight[0];\r\n    var columnNumber = 0;\r\n    \r\n    for(var i=0; i<columnHeight.length; i++) {\r\n        if (columnValue<columnHeight[i]) {\r\n            columnValue=columnHeight[i];\r\n            columnNumber = i;\r\n        }\r\n    \r\n    }\r\n    return columnNumber;\r\n\r\n};\r\n\r\n})(Eventgallery, Eventgallery.jQuery);   ","(function(Eventgallery, jQuery){\r\n/**\r\n * Touch navigation\r\n */\r\n\r\nEventgallery.Touch = function(newOptions) {\r\n\r\n    this.options = {\r\n    };\r\n    this.options = Eventgallery.Tools.mergeObjects(this.options, newOptions);\r\n};\r\n\r\nEventgallery.Touch.removeTouch = function (elementSelector) {\r\n    jQuery( elementSelector ).unbind( 'touchstart');\r\n    jQuery( elementSelector ).unbind( 'touchmove');\r\n    jQuery( elementSelector ).unbind( 'touchend');\r\n};\r\n\r\nEventgallery.Touch.addTouch = function (elementSelector, leftAction, rightAction, tabAction, allowScrolling) {\r\n\r\n    var index,\r\n        hDistance,\r\n        vDistance,\r\n        hDistanceLast,\r\n        vDistanceLast,\r\n        hDistancePercent,\r\n        vSwipe = false,\r\n        hSwipe = false,\r\n        hSwipMinDistance = 10,\r\n        vSwipMinDistance = 50,\r\n        startCoords = {},\r\n        endCoords = {},\r\n        winWidth = window.innerWidth ? window.innerWidth : $( window ).width(),\r\n        winHeight = window.innerHeight ? window.innerHeight : $( window ).height();\r\n\r\n    jQuery( elementSelector ).bind( 'touchstart', function( event ) {\r\n\r\n        jQuery( this ).addClass( 'touching' );\r\n\r\n        endCoords = event.originalEvent.targetTouches[0];\r\n        startCoords.pageX = event.originalEvent.targetTouches[0].pageX;\r\n        startCoords.pageY = event.originalEvent.targetTouches[0].pageY;\r\n\r\n\r\n\r\n        jQuery( '.touching' ).bind( 'touchmove',function( event ) {\r\n            if (allowScrolling !== true) {\r\n                event.preventDefault();\r\n                event.stopPropagation();\r\n            }\r\n            endCoords = event.originalEvent.targetTouches[0];\r\n\r\n            if ( ! hSwipe ) {\r\n                vDistanceLast = vDistance;\r\n                vDistance = endCoords.pageY - startCoords.pageY;\r\n                if ( Math.abs( vDistance ) >= vSwipMinDistance || vSwipe ) {\r\n                    vSwipe = true;\r\n                }\r\n            }\r\n\r\n            hDistanceLast = hDistance;\r\n            hDistance = endCoords.pageX - startCoords.pageX;\r\n            hDistancePercent = hDistance * 100 / winWidth;\r\n\r\n            if ( ! hSwipe && ! vSwipe && Math.abs( hDistance ) >= hSwipMinDistance ) {\r\n                hSwipe = true;\r\n            }\r\n\r\n        } );\r\n\r\n        return allowScrolling===true;\r\n\r\n    } ).bind( 'touchend',function( event ) {\r\n\r\n        event.preventDefault();\r\n        event.stopPropagation();\r\n\r\n        vDistance = endCoords.pageY - startCoords.pageY;\r\n        hDistance = endCoords.pageX - startCoords.pageX;\r\n        hDistancePercent = hDistance*100/winWidth;\r\n\r\n        // Swipe to bottom to close\r\n        if ( vSwipe ) {\r\n            vSwipe = false;\r\n            if ( Math.abs( vDistance ) >= 2 * vSwipMinDistance && Math.abs( vDistance ) > Math.abs( vDistanceLast ) ) {\r\n            } else {\r\n\r\n            }\r\n\r\n        } else if ( hSwipe ) {\r\n\r\n            hSwipe = false;\r\n\r\n            // swipeLeft\r\n            if( hDistance >= hSwipMinDistance && hDistance >= hDistanceLast) {\r\n                leftAction();\r\n\r\n                // swipeRight\r\n            } else if ( hDistance <= -hSwipMinDistance && hDistance <= hDistanceLast) {\r\n                rightAction();\r\n            }\r\n\r\n        } else { // Top and bottom bars have been removed on touchable devices\r\n            if (undefined !== tabAction)\r\n            {\r\n                tabAction();\r\n            } else {\r\n                jQuery(event.target).trigger(\"click\");\r\n            }\r\n        }\r\n\r\n\r\n        jQuery( '.touching' ).off( 'touchmove' ).removeClass( 'touching' );\r\n\r\n    } );\r\n\r\n};\r\n\r\n})(Eventgallery, Eventgallery.jQuery);\r\n","(function(jQuery) {\r\n\r\n\r\n}(eventgallery.jQuery));\r\n","import Polyfill from \"./Polyfill\";\r\n\r\n/**\r\n * this class is the basic modal of Event Gallery.\r\n */\r\nexport default class Overlay {\r\n\r\n    constructor() {\r\n        this.myDiv = null;\r\n        this.background = null;\r\n        this.$body = jQuery('body');\r\n        this.onClosed = undefined;\r\n        this.onLoad = undefined;\r\n        this.repositionTimer = null;\r\n        this.windowWidth = 0;\r\n    }\r\n\r\n    /**\r\n     * opens an overlay. The content can be a url or content.\r\n     * Url start with http or /\r\n     *\r\n     * @param dataUrl\r\n     */\r\n    openOverlay(dataUrl) {\r\n\r\n        this.myDiv = jQuery('<div id=\"eventgallery-overlay\"><i class=\"egfa egfa-2x egfa-cog egfa-spin\"></i></div>');\r\n        this.background = jQuery('<div id=\"eventgallery-overlay-background\"></div>');\r\n        this.background[0].onclick = () => {this.closeOverlay()};\r\n\r\n        this.myDiv.css( {\r\n            'opacity': '1 !important',\r\n            'position': 'absolute',\r\n            'max-width' : '100%'\r\n        });\r\n\r\n        this.$body.append(this.background);\r\n        this.$body.append(this.myDiv);\r\n\r\n        this.reposition(true);\r\n\r\n        if (dataUrl.startsWith('http') || dataUrl.startsWith('/')) {\r\n            Overlay._getRemoteData(dataUrl, (data) => {\r\n                this._addContent(data);\r\n            })\r\n        } else {\r\n            this._addContent(`<button class=\"btn-close-overlay eventgallery-close-overlay\"><i class=\"egfa egfa-2x egfa-times-circle\"></i></button>` + dataUrl);\r\n        }\r\n\r\n\r\n        jQuery(window).on('resize.overlay', () => {\r\n            this._setRositionTimer(false);\r\n        });\r\n    }\r\n\r\n    /**\r\n     * triggers a timeout for the repositioning. This will avoid too much flickering.\r\n     *\r\n     * @param force\r\n     * @private\r\n     */\r\n    _setRositionTimer(force) {\r\n        if (this.repositionTimer) {\r\n            clearTimeout(this.repositionTimer)\r\n        }\r\n        this.repositionTimer = setTimeout(() => this.reposition(force), 500);\r\n    }\r\n\r\n    static _getRemoteData(url, callback) {\r\n        jQuery.ajax({url: url}).done(callback);\r\n    }\r\n\r\n    /**\r\n     * moves the given content into the content overlay. Executes the onload method when finished.\r\n     *\r\n     * @param content\r\n     * @private\r\n     */\r\n    _addContent(content) {\r\n        this.myDiv.html(content);\r\n\r\n        let elements = this.myDiv[0].getElementsByClassName('eventgallery-close-overlay');\r\n        for(let i=0; i<elements.length;i++) {\r\n            elements[i].onclick = () => {this.closeOverlay()};\r\n        }\r\n\r\n        this.reposition(true);\r\n\r\n        if (this.onLoad !== undefined) {\r\n            this.onLoad();\r\n        }\r\n\r\n        document.dispatchEvent(Polyfill.createNewEvent('eventgallery-images-added'));\r\n    }\r\n\r\n    /**\r\n     * Closes the overlay and fires the onclose method if defined.\r\n     */\r\n    closeOverlay() {\r\n        jQuery(window).off('.overlay');\r\n        this.myDiv.fadeOut(150, () => {\r\n            jQuery(this.myDiv).remove();\r\n                this.background.fadeOut(200, () => {\r\n                    jQuery(this.background).remove();\r\n                    if (this.onClosed !== undefined) {\r\n                        this.onClosed();\r\n                    }\r\n            });\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Move the overlay to a good position.\r\n     *\r\n     * @param force defines if we force the reposition. If set to false, we do it only in case the width of the window changed.\r\n     */\r\n    reposition(force) {\r\n\r\n        if (this.repositionTimer !== null) {\r\n            clearTimeout(this.repositionTimer);\r\n        }\r\n\r\n        let maxWidth = jQuery(window).width();\r\n\r\n        if (!force) {\r\n            if (this.windowWidth === maxWidth) {\r\n                return;\r\n            }\r\n        }\r\n\r\n        this.windowWidth = maxWidth;\r\n\r\n        this.myDiv.hide();\r\n\r\n        this.myDiv.css( {\r\n            'top': 0,\r\n            'left': 0\r\n        });\r\n\r\n        let maxHeight = jQuery(window).height(),\r\n            width = this.myDiv.outerWidth(),\r\n            height = this.myDiv.outerHeight(),\r\n            scrollTop = jQuery(window).scrollTop(),\r\n            left = 0,\r\n            top = scrollTop;\r\n\r\n        if (maxWidth-width>0) {\r\n            left = (maxWidth - width) / 2;\r\n        }\r\n\r\n        if (maxHeight - height > 0) {\r\n            top = scrollTop + (maxHeight - height) / 2;\r\n        }\r\n\r\n        this.myDiv.css( {\r\n            'top': top,\r\n            'left': left\r\n        });\r\n\r\n        this.myDiv.show();\r\n    };\r\n}\r\n","import PhotoSwipeGallerySlide from \"./PhotoSwipeGallerySlide.js\";\r\nimport PhotoSwipe from \"../../photoswipe/photoswipe\";\r\nimport PhotoSwipeUIDefault from \"../../photoswipe/photoswipe-ui-default.js\";\r\nimport Polyfill from \"./Polyfill\";\r\nimport Overlay from \"./Overlay\";\r\nimport SlideShow from \"./SlideShow\";\r\n\r\nconst PSWP_CONTROLS_MAIN_ELEMENT_CLASS = 'pswp';\r\nconst PSW_CONTROLS_SLIDESHOW_BUTTON_ELEMENT_CLASS = 'pswp__button--playpause';\r\nconst PSW_HIDE_CLASS = 'pswp_hide';\r\n\r\nconst PSWP_CONTROLS = `<div class=\"pswp\" tabindex=\"-1\" role=\"dialog\" aria-hidden=\"true\">\r\n\t    \t<div class=\"pswp__bg\"></div>\r\n\t    \t<div class=\"pswp__scroll-wrap\">\r\n\t        <div class=\"pswp__container\">\r\n\t            <div class=\"pswp__item\"></div>\r\n\t            <div class=\"pswp__item\"></div>\r\n\t            <div class=\"pswp__item\"></div>\r\n\t        </div>\r\n\t        <div class=\"pswp__ui pswp__ui--hidden\">\r\n\t            <div class=\"pswp__top-bar\">\r\n\t                <div class=\"pswp__counter\"></div>\r\n\t                <button class=\"pswp__button pswp__button--close\" title=\"{{CLOSE}}\"></button>\r\n\t                <button class=\"pswp__button pswp__button--share\" title=\"{{SHARE}}\"></button>\r\n\t                <button class=\"pswp__button pswp__button--add2cart\" title=\"{{BUY}}\"></button>\r\n\t                <button class=\"pswp__button pswp__button--fs\" title=\"{{FULLSCREEN}}\"></button>\r\n\t                <button class=\"pswp__button pswp__button--playpause pswp_hide\" data-title-pause=\"{{PAUSESLIDESHOW}}\" data-title-play=\"{{PLAYSLIDESHOW}}\" title=\"{{PLAYSLIDESHOW}}\"></button>\r\n\t                <button class=\"pswp__button pswp__button--zoom\" title=\"{{ZOOM}}\"></button>\r\n\t                <div class=\"pswp__preloader\">\r\n\t                    <div class=\"pswp__preloader__icn\">\r\n\t                      <div class=\"pswp__preloader__cut\">\r\n\t                        <div class=\"pswp__preloader__donut\"></div>\r\n\t                      </div>\r\n\t                    </div>\r\n\t                </div>\r\n\t            </div>\r\n\t            <div class=\"pswp__share-modal pswp__share-modal--hidden pswp__single-tap\">\r\n\t                <div class=\"pswp__share-tooltip\"></div> \r\n\t            </div>\r\n\t            <button class=\"pswp__button pswp__button--arrow--left\" title=\"{{PREVIOUS}}\">\r\n\t            </button>\r\n\t            <button class=\"pswp__button pswp__button--arrow--right\" title=\"{{NEXT}}\">\r\n\t            </button>\r\n\t            <div class=\"pswp__caption\">\r\n\t                <div class=\"pswp__caption__center\"></div>\r\n\t            </div>\r\n\t          </div>\r\n\t        </div>\r\n\t\t</div>`;\r\n\r\nexport default class PhotoSwipeGallery {\r\n\r\n    constructor() {\r\n        this._isOpen = false;\r\n        this._gallery = null;\r\n    }\r\n\r\n    /**\r\n     * Finds all thumbnail containers on the page\r\n     * @returns {NodeListOf<Element>}\r\n     */\r\n    static getThumbnailContainers() {\r\n        let thumbnailContainer = document.querySelectorAll( 'a[data-eg-lightbox]' );\r\n\r\n        // don't add images from the clone slides. They are not clickable but will add duplicates to the lightbox => #818\r\n        return Array.from(thumbnailContainer).filter((tc => {\r\n            return !tc.parentNode.classList.contains('glide__slide--clone');\r\n        }))\r\n    }\r\n\r\n    static translate(input) {\r\n        let result = input;\r\n\r\n        if (window.EventGalleryLightboxConfiguration) {\r\n            result = result.replace('{{CLOSE}}', EventGalleryLightboxConfiguration.KEY_CLOSE);\r\n            result = result.replace('{{SHARE}}', EventGalleryLightboxConfiguration.KEY_SHARE);\r\n            result = result.replace('{{BUY}}', EventGalleryLightboxConfiguration.KEY_BUY);\r\n            result = result.replace('{{ZOOM}}', EventGalleryLightboxConfiguration.KEY_ZOOM);\r\n            result = result.replace('{{PREVIOUS}}', EventGalleryLightboxConfiguration.KEY_PREVIOUS);\r\n            result = result.replace('{{NEXT}}', EventGalleryLightboxConfiguration.KEY_NEXT);\r\n            result = result.replace('{{FULLSCREEN}}', EventGalleryLightboxConfiguration.KEY_FULLSCREEN);\r\n            result = result.replace('{{PLAYSLIDESHOW}}', EventGalleryLightboxConfiguration.KEY_PLAYSLIDESHOW);\r\n            result = result.replace('{{PAUSESLIDESHOW}}', EventGalleryLightboxConfiguration.KEY_PAUSESLIDESHOW);\r\n        }\r\n        return result;\r\n    }\r\n\r\n    /**\r\n     * append the photoswipe controls to the body element. If there is already a control element, we delete it.\r\n     */\r\n    static appendControlls() {\r\n        let controllElements = document.getElementsByClassName(PSWP_CONTROLS_MAIN_ELEMENT_CLASS);\r\n        for(let i=0;i<controllElements.length; i++) {\r\n            Polyfill.removeHtmlElementNode(controllElements[i]);\r\n        }\r\n        let div = document.createElement('div');\r\n        div.innerHTML = PhotoSwipeGallery.translate(PSWP_CONTROLS);\r\n        document.getElementsByTagName('body')[0].appendChild(div);\r\n    }\r\n\r\n    static closest(el, fn) {\r\n        return el && ( fn(el) ? el : PhotoSwipeGallery.closest(el.parentNode, fn) );\r\n    };\r\n\r\n    static parseHash() {\r\n        return PhotoSwipeGallery._parseHashString(window.location.hash.substring(1));\r\n    }\r\n\r\n    /**\r\n     * splits a hash value into its elements. returns an empty object if there is nothing in\r\n     */\r\n    static _parseHashString(hash) {\r\n        let params = {};\r\n\r\n        if(hash.length < 5) {\r\n            return params;\r\n        }\r\n\r\n        let vars = hash.split('&');\r\n        for (let i = 0; i < vars.length; i++) {\r\n            if(!vars[i]) {\r\n                continue;\r\n            }\r\n            let pair = vars[i].split('=');\r\n            if(pair.length < 2) {\r\n                continue;\r\n            }\r\n            params[pair[0]] = pair[1];\r\n        }\r\n\r\n        return params;\r\n    };\r\n\r\n    /**\r\n     *\r\n     * @param thumbnailContainer Node\r\n     * @returns PhotoSwipeGallerySlide\r\n     */\r\n    static parseThumbnailElement(thumbnailContainer) {\r\n        let item,\r\n            imgEl,\r\n            height,\r\n            width,\r\n            pid,\r\n            gid;\r\n\r\n        // include only element nodes\r\n        if(thumbnailContainer.nodeType !== 1) {\r\n            return null;\r\n        }\r\n\r\n        imgEl = thumbnailContainer.getElementsByTagName('IMG')[0];\r\n\r\n        if (imgEl === undefined) {\r\n            return null;\r\n        }\r\n\r\n        height = thumbnailContainer.getAttribute('data-height');\r\n        width = thumbnailContainer.getAttribute('data-width');\r\n        pid = thumbnailContainer.getAttribute('data-pid');\r\n        gid = thumbnailContainer.getAttribute('data-gid');\r\n\r\n        if (height === null || width === null || pid === null) {\r\n            return null;\r\n        }\r\n\r\n        // create slide object\r\n        item = new PhotoSwipeGallerySlide();\r\n        item.src = thumbnailContainer.getAttribute('href');\r\n        item.w = parseInt(width, 10);\r\n        item.h = parseInt(height, 10);\r\n\r\n        item.title = decodeURIComponent(thumbnailContainer.getAttribute('data-title'));\r\n\r\n        item.pid = parseInt(pid, 10);\r\n\r\n        item.gid = gid;\r\n\r\n        item.thumbnailContainer = thumbnailContainer; // save link to element for getThumbBoundsFn\r\n\r\n        return item;\r\n    };\r\n\r\n\r\n\r\n    /**\r\n     * searches the galleries for a thumbnail container and returns the\r\n     * Slide object\r\n     *\r\n     * @param thumbnailContainer\r\n     * @returns PhotoSwipeGallerySlide\r\n     */\r\n    getSlideBy(thumbnailContainer) {\r\n        let galleries = this.getGalleries();\r\n\r\n        for(let gallery of galleries.values()) {\r\n            for (let i = 0, l = gallery.length; i < l; i++) {\r\n                if (gallery[i].thumbnailContainer === thumbnailContainer) {\r\n                    return gallery[i];\r\n                }\r\n            }\r\n        }\r\n\r\n        return null;\r\n    }\r\n\r\n\r\n    /**\r\n     *\r\n     * @param slide PhotoSwipeGallerySlide\r\n     * @returns {*|number}\r\n     */\r\n    getIndexOfSlide(slide) {\r\n        let slides = this.getGalleries().get(slide.gid);\r\n        return slides.map(function(e) { return e.hash(); }).indexOf(slide.hash());\r\n    }\r\n\r\n    /**\r\n     * Parses all elements on the page so we know which triggers for a lightbox exist.\r\n     * Returns a mal containing the gallery and all elements\r\n     * @returns {Map<String, Array>}\r\n     */\r\n    getGalleries() {\r\n        let galleries = new Map(),\r\n            thumbnails = PhotoSwipeGallery.getThumbnailContainers();\r\n\r\n        for(let i=0; i<thumbnails.length; i++) {\r\n            let thumbnailContainer = thumbnails[i];\r\n            let gallery;\r\n\r\n            let item = PhotoSwipeGallery.parseThumbnailElement(thumbnailContainer);\r\n            if (item !== null) {\r\n                if (galleries.get(item.gid) === undefined) {\r\n                    galleries.set(item.gid, []);\r\n                }\r\n                gallery = galleries.get(item.gid);\r\n                gallery.push(item);\r\n                galleries.set(item.gid, gallery);\r\n            }\r\n        }\r\n\r\n        return galleries;\r\n    }\r\n\r\n    onThumbnailsClick(e) {\r\n        e = e || window.event;\r\n        e.preventDefault ? e.preventDefault() : e.returnValue = false;\r\n\r\n        let eTarget = e.target || e.srcElement;\r\n\r\n        // leave the icons for cart&sharing alone\r\n        let iconContainer = PhotoSwipeGallery.closest(eTarget, function(el) {\r\n            return (el.classList && el.classList.contains('eventgallery-icon-container'));\r\n        });\r\n        if (iconContainer !== null) {\r\n            return;\r\n        }\r\n\r\n        // find root element of slide\r\n        let clickedListItem = PhotoSwipeGallery.closest(eTarget, function(el) {\r\n            return (el.tagName && el.tagName.toUpperCase() === 'A');\r\n        });\r\n\r\n        if(!clickedListItem) {\r\n            return;\r\n        }\r\n\r\n        let slide = this.getSlideBy(clickedListItem);\r\n        let index = this.getIndexOfSlide(slide);\r\n        let slides = this.getGalleries().get(slide.gid);\r\n\r\n        if(index >= 0) {\r\n            // open PhotoSwipe if valid index found\r\n            this.openPhotoSwipe( index, slides );\r\n        }\r\n        return false;\r\n    };\r\n\r\n    /**\r\n     *\r\n     * @param index\r\n     * @param slides\r\n     * @param disableAnimation\r\n     * @param fromURL\r\n     */\r\n    openPhotoSwipe(index, slides, disableAnimation, fromURL) {\r\n        let pswpElement = document.querySelectorAll('.pswp')[0],\r\n            options;\r\n\r\n        if (slides === undefined || slides.length === 0 ) {\r\n            return;\r\n        }\r\n\r\n        // define options (if needed)\r\n        options = {\r\n            galleryPIDs:true,\r\n\r\n            // define gallery index (for URL)\r\n            galleryUID: slides[0].gid,\r\n\r\n            shareEl: slides[0].thumbnailContainer ? slides[0].thumbnailContainer.getElementsByClassName('social-share-button').length>0 : false,\r\n\r\n            add2cartEl: slides[0].thumbnailContainer ? slides[0].thumbnailContainer.getElementsByClassName('eventgallery-add2cart').length>0 : false,\r\n\r\n            getThumbBoundsFn: disableAnimation? null: function(index) {\r\n                // See Options -> getThumbBoundsFn section of documentation for more info\r\n                let slide = slides[index],\r\n                    thumbnail = slide.thumbnailContainer.getElementsByTagName('img')[0], // find thumbnail\r\n                    pageYScroll = window.pageYOffset || document.documentElement.scrollTop,\r\n                    rect = thumbnail.getBoundingClientRect();\r\n\r\n                let w = rect.width,\r\n                    h = rect.height,\r\n                    x,\r\n                    y,\r\n                    ratio = slide.w/slide.h;\r\n\r\n                if (slide.h > slide.w) {\r\n                    x = rect.left;\r\n                    y = rect.top - Math.ceil( ((w / ratio)-h) / 2) + pageYScroll;\r\n                } else {\r\n                    x = rect.left - Math.ceil( ((h * ratio)-w) / 2  );\r\n                    y = rect.top + pageYScroll;\r\n                    w = Math.ceil(h * ratio);\r\n                }\r\n                return {x, y, w};\r\n            },\r\n            overlayClass : Overlay\r\n\r\n\r\n\r\n        };\r\n\r\n        // disable close gestures to avoid trouble with the add2cart dialog.\r\n        options.pinchToClose = !options.add2cartEl;\r\n        options.closeOnVerticalDrag = !options.add2cartEl;\r\n        options.closeOnScroll = !options.add2cartEl;\r\n\r\n        if (window.EventGalleryLightboxConfiguration) {\r\n            if (parseInt(window.EventGalleryLightboxConfiguration.navigationFadeDelay) > 0) {\r\n                options.timeToIdle = parseInt(window.EventGalleryLightboxConfiguration.navigationFadeDelay);\r\n                options.timeToIdleOutside = parseInt(window.EventGalleryLightboxConfiguration.navigationFadeDelay);\r\n            }\r\n        }\r\n\r\n        // PhotoSwipe opened from URL\r\n        if(fromURL) {\r\n            if(options.galleryPIDs) {\r\n                index = parseInt(index, 10);\r\n                // parse real index when custom PIDs are used\r\n                // http://photoswipe.com/documentation/faq.html#custom-pid-in-url\r\n                for(let j = 0; j < slides.length; j++) {\r\n                    if(slides[j].pid === index) {\r\n                        options.index = j;\r\n                        break;\r\n                    }\r\n                }\r\n            } else {\r\n                // in URL indexes start from 1\r\n                options.index = parseInt(index, 10) - 1;\r\n            }\r\n        } else {\r\n            options.index = parseInt(index, 10);\r\n        }\r\n\r\n        // exit if index not found\r\n        if( isNaN(options.index) ) {\r\n            return;\r\n        }\r\n\r\n        if(disableAnimation) {\r\n            options.showAnimationDuration = 0;\r\n        }\r\n\r\n        // Pass data to PhotoSwipe and initialize it\r\n        this._gallery = new PhotoSwipe( pswpElement, PhotoSwipeUIDefault, slides, options);\r\n        this._gallery.init();\r\n\r\n        this.initSlideShow();\r\n\r\n        this._isOpen = true;\r\n        this._gallery.listen('close', () => {\r\n            return this._isOpen = false;\r\n        });\r\n\r\n        this._gallery.listen('afterChange', () => {\r\n            document.dispatchEvent(Polyfill.createNewEvent('eventgallery-lightbox-changed'));\r\n        });\r\n\r\n        document.dispatchEvent(Polyfill.createNewEvent('eventgallery-lightbox-opened'));\r\n    };\r\n\r\n    initPhotoSwipe() {\r\n        PhotoSwipeGallery.appendControlls();\r\n\r\n        this._registerClickEvents();\r\n\r\n        // Parse URL and open gallery if it contains #&pid=3&gid=1\r\n        let hashData = PhotoSwipeGallery.parseHash();\r\n        if(hashData.pid && hashData.gid) {\r\n            this.openPhotoSwipe( hashData.pid ,  this.getGalleries().get(hashData.gid), true, true );\r\n        }\r\n    };\r\n\r\n    _registerClickEvents() {\r\n        // loop through all gallery elements and bind events\r\n        let galleries = this.getGalleries();\r\n\r\n        for(let gallery of galleries.values()) {\r\n            for (let i = 0, l = gallery.length; i < l; i++) {\r\n                gallery[i].thumbnailContainer.onclick = (e) => {this.onThumbnailsClick(e)};\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * grabs the current slide from the lightbox\r\n     * @returns PhotoSwipeGallerySlide\r\n     */\r\n    getCurrentSlide() {\r\n        return this._gallery.currItem;\r\n    }\r\n\r\n    /**\r\n     * Returns the index if the current item in the lightbox\r\n     *\r\n     * @returns {int}\r\n     */\r\n    getCurrentIndex() {\r\n        return this._gallery.getCurrentIndex();\r\n    }\r\n\r\n    /**\r\n     * reinitiate the lightbox. Register the click events for existing and new elements.\r\n     */\r\n    reload() {\r\n        this._registerClickEvents();\r\n    }\r\n\r\n    /**\r\n     * reports back if the lightbox is currently open\r\n     * @returns {boolean}\r\n     */\r\n    isOpen() {\r\n        return this._isOpen;\r\n    }\r\n\r\n    /**\r\n     *\r\n     * @param afterChangeFunction\r\n     */\r\n    setAfterChangeEventListener(afterChangeFunction) {\r\n        this._gallery.listen('afterChange', afterChangeFunction);\r\n    }\r\n\r\n    /**\r\n     * jump to a specific slide.\r\n     * @param index\r\n     */\r\n    gotoSlide(index) {\r\n        this._gallery.goTo(index);\r\n    }\r\n\r\n    /**\r\n     * Adds a slide to the slide deck of the current _gallery\r\n     * @param slide PhotoSwipeGallerySlide\r\n     */\r\n    pushSlide(slide) {\r\n        this._gallery.items.push(slide);\r\n    }\r\n\r\n    /**\r\n     * removes a slide from the slide deck of the current _gallery\r\n     * @returns {PhotoSwipeGallerySlide}\r\n     */\r\n    popSlide() {\r\n        return this._gallery.items.pop();\r\n    }\r\n\r\n    /**\r\n     * reloads a slide after a modification\r\n     */\r\n    reloadSlide() {\r\n        this._gallery.invalidateCurrItems();\r\n        this._gallery.updateSize(true);\r\n    }\r\n\r\n    /**\r\n     * switch to the next slide\r\n     */\r\n    nextSlide() {\r\n        this._gallery.next();\r\n    }\r\n\r\n    /**\r\n     * Fire up the slide show stuff\r\n     */\r\n    initSlideShow() {\r\n        if (!window.EventGalleryLightboxConfiguration) {\r\n            return;\r\n        }\r\n\r\n        if (!window.EventGalleryLightboxConfiguration.doUseSlideshow) {\r\n\r\n            return;\r\n        }\r\n\r\n        document.getElementsByClassName(PSW_CONTROLS_SLIDESHOW_BUTTON_ELEMENT_CLASS)[0].classList.remove(PSW_HIDE_CLASS);\r\n\r\n        let slideShow = new SlideShow(this);\r\n        slideShow.setDelay(window.EventGalleryLightboxConfiguration.slideshowSpeed);\r\n\r\n        if (window.EventGalleryLightboxConfiguration.doUseAutoplay) {\r\n            slideShow.toggleSlideShowState();\r\n        }\r\n    }\r\n\r\n    /**\r\n     * make the listen function of PhotoSwipe available\r\n     *\r\n     * @param eventName\r\n     * @param fn\r\n     */\r\n    listen(eventName, fn) {\r\n        this._gallery.listen(eventName, fn);\r\n    }\r\n\r\n\r\n}\r\n\r\n\r\n\r\n/* override handling of Esc key to stop slideshow on first esc (note Esc to leave fullscreen never gets here) */\r\n\r\n/*$(document).keydown(function(e) {\r\n    if (e.altKey || e.ctrlKey || e.shiftKey || e.metaKey) return;\r\n    if ((e.key === \"Escape\" || e.which == 27 ) && !!lightBox) {\r\n        if (e.preventDefault)  e.preventDefault();\r\n        else  e.returnValue = false;\r\n        if (ssRunning) {\r\n            setSlideshowState(ssButtonClass, false);\r\n        } else {\r\n            lightBox.close();\r\n        }\r\n    }\r\n});\r\n*/\r\n","\r\nexport default class PhotoSwipeGallerySlide {\r\n    constructor() {\r\n        this.w = 0;\r\n        this.h = 0;\r\n        this.src = '';\r\n        this.title = '';\r\n        this.pid = '';\r\n        this.gid = '';\r\n        this.thumbnailContainer = null;\r\n        this.msrc= '';\r\n    }\r\n\r\n    hash() {\r\n        return this.gid + this.src;\r\n    }\r\n}\r\n","export default class Polyfill {\r\n    static removeHtmlElementNode(element) {\r\n            if (element.parentNode !== null)\r\n                element.parentNode.removeChild(element);\r\n    }\r\n\r\n    static createNewEvent(eventName) {\r\n        let event = null;\r\n\r\n        if(typeof(Event) === 'function') {\r\n            event = new Event(eventName);\r\n        }else{\r\n            event = document.createEvent('Event');\r\n            event.initEvent(eventName, true, true);\r\n        }\r\n        return event;\r\n    }\r\n}\r\n","import PhotoSwipeGallery from \"./PhotoSwipeGallery\";\r\n\r\n/**\r\n * Builds a slide show on top of PhotoSwipe.\r\n */\r\nexport default class SlideShow {\r\n\r\n    /**\r\n     *\r\n     * @param photoSwipeGallery PhotoSwipeGallery\r\n     */\r\n    constructor(photoSwipeGallery) {\r\n        this._photoSwipeGallery = photoSwipeGallery;\r\n        this._SlideShow_Running = false;\r\n        this._currentTimer = null;\r\n        this._SlideShow_Delay = 2000 /*ms*/;\r\n        this._SlideShow_Button = document.getElementsByClassName('pswp__button--playpause')[0];\r\n\r\n        let interactionHandler = (e) => {\r\n            e.preventDefault();\r\n            e.stopPropagation();\r\n            return this.toggleSlideShowState();\r\n        };\r\n\r\n        // take care about both click and touch.\r\n        this._SlideShow_Button.onclick = interactionHandler;\r\n        this._SlideShow_Button.ontouchstart = interactionHandler;\r\n\r\n        this._photoSwipeGallery.listen('afterChange', () => {\r\n            this._planNextSwitch(false);\r\n        });\r\n\r\n        this._photoSwipeGallery.listen('destroy', () => this._photoSwipeGallery=null);\r\n\r\n        this._photoSwipeGallery.listen('userInteractionHappened', () => this._stopSlideshow());\r\n        this._photoSwipeGallery.listen('mainScrollAnimStart', () => this._stopSlideshow());\r\n\r\n\r\n        this._adjustNavigation();\r\n    }\r\n\r\n    /**\r\n     *\r\n     * @param delay int\r\n     */\r\n    setDelay(delay) {\r\n        this._SlideShow_Delay = delay;\r\n    }\r\n\r\n    /**\r\n     * switches the slide show on/off depending on the current state\r\n     */\r\n    toggleSlideShowState() {\r\n\r\n        if (this._SlideShow_Running) {\r\n            this._stopSlideshow();\r\n        } else {\r\n            this._startSlideshow();\r\n        }\r\n    }\r\n\r\n    _stopSlideshow() {\r\n        this._SlideShow_Running = false;\r\n        this._adjustNavigation();\r\n    }\r\n\r\n    _startSlideshow() {\r\n        this._SlideShow_Running = true;\r\n        this._planNextSwitch(true);\r\n        this._adjustNavigation();\r\n    }\r\n\r\n    /**\r\n     * make sure the navigation displays the current slide show state.\r\n     */\r\n    _adjustNavigation() {\r\n        this._SlideShow_Button.classList.remove(this._SlideShow_Running ? \"play\" : \"pause\");\r\n        this._SlideShow_Button.classList.add(this._SlideShow_Running ? \"pause\" : \"play\");\r\n        this._SlideShow_Button.setAttribute('title', this._SlideShow_Running ? this._SlideShow_Button.getAttribute('data-title-pause'): this._SlideShow_Button.getAttribute('data-title-play'));\r\n    }\r\n\r\n    /**\r\n     * create the timeout for the next switch.\r\n     *\r\n     * @param isForTheFirstSwitch Boolean changes the switch time so the first switch can be faster\r\n     */\r\n    _planNextSwitch(isForTheFirstSwitch)  {\r\n        clearTimeout(this._currentTimer);\r\n        this._currentTimer = setTimeout(() => this._nextSlide(), isForTheFirstSwitch ? this._SlideShow_Delay / 2.0 :this._SlideShow_Delay);\r\n    }\r\n\r\n    /**\r\n     * change to the next slide\r\n     */\r\n    _nextSlide() {\r\n        if (this._photoSwipeGallery === null) {\r\n            return;\r\n        }\r\n\r\n        if (!this._SlideShow_Running) {\r\n            return;\r\n        }\r\n\r\n        this._photoSwipeGallery.nextSlide();\r\n    }\r\n}","export default class URLHelper {\r\n\r\n    constructor() {\r\n    }\r\n\r\n    /**\r\n     * splits a URL parameter like foo=bar&1=2 into a parameter map\r\n     *\r\n     * @param urlParameterString\r\n     * @returns {Map<any, any>}\r\n     */\r\n    static parseURLParameter(urlParameterString) {\r\n        let pairs = urlParameterString.split('&');\r\n        let parameters = new Map();\r\n\r\n        pairs.forEach(pair => {\r\n            let splittedPair = pair.split('=');\r\n            if (splittedPair.length === 2) {\r\n                parameters.set(splittedPair[0], splittedPair[1]);\r\n            }\r\n        });\r\n\r\n        return parameters;\r\n    }\r\n\r\n    /**\r\n     * returns a map of the query string of an full url\r\n     *\r\n     * @param urlSring\r\n     * @returns {URLSearchParams}\r\n     */\r\n    static getParameters(urlSring) {\r\n        let parts = urlSring.split('?');\r\n        if (parts.length < 2) {\r\n            return new Map();\r\n        }\r\n        let queryParts = parts[1].split('#');\r\n        return URLHelper.parseURLParameter(queryParts[0]);\r\n    }\r\n\r\n    /**\r\n     * returns the url from strings like \"url ('foobar.jpg')\"\r\n     *\r\n     * @param urlString\r\n     * @returns {*}\r\n     */\r\n    static extractBackgroudUrl(urlString) {\r\n        return urlString.replace(/(url\\(|\\)|\"|')/g, '');\r\n    }\r\n};\r\n\r\n\r\n","import EventsHandler from \"../utils/eventshandler\";\r\n\r\nexport default function (Glide, Components, Events) {\r\n    /**\r\n     * Instance of the binder for DOM Events.\r\n     *\r\n     * @type {EventsHandler}\r\n     */\r\n    const Binder = new EventsHandler();\r\n\r\n    /**\r\n     * Holds preventing status of anchors.\r\n     * If `true` redirection after click will be disabled.\r\n     *\r\n     * @private\r\n     * @type {Boolean}\r\n     */\r\n    let prevented = false;\r\n\r\n    let isSwiping = false;\r\n\r\n    const Anchors = {\r\n        /**\r\n         * Setups a initial state of anchors component.\r\n         *\r\n         */\r\n        mount () {\r\n            /**\r\n             * Holds collection of anchors elements.\r\n             *\r\n             * @private\r\n             * @type {HTMLCollection}\r\n             */\r\n            this._a = Components.Html.wrapper.querySelectorAll('a,span,img');\r\n\r\n            this.bind();\r\n            isSwiping = false;\r\n        },\r\n\r\n        /**\r\n         * Binds events to anchors inside a track.\r\n         *\r\n         */\r\n        bind () {\r\n            Binder.on('click', Components.Html.wrapper, this.click, true)\r\n        },\r\n\r\n        /**\r\n         * Unbinds events attached to anchors inside a track.\r\n         *\r\n         */\r\n        unbind () {\r\n            Binder.off('click', Components.Html.wrapper)\r\n        },\r\n\r\n        /**\r\n         * Handler for click event. Prevents clicks when glide is in `prevent` status.\r\n         *\r\n         * @param  {Object} event\r\n         */\r\n        click (event) {\r\n            if (prevented) {\r\n                event.stopPropagation();\r\n                event.preventDefault()\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Detaches anchors click event inside glide.\r\n         *\r\n         * @return {self}\r\n         */\r\n        detach () {\r\n            prevented = true;\r\n\r\n            return this\r\n        },\r\n\r\n        /**\r\n         * Attaches anchors click events inside glide.\r\n         *\r\n         * @return {self}\r\n         */\r\n        attach () {\r\n            prevented = false;\r\n\r\n            return this\r\n        }\r\n    };\r\n\r\n    Object.defineProperty(Anchors, 'items', {\r\n        /**\r\n         * Gets collection of the arrows HTML elements.\r\n         *\r\n         * @return {HTMLElement[]}\r\n         */\r\n        get () {\r\n            return Anchors._a\r\n        }\r\n    });\r\n\r\n    /**\r\n     * Detach anchors inside slides:\r\n     * - on swiping, so they won't redirect to its `href` attributes\r\n     */\r\n    Events.on('swipe.move', () => {\r\n        Anchors.detach();\r\n    });\r\n\r\n    /**\r\n     * Attach anchors inside slides:\r\n     * - after swiping and transitions ends, so they can redirect after click again\r\n     */\r\n    Events.on('swipe.end', () => {\r\n        Components.Transition.after(() => {\r\n            Anchors.attach()\r\n        });\r\n    });\r\n\r\n    /**\r\n     * Unbind anchors inside slides:\r\n     * - on destroying, to bring anchors to its initial state\r\n     */\r\n    Events.on('destroy', () => {\r\n        Anchors.attach();\r\n        Anchors.unbind();\r\n        Binder.destroy()\r\n    });\r\n\r\n    return Anchors\r\n}\r\n","import CamelCaseConverter from \"../utils/camelCaseConverter\";\r\n\r\nconst prefix = \"data-slider-\";\r\n\r\nexport default class SliderOptions {\r\n\r\n    constructor(element) {\r\n        this.element = element;\r\n        this.options = Object.assign({\r\n            autoplay: false,\r\n            slidesElementsSelector: '',\r\n            numberOfRowsPerSlide: 1,\r\n            showNav: 'true',\r\n        }, SliderOptions._parseOptions(element));\r\n    }\r\n\r\n\r\n    /**\r\n     *\r\n     * @param element HTMLElement\r\n     * @private\r\n     */\r\n    static _parseOptions(element) {\r\n        let options = {};\r\n\r\n        let attributes = element.attributes;\r\n        for (let i =0; i< attributes.length; i++) {\r\n            if (attributes[i].name.indexOf(prefix) === 0) {\r\n                options[CamelCaseConverter.toCamelCase(attributes[i].name.replace(prefix,''))] = attributes[i].value;\r\n            }\r\n        }\r\n\r\n        return options;\r\n    }\r\n\r\n    getAutoPlay() {\r\n\r\n        if (this.options.autoplay === false) {\r\n            return false;\r\n        }\r\n        return parseInt(this.options.autoplay);\r\n    }\r\n\r\n    getSlidesElementsSelector() {\r\n        return this.options.slidesElementsSelector;\r\n    }\r\n\r\n    doShowNav() {\r\n        return this.options.showNav === 'true';\r\n    }\r\n\r\n    getNumberOfRowsPerSlide() {\r\n        return parseInt(this.options.numberOfRowsPerSlide);\r\n    }\r\n}\r\n","import Anchor from \"../glide_modules/anchor\"\r\nimport Glide, { Controls, Breakpoints, Swipe, Autoplay, Images  } from '@glidejs/glide/dist/glide.modular.esm'\r\nimport SliderTransformator from \"./SliderTransformator\";\r\nimport SliderOptions from \"./SliderOptions\";\r\nimport ElementSize from \"../utils/ElementSize\";\r\n\r\nexport default class SliderStarter {\r\n\r\n    constructor(sourceGroupElement) {\r\n        this.sourceGroupElement = sourceGroupElement;\r\n        this.sliderTransformator = null;\r\n    }\r\n\r\n    start() {\r\n\r\n        this.sliderOptions = SliderStarter._loadOptions(this.sourceGroupElement);\r\n\r\n        let sourceElementSelector = this.sliderOptions.getSlidesElementsSelector();\r\n        let autoplay = this.sliderOptions.getAutoPlay();\r\n        let doShowNav = this.sliderOptions.doShowNav();\r\n        let numberOfItemsPerSlide = ElementSize.calclateNumberOfFittingItemsPerSlide(this.sourceGroupElement, this.sourceGroupElement.querySelector(sourceElementSelector), this.sliderOptions.getNumberOfRowsPerSlide());\r\n\r\n        if (null == this.sliderTransformator) {\r\n            this.sliderTransformator = new SliderTransformator(this.sourceGroupElement, sourceElementSelector, doShowNav);\r\n        }\r\n        let rootElement = this.sliderTransformator.transform(numberOfItemsPerSlide);\r\n\r\n        if (rootElement === null) {\r\n            return;\r\n        }\r\n\r\n        let lazyLoadOptions = {container: jQuery(rootElement)};\r\n        new Eventgallery.Lazyload(lazyLoadOptions);\r\n\r\n        let glide = new Glide(rootElement, {\r\n            type: 'carousel',\r\n            perView: 1,\r\n            gap: 15,\r\n            keyboard: false,\r\n            autoplay: autoplay\r\n        });\r\n\r\n        glide.mount({ Swipe, Controls, Breakpoints, Autoplay, Anchor, Images  });\r\n\r\n    }\r\n\r\n    static _loadOptions(element) {\r\n        return new SliderOptions(element);\r\n    }\r\n\r\n\r\n}\r\n","import Polyfill from \"../Polyfill\";\r\n\r\nconst sliderRootSelector = '.glide';\r\nconst sliderGroupSelector = '.glide__slides';\r\nconst basicMarkup = `\r\n<div class=\"glide\">\r\n    <div class=\"glide__track\" data-glide-el=\"track\">\r\n        <ul class=\"glide__slides\">            \r\n        </ul>\r\n    </div>\r\n    <div class=\"glide__arrows\" data-glide-el=\"controls\">\r\n        <button class=\"glide__arrow glide__arrow--left\" data-glide-dir=\"<\">prev</button>\r\n        <button class=\"glide__arrow glide__arrow--right\" data-glide-dir=\">\">next</button>\r\n    </div>\r\n</div>`;\r\n\r\nexport default class SliderTransformator {\r\n\r\n    constructor(sourceGroupElement, sourceElementSelector, doShowNav) {\r\n        this.elementSelector = sourceElementSelector;\r\n        this.sourceGroupElement = sourceGroupElement;\r\n        this.doShowNav = doShowNav;\r\n        this.sourceElements = this.getSourceElements();\r\n    }\r\n\r\n    getSourceElements() {\r\n        if (this.sourceGroupElement === null) {\r\n            return null;\r\n        }\r\n        return this.sourceGroupElement.querySelectorAll(this.elementSelector);\r\n    }\r\n\r\n    transform(numberOfItemsPerSlide) {\r\n        if (this.sourceGroupElement === null || this.sourceElements === null) {\r\n            return null;\r\n        }\r\n\r\n        if (this.sourceElements.length === 0) {\r\n            return null;\r\n        }\r\n        // cleanup\r\n        let sliderRoot = this.sourceGroupElement.querySelector(sliderRootSelector);\r\n\r\n        if (sliderRoot !== null) {\r\n            sliderRoot.remove();\r\n        }\r\n        // transformation\r\n\r\n        let sliderMarkup = document.createRange().createContextualFragment(basicMarkup);\r\n        if (!this.doShowNav) {\r\n\r\n            let controlElement = sliderMarkup.querySelector('.glide__arrows');\r\n\r\n            Polyfill.removeHtmlElementNode(controlElement);\r\n        }\r\n        let sliderGroupElement = sliderMarkup.querySelector(sliderGroupSelector);\r\n        let currentSliderElement = null;\r\n\r\n        for(let index=0; index<this.sourceElements.length; index++) {\r\n            let element = this.sourceElements[index];\r\n            if (index % numberOfItemsPerSlide === 0) {\r\n                currentSliderElement = document.createElement('li');\r\n                currentSliderElement.className = 'glide__slide';\r\n                sliderGroupElement.appendChild(currentSliderElement);\r\n            }\r\n            currentSliderElement.appendChild(element);\r\n        }\r\n\r\n        this.sourceGroupElement.appendChild(sliderMarkup);\r\n\r\n        return this.sourceGroupElement.querySelector(sliderRootSelector);\r\n\r\n    }\r\n\r\n}\r\n","export default class ElementSize {\r\n    /**\r\n     *\r\n     * @param element\r\n     * @returns float\r\n     */\r\n    static getOuterWidth(element) {\r\n        var domRect = element.getBoundingClientRect();\r\n        let computedStyle = getComputedStyle(element);\r\n        let marginLeft = parseFloat(computedStyle.marginLeft);\r\n        let marginRight = parseFloat(computedStyle.marginRight);\r\n        return domRect.width + marginLeft + marginRight;\r\n    }\r\n\r\n    /**\r\n     * Tries to find out, how many elements we can fit into the container so\r\n     * they do not wrap.\r\n     *\r\n     * @param containerElement\r\n     * @param element\r\n     * @param numberOfRows\r\n     * @returns {number}\r\n     */\r\n    static calclateNumberOfFittingItemsPerSlide(containerElement, element, numberOfRows) {\r\n\r\n        if (null == element || containerElement == null) {\r\n            return 1;\r\n        }\r\n\r\n        var domRect = containerElement.getBoundingClientRect();\r\n        let numberOfItemsPerSlide = Math.floor(domRect.width / ElementSize.getOuterWidth(element)) * numberOfRows;\r\n\r\n\r\n        if (numberOfItemsPerSlide < 1) {\r\n            numberOfItemsPerSlide = 1 * numberOfRows;\r\n        }\r\n\r\n        return numberOfItemsPerSlide;\r\n    }\r\n}\r\n","export default class CamelCaseConverter {\r\n\r\n    static toCamelCase(str) {\r\n        return str.replace(/-([a-z])/g, function (m, w) {\r\n            return w.toUpperCase();\r\n        });\r\n    }\r\n}\r\n","import {isString, isArray, isNodeList} from \"./units\";\r\n\r\nexport default class EventsHandler {\r\n    /**\r\n     * Construct a EventsHandler instance.\r\n     */\r\n    constructor (listeners = {}) {\r\n        this.listeners = listeners;\r\n    }\r\n\r\n    /**\r\n     * Adds events listeners to arrows HTML elements.\r\n     *\r\n     * @param  {String|Array} events\r\n     * @param  {NodeList|Element|Window|Document} el\r\n     * @param  {Function} closure\r\n     * @param  {boolean} capture\r\n     */\r\n    on (events, el, closure, capture = false) {\r\n        if (isString(events)) {\r\n            events = [events]\r\n        }\r\n\r\n        if (!isNodeList(el) && !isArray(el)) {\r\n            el = [el];\r\n        }\r\n\r\n        events.forEach((event)=> {\r\n            this.listeners[event] = {'closure': closure, 'capture': capture};\r\n\r\n            for (let i=0; i<el.length;i++) {\r\n                el[i].addEventListener(event, this.listeners[event].closure, this.listeners[event].capture)\r\n            }\r\n\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Removes event listeners from arrows HTML elements.\r\n     *\r\n     * @param  {String|Array} events\r\n     * @param  {NodeList|Element|Window|Document} el\r\n     */\r\n    off (events, el) {\r\n        if (isString(events)) {\r\n            events = [events]\r\n        }\r\n\r\n        if (!isNodeList(el) && !isArray(el)) {\r\n            el = [el];\r\n        }\r\n\r\n        events.forEach((event) => {\r\n            for (let i=0; i<el.length;i++) {\r\n                let listener = this.listeners[event];\r\n                if (listener === undefined) {\r\n                    continue;\r\n                }\r\n                el[i].removeEventListener(event, listener.closure, listener.capture)\r\n            }\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Destroy collected listeners.\r\n     *\r\n     */\r\n    destroy () {\r\n        delete this.listeners\r\n    }\r\n}\r\n","\r\n/**\r\n * Indicates whether the specified value is a string.\r\n *\r\n * @param  {*}   value\r\n * @return {Boolean}\r\n */\r\nexport function isString (value) {\r\n    return typeof value === 'string'\r\n}\r\n\r\nexport function isArray(value) {\r\n    return Array.isArray(value);\r\n}\r\n\r\nexport function isNodeList(value) {\r\n    return NodeList.prototype.isPrototypeOf(value);\r\n}\r\n","// extracted by mini-css-extract-plugin","// extracted by mini-css-extract-plugin","// extracted by mini-css-extract-plugin","// extracted by mini-css-extract-plugin","/*! PhotoSwipe Default UI - 4.1.2 - 2017-04-05\r\n* http://photoswipe.com\r\n* Copyright (c) 2017 Dmitry Semenov; */\r\n/**\r\n*\r\n* UI on top of main sliding area (caption, arrows, close button, etc.).\r\n* Built just using public methods/properties of PhotoSwipe.\r\n*\r\n*/\r\nexport default function(pswp, framework) {\r\n\r\n\tvar ui = this;\r\n\tvar _overlayUIUpdated = false,\r\n\t\t_controlsVisible = true,\r\n\t\t_fullscrenAPI,\r\n\t\t_controls,\r\n\t\t_captionContainer,\r\n\t\t_fakeCaptionContainer,\r\n\t\t_indexIndicator,\r\n\t\t_shareButton,\r\n\t\t_shareModal,\r\n\t\t_add2cartButton,\r\n\t\t_add2cartOverlay,\r\n\t\t_shareModalHidden = true,\r\n        _add2cartModalHidden = true,\r\n\t\t_initalCloseOnScrollValue,\r\n\t\t_isIdle,\r\n\t\t_listen,\r\n\r\n\t\t_loadingIndicator,\r\n\t\t_loadingIndicatorHidden,\r\n\t\t_loadingIndicatorTimeout,\r\n\r\n\t\t_galleryHasOneSlide,\r\n\r\n\t\t_options,\r\n\t\t_defaultUIOptions = {\r\n\t\t\tbarsSize: {top:44, bottom:'auto'},\r\n\t\t\tcloseElClasses: ['item', 'caption', 'zoom-wrap', 'ui', 'top-bar'],\r\n\t\t\ttimeToIdle: 4000,\r\n\t\t\ttimeToIdleOutside: 1000,\r\n\t\t\tloadingIndicatorDelay: 1000, // 2s\r\n\r\n\t\t\taddCaptionHTMLFn: function(item, captionEl /*, isFake */) {\r\n\t\t\t\tif(!item.title) {\r\n\t\t\t\t\tcaptionEl.children[0].innerHTML = '';\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t\tcaptionEl.children[0].innerHTML = item.title;\r\n\t\t\t\treturn true;\r\n\t\t\t},\r\n\r\n\t\t\tcloseEl:true,\r\n\t\t\tcaptionEl: true,\r\n\t\t\tfullscreenEl: true,\r\n\t\t\tzoomEl: true,\r\n\t\t\tshareEl: true,\r\n\t\t\tcounterEl: true,\r\n\t\t\tarrowEl: true,\r\n\t\t\tpreloaderEl: true,\r\n\r\n\t\t\ttapToClose: false,\r\n\t\t\ttapToToggleControls: true,\r\n\r\n\t\t\tclickToCloseNonZoomable: true,\r\n\r\n\t\t\tshareButtons: [\r\n\t\t\t\t{id:'facebook', label:'Share on Facebook', url:'https://www.facebook.com/sharer/sharer.php?u={{url}}'},\r\n\t\t\t\t{id:'twitter', label:'Tweet', url:'https://twitter.com/intent/tweet?text={{text}}&url={{url}}'},\r\n\t\t\t\t{id:'pinterest', label:'Pin it', url:'http://www.pinterest.com/pin/create/button/'+\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t'?url={{url}}&media={{image_url}}&description={{text}}'},\r\n\t\t\t\t{id:'download', label:'Download image', url:'{{raw_image_url}}', download:true}\r\n\t\t\t],\r\n\t\t\tgetImageURLForShare: function( /* shareButtonData */ ) {\r\n\t\t\t\treturn pswp.currItem.src || '';\r\n\t\t\t},\r\n\t\t\tgetPageURLForShare: function( /* shareButtonData */ ) {\r\n\t\t\t\treturn window.location.href;\r\n\t\t\t},\r\n\t\t\tgetTextForShare: function( /* shareButtonData */ ) {\r\n\t\t\t\treturn pswp.currItem.title || '';\r\n\t\t\t},\r\n\r\n\t\t\tindexIndicatorSep: ' / ',\r\n\t\t\tfitControlsWidth: 1200\r\n\r\n\t\t},\r\n\t\t_blockControlsTap,\r\n\t\t_blockControlsTapTimeout;\r\n\r\n\r\n\r\n\tvar _onControlsTap = function(e) {\r\n\t\t\tif(_blockControlsTap) {\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\r\n\r\n\t\t\te = e || window.event;\r\n\r\n\t\t\tif(_options.timeToIdle && _options.mouseUsed && !_isIdle) {\r\n\t\t\t\t// reset idle timer\r\n\t\t\t\t_onIdleMouseMove();\r\n\t\t\t}\r\n\r\n\r\n\t\t\tvar target = e.target || e.srcElement,\r\n\t\t\t\tuiElement,\r\n\t\t\t\tclickedClass = target.getAttribute('class') || '',\r\n\t\t\t\tfound;\r\n\r\n\t\t\tfor(var i = 0; i < _uiElements.length; i++) {\r\n\t\t\t\tuiElement = _uiElements[i];\r\n\t\t\t\tif(uiElement.onTap && clickedClass.indexOf('pswp__' + uiElement.name ) > -1 ) {\r\n\t\t\t\t\tuiElement.onTap();\r\n\t\t\t\t\tfound = true;\r\n\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif(found) {\r\n\t\t\t\tif(e.stopPropagation) {\r\n\t\t\t\t\te.stopPropagation();\r\n\t\t\t\t}\r\n\t\t\t\t_blockControlsTap = true;\r\n\r\n\t\t\t\t// Some versions of Android don't prevent ghost click event\r\n\t\t\t\t// when preventDefault() was called on touchstart and/or touchend.\r\n\t\t\t\t//\r\n\t\t\t\t// This happens on v4.3, 4.2, 4.1,\r\n\t\t\t\t// older versions strangely work correctly,\r\n\t\t\t\t// but just in case we add delay on all of them)\r\n\t\t\t\tvar tapDelay = framework.features.isOldAndroid ? 600 : 30;\r\n\t\t\t\t_blockControlsTapTimeout = setTimeout(function() {\r\n\t\t\t\t\t_blockControlsTap = false;\r\n\t\t\t\t}, tapDelay);\r\n\t\t\t}\r\n\r\n\t\t},\r\n\t\t_fitControlsInViewport = function() {\r\n\t\t\treturn !pswp.likelyTouchDevice || _options.mouseUsed || screen.width > _options.fitControlsWidth;\r\n\t\t},\r\n\t\t_togglePswpClass = function(el, cName, add) {\r\n\t\t\tframework[ (add ? 'add' : 'remove') + 'Class' ](el, 'pswp__' + cName);\r\n\t\t},\r\n\r\n\t\t// add class when there is just one item in the gallery\r\n\t\t// (by default it hides left/right arrows and 1ofX counter)\r\n\t\t_countNumItems = function() {\r\n\t\t\tvar hasOneSlide = (_options.getNumItemsFn() === 1);\r\n\r\n\t\t\tif(hasOneSlide !== _galleryHasOneSlide) {\r\n\t\t\t\t_togglePswpClass(_controls, 'ui--one-slide', hasOneSlide);\r\n\t\t\t\t_galleryHasOneSlide = hasOneSlide;\r\n\t\t\t}\r\n\t\t},\r\n\t\t_toggleShareModalClass = function() {\r\n\t\t\t_togglePswpClass(_shareModal, 'share-modal--hidden', _shareModalHidden);\r\n\t\t},\r\n\t\t_toggleShareModal = function() {\r\n\r\n\t\t\t_shareModalHidden = !_shareModalHidden;\r\n\r\n\r\n\t\t\tif(!_shareModalHidden) {\r\n\t\t\t\t_toggleShareModalClass();\r\n\t\t\t\tsetTimeout(function() {\r\n\t\t\t\t\tif(!_shareModalHidden) {\r\n\t\t\t\t\t\tframework.addClass(_shareModal, 'pswp__share-modal--fade-in');\r\n\t\t\t\t\t}\r\n\t\t\t\t}, 30);\r\n\t\t\t} else {\r\n\t\t\t\tframework.removeClass(_shareModal, 'pswp__share-modal--fade-in');\r\n\t\t\t\tsetTimeout(function() {\r\n\t\t\t\t\tif(_shareModalHidden) {\r\n\t\t\t\t\t\t_toggleShareModalClass();\r\n\t\t\t\t\t}\r\n\t\t\t\t}, 300);\r\n\t\t\t}\r\n\r\n\t\t\tif(!_shareModalHidden) {\r\n\t\t\t\t_updateShareURLs();\r\n\t\t\t}\r\n\t\t\treturn false;\r\n\t\t},\r\n        _toggleAdd2cartModal = function() {\r\n\r\n            _add2cartModalHidden = !_add2cartModalHidden;\r\n\r\n\r\n            if(!_add2cartModalHidden) {\r\n                if(_fullscrenAPI.isFullscreen()) {\r\n                    _fullscrenAPI.exit();\r\n                }\r\n                _add2cartOverlay = new _options.overlayClass();\r\n                _add2cartOverlay.onClosed = () => {\r\n\t\t\t\t\tif (!_add2cartModalHidden) {\r\n\t\t\t\t\t\t_toggleAdd2cartModal();\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n            } else {\r\n            \t_add2cartOverlay.closeOverlay();\r\n            }\r\n\r\n            if(!_add2cartModalHidden) {\r\n                _updateAdd2cartContent();\r\n            }\r\n            return false;\r\n        },\r\n\r\n\t\t_openWindowPopup = function(e) {\r\n\t\t\te = e || window.event;\r\n\t\t\tvar target = e.target || e.srcElement;\r\n\r\n\t\t\tpswp.shout('shareLinkClick', e, target);\r\n\r\n\t\t\tif(!target.href) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\r\n\t\t\tif( target.hasAttribute('download') ) {\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\r\n\t\t\twindow.open(target.href, 'pswp_share', 'scrollbars=yes,resizable=yes,toolbar=no,'+\r\n\t\t\t\t\t\t\t\t\t\t'location=yes,width=550,height=420,top=100,left=' +\r\n\t\t\t\t\t\t\t\t\t\t(window.screen ? Math.round(screen.width / 2 - 275) : 100)  );\r\n\r\n\t\t\tif(!_shareModalHidden) {\r\n\t\t\t\t_toggleShareModal();\r\n\t\t\t}\r\n\r\n\t\t\treturn false;\r\n\t\t},\r\n        /**\r\n         * EVENT GALLERY CUSTOMIZATION\r\n         * @private\r\n         */\r\n\t\t_updateShareURLs = function() {\r\n\t\t\tlet sharingButtons = pswp.currItem.thumbnailContainer.getElementsByClassName('social-share-button');\r\n\r\n\t\t\tif (sharingButtons.length > 0) {\r\n\t\t\t\tlet sharingButton = sharingButtons[0];\r\n\r\n                _shareModal.children[0].innerHTML = '<a><i class=\"egfa egfa-2x egfa-cog egfa-spin\"></i></a>';\r\n                Eventgallery.jQuery(_shareModal.children[0]).load(sharingButton.getAttribute('data-link'));\r\n            }\r\n\r\n\t\t\t_shareModal.children[0].onclick = (e) => {\r\n\r\n                if(!_shareModalHidden) {\r\n                    _toggleShareModal();\r\n                }\r\n\r\n\t\t\t}\r\n\t\t},\r\n        _updateAdd2cartContent = function() {\r\n            let add2cartButtons = pswp.currItem.thumbnailContainer.getElementsByClassName('eventgallery-add2cart');\r\n\r\n            if (add2cartButtons.length > 0) {\r\n                let add2cartButton = add2cartButtons[0];\r\n\t\t\t\tlet url = EventGalleryCartConfiguration.add2carturl + '&' + add2cartButton.getAttribute('data-id');\r\n                _add2cartOverlay.openOverlay(url);\r\n            }\r\n\r\n        },\r\n\t\t_hasCloseClass = function(target) {\r\n\t\t\tfor(var  i = 0; i < _options.closeElClasses.length; i++) {\r\n\t\t\t\tif( framework.hasClass(target, 'pswp__' + _options.closeElClasses[i]) ) {\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\t_idleInterval,\r\n\t\t_idleTimer,\r\n\t\t_idleIncrement = 0,\r\n\t\t_onIdleMouseMove = function() {\r\n\t\t\tclearTimeout(_idleTimer);\r\n\t\t\t_idleIncrement = 0;\r\n\t\t\tif(_isIdle) {\r\n\t\t\t\tui.setIdle(false);\r\n\t\t\t}\r\n\t\t},\r\n\t\t_onMouseLeaveWindow = function(e) {\r\n\t\t\te = e ? e : window.event;\r\n\t\t\tvar from = e.relatedTarget || e.toElement;\r\n\t\t\tif (!from || from.nodeName === 'HTML') {\r\n\t\t\t\tclearTimeout(_idleTimer);\r\n\t\t\t\t_idleTimer = setTimeout(function() {\r\n\t\t\t\t\tui.setIdle(true);\r\n\t\t\t\t}, _options.timeToIdleOutside);\r\n\t\t\t}\r\n\t\t},\r\n\t\t_setupFullscreenAPI = function() {\r\n\t\t\tif(_options.fullscreenEl && !framework.features.isOldAndroid) {\r\n\t\t\t\tif(!_fullscrenAPI) {\r\n\t\t\t\t\t_fullscrenAPI = ui.getFullscreenAPI();\r\n\t\t\t\t}\r\n\t\t\t\tif(_fullscrenAPI) {\r\n\t\t\t\t\tframework.bind(document, _fullscrenAPI.eventK, ui.updateFullscreen);\r\n\t\t\t\t\tui.updateFullscreen();\r\n\t\t\t\t\tframework.addClass(pswp.template, 'pswp--supports-fs');\r\n\t\t\t\t} else {\r\n\t\t\t\t\tframework.removeClass(pswp.template, 'pswp--supports-fs');\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\t_setupLoadingIndicator = function() {\r\n\t\t\t// Setup loading indicator\r\n\t\t\tif(_options.preloaderEl) {\r\n\r\n\t\t\t\t_toggleLoadingIndicator(true);\r\n\r\n\t\t\t\t_listen('beforeChange', function() {\r\n\r\n\t\t\t\t\tclearTimeout(_loadingIndicatorTimeout);\r\n\r\n\t\t\t\t\t// display loading indicator with delay\r\n\t\t\t\t\t_loadingIndicatorTimeout = setTimeout(function() {\r\n\r\n\t\t\t\t\t\tif(pswp.currItem && pswp.currItem.loading) {\r\n\r\n\t\t\t\t\t\t\tif( !pswp.allowProgressiveImg() || (pswp.currItem.img && !pswp.currItem.img.naturalWidth)  ) {\r\n\t\t\t\t\t\t\t\t// show preloader if progressive loading is not enabled,\r\n\t\t\t\t\t\t\t\t// or image width is not defined yet (because of slow connection)\r\n\t\t\t\t\t\t\t\t_toggleLoadingIndicator(false);\r\n\t\t\t\t\t\t\t\t// items-controller.js function allowProgressiveImg\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t_toggleLoadingIndicator(true); // hide preloader\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}, _options.loadingIndicatorDelay);\r\n\r\n\t\t\t\t});\r\n\t\t\t\t_listen('imageLoadComplete', function(index, item) {\r\n\t\t\t\t\tif(pswp.currItem === item) {\r\n\t\t\t\t\t\t_toggleLoadingIndicator(true);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\r\n\t\t\t}\r\n\t\t},\r\n\t\t_toggleLoadingIndicator = function(hide) {\r\n\t\t\tif( _loadingIndicatorHidden !== hide ) {\r\n\t\t\t\t_togglePswpClass(_loadingIndicator, 'preloader--active', !hide);\r\n\t\t\t\t_loadingIndicatorHidden = hide;\r\n\t\t\t}\r\n\t\t},\r\n\t\t_applyNavBarGaps = function(item) {\r\n\t\t\tvar gap = item.vGap;\r\n\r\n\t\t\tif( _fitControlsInViewport() ) {\r\n\r\n\t\t\t\tvar bars = _options.barsSize;\r\n\t\t\t\tif(_options.captionEl && bars.bottom === 'auto') {\r\n\t\t\t\t\tif(!_fakeCaptionContainer) {\r\n\t\t\t\t\t\t_fakeCaptionContainer = framework.createEl('pswp__caption pswp__caption--fake');\r\n\t\t\t\t\t\t_fakeCaptionContainer.appendChild( framework.createEl('pswp__caption__center') );\r\n\t\t\t\t\t\t_controls.insertBefore(_fakeCaptionContainer, _captionContainer);\r\n\t\t\t\t\t\tframework.addClass(_controls, 'pswp__ui--fit');\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif( _options.addCaptionHTMLFn(item, _fakeCaptionContainer, true) ) {\r\n\r\n\t\t\t\t\t\tvar captionSize = _fakeCaptionContainer.clientHeight;\r\n\t\t\t\t\t\tgap.bottom = parseInt(captionSize,10) || 44;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tgap.bottom = bars.top; // if no caption, set size of bottom gap to size of top\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tgap.bottom = bars.bottom === 'auto' ? 0 : bars.bottom;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// height of top bar is static, no need to calculate it\r\n\t\t\t\tgap.top = bars.top;\r\n\t\t\t} else {\r\n\t\t\t\tgap.top = gap.bottom = 0;\r\n\t\t\t}\r\n\t\t},\r\n\t\t_setupIdle = function() {\r\n\t\t\t// Hide controls when mouse is used\r\n\t\t\tif(_options.timeToIdle) {\r\n\t\t\t\t_listen('mouseUsed', function() {\r\n\r\n\t\t\t\t\tframework.bind(document, 'mousemove', _onIdleMouseMove);\r\n\t\t\t\t\tframework.bind(document, 'mouseout', _onMouseLeaveWindow);\r\n\r\n\t\t\t\t\t_idleInterval = setInterval(function() {\r\n\t\t\t\t\t\t_idleIncrement++;\r\n\t\t\t\t\t\tif(_idleIncrement === 2) {\r\n\t\t\t\t\t\t\tui.setIdle(true);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}, _options.timeToIdle / 2);\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t},\r\n\t\t_setupHidingControlsDuringGestures = function() {\r\n\r\n\t\t\t// Hide controls on vertical drag\r\n\t\t\t_listen('onVerticalDrag', function(now) {\r\n\t\t\t\tif(_controlsVisible && now < 0.95) {\r\n\t\t\t\t\tui.hideControls();\r\n\t\t\t\t} else if(!_controlsVisible && now >= 0.95) {\r\n\t\t\t\t\tui.showControls();\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\t// Hide controls when pinching to close\r\n\t\t\tvar pinchControlsHidden;\r\n\t\t\t_listen('onPinchClose' , function(now) {\r\n\t\t\t\tif(_controlsVisible && now < 0.9) {\r\n\t\t\t\t\tui.hideControls();\r\n\t\t\t\t\tpinchControlsHidden = true;\r\n\t\t\t\t} else if(pinchControlsHidden && !_controlsVisible && now > 0.9) {\r\n\t\t\t\t\tui.showControls();\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\t_listen('zoomGestureEnded', function() {\r\n\t\t\t\tpinchControlsHidden = false;\r\n\t\t\t\tif(pinchControlsHidden && !_controlsVisible) {\r\n\t\t\t\t\tui.showControls();\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t};\r\n\r\n\r\n\r\n\tvar _uiElements = [\r\n\t\t{\r\n\t\t\tname: 'caption',\r\n\t\t\toption: 'captionEl',\r\n\t\t\tonInit: function(el) {\r\n\t\t\t\t_captionContainer = el;\r\n\t\t\t}\r\n\t\t},\r\n\t\t{\r\n\t\t\tname: 'share-modal',\r\n\t\t\toption: 'shareEl',\r\n\t\t\tonInit: function(el) {\r\n\t\t\t\t_shareModal = el;\r\n\t\t\t},\r\n\t\t\tonTap: function() {\r\n\t\t\t\t_toggleShareModal();\r\n\t\t\t}\r\n\t\t},\r\n\t\t{\r\n\t\t\tname: 'button--share',\r\n\t\t\toption: 'shareEl',\r\n\t\t\tonInit: function(el) {\r\n\t\t\t\t_shareButton = el;\r\n\t\t\t},\r\n\t\t\tonTap: function() {\r\n                pswp.shout('userInteractionHappened');\r\n\t\t\t\t_toggleShareModal();\r\n\t\t\t}\r\n\t\t},\r\n        {\r\n            name: 'button--add2cart',\r\n            option: 'add2cartEl',\r\n            onInit: function(el) {\r\n                _add2cartButton = el;\r\n            },\r\n            onTap: function() {\r\n                pswp.shout('userInteractionHappened');\r\n                _toggleAdd2cartModal();\r\n            }\r\n        },\r\n\t\t{\r\n\t\t\tname: 'button--zoom',\r\n\t\t\toption: 'zoomEl',\r\n\t\t\tonTap: () => {\r\n                pswp.shout('userInteractionHappened');\r\n                pswp.toggleDesktopZoom()\r\n            }\r\n\t\t},\r\n\t\t{\r\n\t\t\tname: 'counter',\r\n\t\t\toption: 'counterEl',\r\n\t\t\tonInit: function(el) {\r\n\t\t\t\t_indexIndicator = el;\r\n\t\t\t}\r\n\t\t},\r\n\t\t{\r\n\t\t\tname: 'button--close',\r\n\t\t\toption: 'closeEl',\r\n\t\t\tonTap: pswp.close\r\n\t\t},\r\n\t\t{\r\n\t\t\tname: 'button--arrow--left',\r\n\t\t\toption: 'arrowEl',\r\n\t\t\tonTap: () => {\r\n                pswp.shout('userInteractionHappened');\r\n\t\t\t\tpswp.prev()\r\n\t\t\t}\r\n\t\t},\r\n\t\t{\r\n\t\t\tname: 'button--arrow--right',\r\n\t\t\toption: 'arrowEl',\r\n\t\t\tonTap: () => {\r\n                pswp.shout('userInteractionHappened');\r\n\t\t\t\tpswp.next();\r\n            }\r\n\t\t},\r\n\t\t{\r\n\t\t\tname: 'button--fs',\r\n\t\t\toption: 'fullscreenEl',\r\n\t\t\tonTap: function() {\r\n\t\t\t\tif(_fullscrenAPI.isFullscreen()) {\r\n\t\t\t\t\t_fullscrenAPI.exit();\r\n\t\t\t\t} else {\r\n\t\t\t\t\t_fullscrenAPI.enter();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\t{\r\n\t\t\tname: 'preloader',\r\n\t\t\toption: 'preloaderEl',\r\n\t\t\tonInit: function(el) {\r\n\t\t\t\t_loadingIndicator = el;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t];\r\n\r\n\tvar _setupUIElements = function() {\r\n\t\tvar item,\r\n\t\t\tclassAttr,\r\n\t\t\tuiElement;\r\n\r\n\t\tvar loopThroughChildElements = function(sChildren) {\r\n\t\t\tif(!sChildren) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tvar l = sChildren.length;\r\n\t\t\tfor(var i = 0; i < l; i++) {\r\n\t\t\t\titem = sChildren[i];\r\n\t\t\t\tclassAttr = item.className;\r\n\r\n\t\t\t\tfor(var a = 0; a < _uiElements.length; a++) {\r\n\t\t\t\t\tuiElement = _uiElements[a];\r\n\r\n\t\t\t\t\tif(classAttr.indexOf('pswp__' + uiElement.name) > -1  ) {\r\n\r\n\t\t\t\t\t\tif( _options[uiElement.option] ) { // if element is not disabled from options\r\n\r\n\t\t\t\t\t\t\tframework.removeClass(item, 'pswp__element--disabled');\r\n\t\t\t\t\t\t\tif(uiElement.onInit) {\r\n\t\t\t\t\t\t\t\tuiElement.onInit(item);\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t//item.style.display = 'block';\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tframework.addClass(item, 'pswp__element--disabled');\r\n\t\t\t\t\t\t\t//item.style.display = 'none';\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t};\r\n\t\tloopThroughChildElements(_controls.children);\r\n\r\n\t\tvar topBar =  framework.getChildByClass(_controls, 'pswp__top-bar');\r\n\t\tif(topBar) {\r\n\t\t\tloopThroughChildElements( topBar.children );\r\n\t\t}\r\n\t};\r\n\r\n\r\n\r\n\r\n\tui.init = function() {\r\n\r\n\t\t// extend options\r\n\t\tframework.extend(pswp.options, _defaultUIOptions, true);\r\n\r\n\t\t// create local link for fast access\r\n\t\t_options = pswp.options;\r\n\r\n\t\t// find pswp__ui element\r\n\t\t_controls = framework.getChildByClass(pswp.scrollWrap, 'pswp__ui');\r\n\r\n\t\t// create local link\r\n\t\t_listen = pswp.listen;\r\n\r\n\r\n\t\t_setupHidingControlsDuringGestures();\r\n\r\n\t\t// update controls when slides change\r\n\t\t_listen('beforeChange', ui.update);\r\n\r\n\t\t// toggle zoom on double-tap\r\n\t\t_listen('doubleTap', function(point) {\r\n\t\t\tvar initialZoomLevel = pswp.currItem.initialZoomLevel;\r\n\t\t\tif(pswp.getZoomLevel() !== initialZoomLevel) {\r\n\t\t\t\tpswp.zoomTo(initialZoomLevel, point, 333);\r\n\t\t\t} else {\r\n\t\t\t\tpswp.zoomTo(_options.getDoubleTapZoom(false, pswp.currItem), point, 333);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\t// Allow text selection in caption\r\n\t\t_listen('preventDragEvent', function(e, isDown, preventObj) {\r\n\t\t\tvar t = e.target || e.srcElement;\r\n\t\t\tif(\r\n\t\t\t\tt &&\r\n\t\t\t\tt.getAttribute('class') && e.type.indexOf('mouse') > -1 &&\r\n\t\t\t\t( t.getAttribute('class').indexOf('__caption') > 0 || (/(SMALL|STRONG|EM)/i).test(t.tagName) )\r\n\t\t\t) {\r\n\t\t\t\tpreventObj.prevent = false;\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\t// bind events for UI\r\n\t\t_listen('bindEvents', function() {\r\n\t\t\tframework.bind(_controls, 'pswpTap click', _onControlsTap);\r\n\t\t\tframework.bind(pswp.scrollWrap, 'pswpTap', ui.onGlobalTap);\r\n\r\n\t\t\tif(!pswp.likelyTouchDevice) {\r\n\t\t\t\tframework.bind(pswp.scrollWrap, 'mouseover', ui.onMouseOver);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\t// unbind events for UI\r\n\t\t_listen('unbindEvents', function() {\r\n\t\t\tif(!_shareModalHidden) {\r\n\t\t\t\t_toggleShareModal();\r\n\t\t\t}\r\n\r\n            if(!_add2cartModalHidden) {\r\n                _toggleAdd2cartModal();\r\n            }\r\n\r\n\t\t\tif(_idleInterval) {\r\n\t\t\t\tclearInterval(_idleInterval);\r\n\t\t\t}\r\n\t\t\tframework.unbind(document, 'mouseout', _onMouseLeaveWindow);\r\n\t\t\tframework.unbind(document, 'mousemove', _onIdleMouseMove);\r\n\t\t\tframework.unbind(_controls, 'pswpTap click', _onControlsTap);\r\n\t\t\tframework.unbind(pswp.scrollWrap, 'pswpTap', ui.onGlobalTap);\r\n\t\t\tframework.unbind(pswp.scrollWrap, 'mouseover', ui.onMouseOver);\r\n\r\n\t\t\tif(_fullscrenAPI) {\r\n\t\t\t\tframework.unbind(document, _fullscrenAPI.eventK, ui.updateFullscreen);\r\n\t\t\t\tif(_fullscrenAPI.isFullscreen()) {\r\n\t\t\t\t\t_options.hideAnimationDuration = 0;\r\n\t\t\t\t\t_fullscrenAPI.exit();\r\n\t\t\t\t}\r\n\t\t\t\t_fullscrenAPI = null;\r\n\t\t\t}\r\n\t\t});\r\n\r\n\r\n\t\t// clean up things when gallery is destroyed\r\n\t\t_listen('destroy', function() {\r\n\t\t\tif(_options.captionEl) {\r\n\t\t\t\tif(_fakeCaptionContainer) {\r\n\t\t\t\t\t_controls.removeChild(_fakeCaptionContainer);\r\n\t\t\t\t}\r\n\t\t\t\tframework.removeClass(_captionContainer, 'pswp__caption--empty');\r\n\t\t\t}\r\n\r\n\t\t\tif(_shareModal) {\r\n\t\t\t\t_shareModal.children[0].onclick = null;\r\n\t\t\t}\r\n\t\t\tframework.removeClass(_controls, 'pswp__ui--over-close');\r\n\t\t\tframework.addClass( _controls, 'pswp__ui--hidden');\r\n\t\t\tui.setIdle(false);\r\n\t\t});\r\n\r\n\r\n\t\tif(!_options.showAnimationDuration) {\r\n\t\t\tframework.removeClass( _controls, 'pswp__ui--hidden');\r\n\t\t}\r\n\t\t_listen('initialZoomIn', function() {\r\n\t\t\tif(_options.showAnimationDuration) {\r\n\t\t\t\tframework.removeClass( _controls, 'pswp__ui--hidden');\r\n\t\t\t}\r\n\t\t});\r\n\t\t_listen('initialZoomOut', function() {\r\n\t\t\tframework.addClass( _controls, 'pswp__ui--hidden');\r\n\t\t});\r\n\r\n\t\t_listen('parseVerticalMargin', _applyNavBarGaps);\r\n\r\n\t\t_setupUIElements();\r\n\r\n\t\tif(_options.shareEl && _shareButton && _shareModal) {\r\n\t\t\t_shareModalHidden = true;\r\n\t\t}\r\n\r\n        if(_options.add2cartEl && _add2cartButton) {\r\n            _add2cartModalHidden = true;\r\n        }\r\n\r\n        _countNumItems();\r\n\r\n\t\t_setupIdle();\r\n\r\n\t\t_setupFullscreenAPI();\r\n\r\n\t\t_setupLoadingIndicator();\r\n\t};\r\n\r\n\tui.setIdle = function(isIdle) {\r\n\t\t_isIdle = isIdle;\r\n\t\t_togglePswpClass(_controls, 'ui--idle', isIdle);\r\n\t};\r\n\r\n\tui.update = function() {\r\n\t\t// Don't update UI if it's hidden\r\n\t\tif(_controlsVisible && pswp.currItem) {\r\n\r\n\t\t\tui.updateIndexIndicator();\r\n\r\n\t\t\tif(_options.captionEl) {\r\n\t\t\t\t_options.addCaptionHTMLFn(pswp.currItem, _captionContainer);\r\n\r\n\t\t\t\t_togglePswpClass(_captionContainer, 'caption--empty', !pswp.currItem.title);\r\n\t\t\t}\r\n\r\n\t\t\t_overlayUIUpdated = true;\r\n\r\n\t\t} else {\r\n\t\t\t_overlayUIUpdated = false;\r\n\t\t}\r\n\r\n\t\tif(!_shareModalHidden) {\r\n\t\t\t_toggleShareModal();\r\n\t\t}\r\n\r\n        if(!_add2cartModalHidden) {\r\n            _toggleAdd2cartModal();\r\n        }\r\n\r\n\t\t_countNumItems();\r\n\t};\r\n\r\n\tui.updateFullscreen = function(e) {\r\n\r\n\t\tif(e) {\r\n\t\t\t// some browsers change window scroll position during the fullscreen\r\n\t\t\t// so PhotoSwipe updates it just in case\r\n\t\t\tsetTimeout(function() {\r\n\t\t\t\tpswp.setScrollOffset( 0, framework.getScrollY() );\r\n\t\t\t}, 50);\r\n\t\t}\r\n\r\n\t\t// toogle pswp--fs class on root element\r\n\t\tframework[ (_fullscrenAPI.isFullscreen() ? 'add' : 'remove') + 'Class' ](pswp.template, 'pswp--fs');\r\n\t};\r\n\r\n\tui.updateIndexIndicator = function() {\r\n\t\tif(_options.counterEl) {\r\n\t\t\t_indexIndicator.innerHTML = (pswp.getCurrentIndex()+1) +\r\n\t\t\t\t\t\t\t\t\t\t_options.indexIndicatorSep +\r\n\t\t\t\t\t\t\t\t\t\t_options.getNumItemsFn();\r\n\t\t}\r\n\t};\r\n\r\n\tui.onGlobalTap = function(e) {\r\n\t\te = e || window.event;\r\n\t\tvar target = e.target || e.srcElement;\r\n\r\n\t\tif(_blockControlsTap) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif(e.detail && e.detail.pointerType === 'mouse') {\r\n\r\n\t\t\t// close gallery if clicked outside of the image\r\n\t\t\tif(_hasCloseClass(target)) {\r\n\t\t\t\tpswp.close();\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tif(framework.hasClass(target, 'pswp__img')) {\r\n\t\t\t\tif(pswp.getZoomLevel() === 1 && pswp.getZoomLevel() <= pswp.currItem.fitRatio) {\r\n\t\t\t\t\tif(_options.clickToCloseNonZoomable) {\r\n\t\t\t\t\t\tpswp.close();\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tpswp.toggleDesktopZoom(e.detail.releasePoint);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t} else {\r\n\r\n\t\t\t// tap anywhere (except buttons) to toggle visibility of controls\r\n\t\t\tif(_options.tapToToggleControls) {\r\n\t\t\t\tif(_controlsVisible) {\r\n\t\t\t\t\tui.hideControls();\r\n\t\t\t\t} else {\r\n\t\t\t\t\tui.showControls();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t// tap to close gallery\r\n\t\t\tif(_options.tapToClose && (framework.hasClass(target, 'pswp__img') || _hasCloseClass(target)) ) {\r\n\t\t\t\tpswp.close();\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t}\r\n\t};\r\n\tui.onMouseOver = function(e) {\r\n\t\te = e || window.event;\r\n\t\tvar target = e.target || e.srcElement;\r\n\r\n\t\t// add class when mouse is over an element that should close the gallery\r\n\t\t_togglePswpClass(_controls, 'ui--over-close', _hasCloseClass(target));\r\n\t};\r\n\r\n\tui.hideControls = function() {\r\n\t\tframework.addClass(_controls,'pswp__ui--hidden');\r\n\t\t_controlsVisible = false;\r\n\t};\r\n\r\n\tui.showControls = function() {\r\n\t\t_controlsVisible = true;\r\n\t\tif(!_overlayUIUpdated) {\r\n\t\t\tui.update();\r\n\t\t}\r\n\t\tframework.removeClass(_controls,'pswp__ui--hidden');\r\n\t};\r\n\r\n\tui.supportsFullscreen = function() {\r\n\t\tvar d = document;\r\n\t\treturn !!(d.exitFullscreen || d.mozCancelFullScreen || d.webkitExitFullscreen || d.msExitFullscreen);\r\n\t};\r\n\r\n\tui.getFullscreenAPI = function() {\r\n\t\tvar dE = document.documentElement,\r\n\t\t\tapi,\r\n\t\t\ttF = 'fullscreenchange';\r\n\r\n\t\tif (dE.requestFullscreen) {\r\n\t\t\tapi = {\r\n\t\t\t\tenterK: 'requestFullscreen',\r\n\t\t\t\texitK: 'exitFullscreen',\r\n\t\t\t\telementK: 'fullscreenElement',\r\n\t\t\t\teventK: tF\r\n\t\t\t};\r\n\r\n\t\t} else if(dE.mozRequestFullScreen ) {\r\n\t\t\tapi = {\r\n\t\t\t\tenterK: 'mozRequestFullScreen',\r\n\t\t\t\texitK: 'mozCancelFullScreen',\r\n\t\t\t\telementK: 'mozFullScreenElement',\r\n\t\t\t\teventK: 'moz' + tF\r\n\t\t\t};\r\n\r\n\r\n\r\n\t\t} else if(dE.webkitRequestFullscreen) {\r\n\t\t\tapi = {\r\n\t\t\t\tenterK: 'webkitRequestFullscreen',\r\n\t\t\t\texitK: 'webkitExitFullscreen',\r\n\t\t\t\telementK: 'webkitFullscreenElement',\r\n\t\t\t\teventK: 'webkit' + tF\r\n\t\t\t};\r\n\r\n\t\t} else if(dE.msRequestFullscreen) {\r\n\t\t\tapi = {\r\n\t\t\t\tenterK: 'msRequestFullscreen',\r\n\t\t\t\texitK: 'msExitFullscreen',\r\n\t\t\t\telementK: 'msFullscreenElement',\r\n\t\t\t\teventK: 'MSFullscreenChange'\r\n\t\t\t};\r\n\t\t}\r\n\r\n\t\tif(api) {\r\n\t\t\tapi.enter = function() {\r\n\t\t\t\t// disable close-on-scroll in fullscreen\r\n\t\t\t\t_initalCloseOnScrollValue = _options.closeOnScroll;\r\n\t\t\t\t_options.closeOnScroll = false;\r\n\r\n\t\t\t\tif(this.enterK === 'webkitRequestFullscreen') {\r\n\t\t\t\t\tpswp.template[this.enterK]( Element.ALLOW_KEYBOARD_INPUT );\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn pswp.template[this.enterK]();\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t\tapi.exit = function() {\r\n\t\t\t\t_options.closeOnScroll = _initalCloseOnScrollValue;\r\n\r\n\t\t\t\treturn document[this.exitK]();\r\n\r\n\t\t\t};\r\n\t\t\tapi.isFullscreen = function() { return document[this.elementK]; };\r\n\t\t}\r\n\r\n\t\treturn api;\r\n\t};\r\n\r\n\r\n\r\n};\r\n","// extracted by mini-css-extract-plugin","/*! PhotoSwipe - v4.1.2 - 2017-04-05\r\n* http://photoswipe.com\r\n* Copyright (c) 2017 Dmitry Semenov; */\r\nexport default function(template, UiClass, items, options){\r\n\r\n/*>>framework-bridge*/\r\n/**\r\n *\r\n * Set of generic functions used by gallery.\r\n *\r\n * You're free to modify anything here as long as functionality is kept.\r\n *\r\n */\r\nvar framework = {\r\n\tfeatures: null,\r\n\tbind: function(target, type, listener, unbind) {\r\n\t\tvar methodName = (unbind ? 'remove' : 'add') + 'EventListener';\r\n\t\ttype = type.split(' ');\r\n\t\tfor(var i = 0; i < type.length; i++) {\r\n\t\t\tif(type[i]) {\r\n\t\t\t\ttarget[methodName]( type[i], listener, false);\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tisArray: function(obj) {\r\n\t\treturn (obj instanceof Array);\r\n\t},\r\n\tcreateEl: function(classes, tag) {\r\n\t\tvar el = document.createElement(tag || 'div');\r\n\t\tif(classes) {\r\n\t\t\tel.className = classes;\r\n\t\t}\r\n\t\treturn el;\r\n\t},\r\n\tgetScrollY: function() {\r\n\t\tvar yOffset = window.pageYOffset;\r\n\t\treturn yOffset !== undefined ? yOffset : document.documentElement.scrollTop;\r\n\t},\r\n\tunbind: function(target, type, listener) {\r\n\t\tframework.bind(target,type,listener,true);\r\n\t},\r\n\tremoveClass: function(el, className) {\r\n\t\tvar reg = new RegExp('(\\\\s|^)' + className + '(\\\\s|$)');\r\n\t\tel.className = el.className.replace(reg, ' ').replace(/^\\s\\s*/, '').replace(/\\s\\s*$/, '');\r\n\t},\r\n\taddClass: function(el, className) {\r\n\t\tif( !framework.hasClass(el,className) ) {\r\n\t\t\tel.className += (el.className ? ' ' : '') + className;\r\n\t\t}\r\n\t},\r\n\thasClass: function(el, className) {\r\n\t\treturn el.className && new RegExp('(^|\\\\s)' + className + '(\\\\s|$)').test(el.className);\r\n\t},\r\n\tgetChildByClass: function(parentEl, childClassName) {\r\n\t\tvar node = parentEl.firstChild;\r\n\t\twhile(node) {\r\n\t\t\tif( framework.hasClass(node, childClassName) ) {\r\n\t\t\t\treturn node;\r\n\t\t\t}\r\n\t\t\tnode = node.nextSibling;\r\n\t\t}\r\n\t},\r\n\tarraySearch: function(array, value, key) {\r\n\t\tvar i = array.length;\r\n\t\twhile(i--) {\r\n\t\t\tif(array[i][key] === value) {\r\n\t\t\t\treturn i;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn -1;\r\n\t},\r\n\textend: function(o1, o2, preventOverwrite) {\r\n\t\tfor (var prop in o2) {\r\n\t\t\tif (o2.hasOwnProperty(prop)) {\r\n\t\t\t\tif(preventOverwrite && o1.hasOwnProperty(prop)) {\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\t\t\t\to1[prop] = o2[prop];\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\teasing: {\r\n\t\tsine: {\r\n\t\t\tout: function(k) {\r\n\t\t\t\treturn Math.sin(k * (Math.PI / 2));\r\n\t\t\t},\r\n\t\t\tinOut: function(k) {\r\n\t\t\t\treturn - (Math.cos(Math.PI * k) - 1) / 2;\r\n\t\t\t}\r\n\t\t},\r\n\t\tcubic: {\r\n\t\t\tout: function(k) {\r\n\t\t\t\treturn --k * k * k + 1;\r\n\t\t\t}\r\n\t\t}\r\n\t\t/*\r\n\t\t\telastic: {\r\n\t\t\t\tout: function ( k ) {\r\n\r\n\t\t\t\t\tvar s, a = 0.1, p = 0.4;\r\n\t\t\t\t\tif ( k === 0 ) return 0;\r\n\t\t\t\t\tif ( k === 1 ) return 1;\r\n\t\t\t\t\tif ( !a || a < 1 ) { a = 1; s = p / 4; }\r\n\t\t\t\t\telse s = p * Math.asin( 1 / a ) / ( 2 * Math.PI );\r\n\t\t\t\t\treturn ( a * Math.pow( 2, - 10 * k) * Math.sin( ( k - s ) * ( 2 * Math.PI ) / p ) + 1 );\r\n\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tback: {\r\n\t\t\t\tout: function ( k ) {\r\n\t\t\t\t\tvar s = 1.70158;\r\n\t\t\t\t\treturn --k * k * ( ( s + 1 ) * k + s ) + 1;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t*/\r\n\t},\r\n\r\n\t/**\r\n\t *\r\n\t * @return {object}\r\n\t *\r\n\t * {\r\n\t *  raf : request animation frame function\r\n\t *  caf : cancel animation frame function\r\n\t *  transfrom : transform property key (with vendor), or null if not supported\r\n\t *  oldIE : IE8 or below\r\n\t * }\r\n\t *\r\n\t */\r\n\tdetectFeatures: function() {\r\n\t\tif(framework.features) {\r\n\t\t\treturn framework.features;\r\n\t\t}\r\n\t\tvar helperEl = framework.createEl(),\r\n\t\t\thelperStyle = helperEl.style,\r\n\t\t\tvendor = '',\r\n\t\t\tfeatures = {};\r\n\r\n\t\t// IE8 and below\r\n\t\tfeatures.oldIE = document.all && !document.addEventListener;\r\n\r\n\t\tfeatures.touch = 'ontouchstart' in window;\r\n\r\n\t\tif(window.requestAnimationFrame) {\r\n\t\t\tfeatures.raf = window.requestAnimationFrame;\r\n\t\t\tfeatures.caf = window.cancelAnimationFrame;\r\n\t\t}\r\n\r\n\t\tfeatures.pointerEvent = navigator.pointerEnabled || navigator.msPointerEnabled;\r\n\r\n\t\t// fix false-positive detection of old Android in new IE\r\n\t\t// (IE11 ua string contains \"Android 4.0\")\r\n\r\n\t\tif(!features.pointerEvent) {\r\n\r\n\t\t\tvar ua = navigator.userAgent;\r\n\r\n\t\t\t// Detect if device is iPhone or iPod and if it's older than iOS 8\r\n\t\t\t// http://stackoverflow.com/a/14223920\r\n\t\t\t//\r\n\t\t\t// This detection is made because of buggy top/bottom toolbars\r\n\t\t\t// that don't trigger window.resize event.\r\n\t\t\t// For more info refer to _isFixedPosition variable in core.js\r\n\r\n\t\t\tif (/iP(hone|od)/.test(navigator.platform)) {\r\n\t\t\t\tvar v = (navigator.appVersion).match(/OS (\\d+)_(\\d+)_?(\\d+)?/);\r\n\t\t\t\tif(v && v.length > 0) {\r\n\t\t\t\t\tv = parseInt(v[1], 10);\r\n\t\t\t\t\tif(v >= 1 && v < 8 ) {\r\n\t\t\t\t\t\tfeatures.isOldIOSPhone = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t// Detect old Android (before KitKat)\r\n\t\t\t// due to bugs related to position:fixed\r\n\t\t\t// http://stackoverflow.com/questions/7184573/pick-up-the-android-version-in-the-browser-by-javascript\r\n\r\n\t\t\tvar match = ua.match(/Android\\s([0-9\\.]*)/);\r\n\t\t\tvar androidversion =  match ? match[1] : 0;\r\n\t\t\tandroidversion = parseFloat(androidversion);\r\n\t\t\tif(androidversion >= 1 ) {\r\n\t\t\t\tif(androidversion < 4.4) {\r\n\t\t\t\t\tfeatures.isOldAndroid = true; // for fixed position bug & performance\r\n\t\t\t\t}\r\n\t\t\t\tfeatures.androidVersion = androidversion; // for touchend bug\r\n\t\t\t}\r\n\t\t\tfeatures.isMobileOpera = /opera mini|opera mobi/i.test(ua);\r\n\r\n\t\t\t// p.s. yes, yes, UA sniffing is bad, propose your solution for above bugs.\r\n\t\t}\r\n\r\n\t\tvar styleChecks = ['transform', 'perspective', 'animationName'],\r\n\t\t\tvendors = ['', 'webkit','Moz','ms','O'],\r\n\t\t\tstyleCheckItem,\r\n\t\t\tstyleName;\r\n\r\n\t\tfor(var i = 0; i < 4; i++) {\r\n\t\t\tvendor = vendors[i];\r\n\r\n\t\t\tfor(var a = 0; a < 3; a++) {\r\n\t\t\t\tstyleCheckItem = styleChecks[a];\r\n\r\n\t\t\t\t// uppercase first letter of property name, if vendor is present\r\n\t\t\t\tstyleName = vendor + (vendor ?\r\n\t\t\t\t\t\t\t\t\t\tstyleCheckItem.charAt(0).toUpperCase() + styleCheckItem.slice(1) :\r\n\t\t\t\t\t\t\t\t\t\tstyleCheckItem);\r\n\r\n\t\t\t\tif(!features[styleCheckItem] && styleName in helperStyle ) {\r\n\t\t\t\t\tfeatures[styleCheckItem] = styleName;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif(vendor && !features.raf) {\r\n\t\t\t\tvendor = vendor.toLowerCase();\r\n\t\t\t\tfeatures.raf = window[vendor+'RequestAnimationFrame'];\r\n\t\t\t\tif(features.raf) {\r\n\t\t\t\t\tfeatures.caf = window[vendor+'CancelAnimationFrame'] ||\r\n\t\t\t\t\t\t\t\t\twindow[vendor+'CancelRequestAnimationFrame'];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif(!features.raf) {\r\n\t\t\tvar lastTime = 0;\r\n\t\t\tfeatures.raf = function(fn) {\r\n\t\t\t\tvar currTime = new Date().getTime();\r\n\t\t\t\tvar timeToCall = Math.max(0, 16 - (currTime - lastTime));\r\n\t\t\t\tvar id = window.setTimeout(function() { fn(currTime + timeToCall); }, timeToCall);\r\n\t\t\t\tlastTime = currTime + timeToCall;\r\n\t\t\t\treturn id;\r\n\t\t\t};\r\n\t\t\tfeatures.caf = function(id) { clearTimeout(id); };\r\n\t\t}\r\n\r\n\t\t// Detect SVG support\r\n\t\tfeatures.svg = !!document.createElementNS &&\r\n\t\t\t\t\t\t!!document.createElementNS('http://www.w3.org/2000/svg', 'svg').createSVGRect;\r\n\r\n\t\tframework.features = features;\r\n\r\n\t\treturn features;\r\n\t}\r\n};\r\n\r\nframework.detectFeatures();\r\n\r\n// Override addEventListener for old versions of IE\r\nif(framework.features.oldIE) {\r\n\r\n\tframework.bind = function(target, type, listener, unbind) {\r\n\r\n\t\ttype = type.split(' ');\r\n\r\n\t\tvar methodName = (unbind ? 'detach' : 'attach') + 'Event',\r\n\t\t\tevName,\r\n\t\t\t_handleEv = function() {\r\n\t\t\t\tlistener.handleEvent.call(listener);\r\n\t\t\t};\r\n\r\n\t\tfor(var i = 0; i < type.length; i++) {\r\n\t\t\tevName = type[i];\r\n\t\t\tif(evName) {\r\n\r\n\t\t\t\tif(typeof listener === 'object' && listener.handleEvent) {\r\n\t\t\t\t\tif(!unbind) {\r\n\t\t\t\t\t\tlistener['oldIE' + evName] = _handleEv;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tif(!listener['oldIE' + evName]) {\r\n\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\ttarget[methodName]( 'on' + evName, listener['oldIE' + evName]);\r\n\t\t\t\t} else {\r\n\t\t\t\t\ttarget[methodName]( 'on' + evName, listener);\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n}\r\n\r\n/*>>framework-bridge*/\r\n\r\n/*>>core*/\r\n//function(template, UiClass, items, options)\r\n\r\nvar self = this;\r\n\r\n/**\r\n * Static vars, don't change unless you know what you're doing.\r\n */\r\nvar DOUBLE_TAP_RADIUS = 25,\r\n\tNUM_HOLDERS = 3;\r\n\r\n/**\r\n * Options\r\n */\r\nvar _options = {\r\n\tallowPanToNext:true,\r\n\tspacing: 0.12,\r\n\tbgOpacity: 1,\r\n\tmouseUsed: false,\r\n\tloop: true,\r\n\tpinchToClose: true,\r\n\tcloseOnScroll: true,\r\n\tcloseOnVerticalDrag: true,\r\n\tverticalDragRange: 0.75,\r\n\thideAnimationDuration: 333,\r\n\tshowAnimationDuration: 333,\r\n\tshowHideOpacity: false,\r\n\tfocus: true,\r\n\tescKey: true,\r\n\tarrowKeys: true,\r\n\tmainScrollEndFriction: 0.35,\r\n\tpanEndFriction: 0.35,\r\n\tisClickableElement: function(el) {\r\n        return el.tagName === 'A';\r\n    },\r\n    getDoubleTapZoom: function(isMouseClick, item) {\r\n    \tif(isMouseClick) {\r\n    \t\treturn 1;\r\n    \t} else {\r\n    \t\treturn item.initialZoomLevel < 0.7 ? 1 : 1.33;\r\n    \t}\r\n    },\r\n    maxSpreadZoom: 1.33,\r\n\tmodal: true,\r\n\r\n\t// not fully implemented yet\r\n\tscaleMode: 'fit' // TODO\r\n};\r\nframework.extend(_options, options);\r\n\r\n\r\n/**\r\n * Private helper variables & functions\r\n */\r\n\r\nvar _getEmptyPoint = function() {\r\n\t\treturn {x:0,y:0};\r\n\t};\r\n\r\nvar _isOpen,\r\n\t_isDestroying,\r\n\t_closedByScroll,\r\n\t_currentItemIndex,\r\n\t_containerStyle,\r\n\t_containerShiftIndex,\r\n\t_currPanDist = _getEmptyPoint(),\r\n\t_startPanOffset = _getEmptyPoint(),\r\n\t_panOffset = _getEmptyPoint(),\r\n\t_upMoveEvents, // drag move, drag end & drag cancel events array\r\n\t_downEvents, // drag start events array\r\n\t_globalEventHandlers,\r\n\t_viewportSize = {},\r\n\t_currZoomLevel,\r\n\t_startZoomLevel,\r\n\t_translatePrefix,\r\n\t_translateSufix,\r\n\t_updateSizeInterval,\r\n\t_itemsNeedUpdate,\r\n\t_currPositionIndex = 0,\r\n\t_offset = {},\r\n\t_slideSize = _getEmptyPoint(), // size of slide area, including spacing\r\n\t_itemHolders,\r\n\t_prevItemIndex,\r\n\t_indexDiff = 0, // difference of indexes since last content update\r\n\t_dragStartEvent,\r\n\t_dragMoveEvent,\r\n\t_dragEndEvent,\r\n\t_dragCancelEvent,\r\n\t_transformKey,\r\n\t_pointerEventEnabled,\r\n\t_isFixedPosition = true,\r\n\t_likelyTouchDevice,\r\n\t_modules = [],\r\n\t_requestAF,\r\n\t_cancelAF,\r\n\t_initalClassName,\r\n\t_initalWindowScrollY,\r\n\t_oldIE,\r\n\t_currentWindowScrollY,\r\n\t_features,\r\n\t_windowVisibleSize = {},\r\n\t_renderMaxResolution = false,\r\n\t_orientationChangeTimeout,\r\n\r\n\r\n\t// Registers PhotoSWipe module (History, Controller ...)\r\n\t_registerModule = function(name, module) {\r\n\t\tframework.extend(self, module.publicMethods);\r\n\t\t_modules.push(name);\r\n\t},\r\n\r\n\t_getLoopedId = function(index) {\r\n\t\tvar numSlides = _getNumItems();\r\n\t\tif(index > numSlides - 1) {\r\n\t\t\treturn index - numSlides;\r\n\t\t} else  if(index < 0) {\r\n\t\t\treturn numSlides + index;\r\n\t\t}\r\n\t\treturn index;\r\n\t},\r\n\r\n\t// Micro bind/trigger\r\n\t_listeners = {},\r\n\t_listen = function(name, fn) {\r\n\t\tif(!_listeners[name]) {\r\n\t\t\t_listeners[name] = [];\r\n\t\t}\r\n\t\treturn _listeners[name].push(fn);\r\n\t},\r\n\t_shout = function(name) {\r\n\t\tvar listeners = _listeners[name];\r\n\r\n\t\tif(listeners) {\r\n\t\t\tvar args = Array.prototype.slice.call(arguments);\r\n\t\t\targs.shift();\r\n\r\n\t\t\tfor(var i = 0; i < listeners.length; i++) {\r\n\t\t\t\tlisteners[i].apply(self, args);\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\t_getCurrentTime = function() {\r\n\t\treturn new Date().getTime();\r\n\t},\r\n\t_applyBgOpacity = function(opacity) {\r\n\t\t_bgOpacity = opacity;\r\n\t\tself.bg.style.opacity = opacity * _options.bgOpacity;\r\n\t},\r\n\r\n\t_applyZoomTransform = function(styleObj,x,y,zoom,item) {\r\n\t\tif(!_renderMaxResolution || (item && item !== self.currItem) ) {\r\n\t\t\tzoom = zoom / (item ? item.fitRatio : self.currItem.fitRatio);\r\n\t\t}\r\n\r\n\t\tstyleObj[_transformKey] = _translatePrefix + x + 'px, ' + y + 'px' + _translateSufix + ' scale(' + zoom + ')';\r\n\t},\r\n\t_applyCurrentZoomPan = function( allowRenderResolution ) {\r\n\t\tif(_currZoomElementStyle) {\r\n\r\n\t\t\tif(allowRenderResolution) {\r\n\t\t\t\tif(_currZoomLevel > self.currItem.fitRatio) {\r\n\t\t\t\t\tif(!_renderMaxResolution) {\r\n\t\t\t\t\t\t_setImageSize(self.currItem, false, true);\r\n\t\t\t\t\t\t_renderMaxResolution = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tif(_renderMaxResolution) {\r\n\t\t\t\t\t\t_setImageSize(self.currItem);\r\n\t\t\t\t\t\t_renderMaxResolution = false;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\r\n\t\t\t_applyZoomTransform(_currZoomElementStyle, _panOffset.x, _panOffset.y, _currZoomLevel);\r\n\t\t}\r\n\t},\r\n\t_applyZoomPanToItem = function(item) {\r\n\t\tif(item.container) {\r\n\r\n\t\t\t_applyZoomTransform(item.container.style,\r\n\t\t\t\t\t\t\t\titem.initialPosition.x,\r\n\t\t\t\t\t\t\t\titem.initialPosition.y,\r\n\t\t\t\t\t\t\t\titem.initialZoomLevel,\r\n\t\t\t\t\t\t\t\titem);\r\n\t\t}\r\n\t},\r\n\t_setTranslateX = function(x, elStyle) {\r\n\t\telStyle[_transformKey] = _translatePrefix + x + 'px, 0px' + _translateSufix;\r\n\t},\r\n\t_moveMainScroll = function(x, dragging) {\r\n\r\n\t\tif(!_options.loop && dragging) {\r\n\t\t\tvar newSlideIndexOffset = _currentItemIndex + (_slideSize.x * _currPositionIndex - x) / _slideSize.x,\r\n\t\t\t\tdelta = Math.round(x - _mainScrollPos.x);\r\n\r\n\t\t\tif( (newSlideIndexOffset < 0 && delta > 0) ||\r\n\t\t\t\t(newSlideIndexOffset >= _getNumItems() - 1 && delta < 0) ) {\r\n\t\t\t\tx = _mainScrollPos.x + delta * _options.mainScrollEndFriction;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t_mainScrollPos.x = x;\r\n\t\t_setTranslateX(x, _containerStyle);\r\n\t},\r\n\t_calculatePanOffset = function(axis, zoomLevel) {\r\n\t\tvar m = _midZoomPoint[axis] - _offset[axis];\r\n\t\treturn _startPanOffset[axis] + _currPanDist[axis] + m - m * ( zoomLevel / _startZoomLevel );\r\n\t},\r\n\r\n\t_equalizePoints = function(p1, p2) {\r\n\t\tp1.x = p2.x;\r\n\t\tp1.y = p2.y;\r\n\t\tif(p2.id) {\r\n\t\t\tp1.id = p2.id;\r\n\t\t}\r\n\t},\r\n\t_roundPoint = function(p) {\r\n\t\tp.x = Math.round(p.x);\r\n\t\tp.y = Math.round(p.y);\r\n\t},\r\n\r\n\t_mouseMoveTimeout = null,\r\n\t_onFirstMouseMove = function() {\r\n\t\t// Wait until mouse move event is fired at least twice during 100ms\r\n\t\t// We do this, because some mobile browsers trigger it on touchstart\r\n\t\tif(_mouseMoveTimeout ) {\r\n\t\t\tframework.unbind(document, 'mousemove', _onFirstMouseMove);\r\n\t\t\tframework.addClass(template, 'pswp--has_mouse');\r\n\t\t\t_options.mouseUsed = true;\r\n\t\t\t_shout('mouseUsed');\r\n\t\t}\r\n\t\t_mouseMoveTimeout = setTimeout(function() {\r\n\t\t\t_mouseMoveTimeout = null;\r\n\t\t}, 100);\r\n\t},\r\n\r\n\t_bindEvents = function() {\r\n\t\tframework.bind(document, 'keydown', self);\r\n\r\n\t\tif(_features.transform) {\r\n\t\t\t// don't bind click event in browsers that don't support transform (mostly IE8)\r\n\t\t\tframework.bind(self.scrollWrap, 'click', self);\r\n\t\t}\r\n\r\n\r\n\t\tif(!_options.mouseUsed) {\r\n\t\t\tframework.bind(document, 'mousemove', _onFirstMouseMove);\r\n\t\t}\r\n\r\n\t\tframework.bind(window, 'resize scroll orientationchange', self);\r\n\r\n\t\t_shout('bindEvents');\r\n\t},\r\n\r\n\t_unbindEvents = function() {\r\n\t\tframework.unbind(window, 'resize scroll orientationchange', self);\r\n\t\tframework.unbind(window, 'scroll', _globalEventHandlers.scroll);\r\n\t\tframework.unbind(document, 'keydown', self);\r\n\t\tframework.unbind(document, 'mousemove', _onFirstMouseMove);\r\n\r\n\t\tif(_features.transform) {\r\n\t\t\tframework.unbind(self.scrollWrap, 'click', self);\r\n\t\t}\r\n\r\n\t\tif(_isDragging) {\r\n\t\t\tframework.unbind(window, _upMoveEvents, self);\r\n\t\t}\r\n\r\n\t\tclearTimeout(_orientationChangeTimeout);\r\n\r\n\t\t_shout('unbindEvents');\r\n\t},\r\n\r\n\t_calculatePanBounds = function(zoomLevel, update) {\r\n\t\tvar bounds = _calculateItemSize( self.currItem, _viewportSize, zoomLevel );\r\n\t\tif(update) {\r\n\t\t\t_currPanBounds = bounds;\r\n\t\t}\r\n\t\treturn bounds;\r\n\t},\r\n\r\n\t_getMinZoomLevel = function(item) {\r\n\t\tif(!item) {\r\n\t\t\titem = self.currItem;\r\n\t\t}\r\n\t\treturn item.initialZoomLevel;\r\n\t},\r\n\t_getMaxZoomLevel = function(item) {\r\n\t\tif(!item) {\r\n\t\t\titem = self.currItem;\r\n\t\t}\r\n\t\treturn item.w > 0 ? _options.maxSpreadZoom : 1;\r\n\t},\r\n\r\n\t// Return true if offset is out of the bounds\r\n\t_modifyDestPanOffset = function(axis, destPanBounds, destPanOffset, destZoomLevel) {\r\n\t\tif(destZoomLevel === self.currItem.initialZoomLevel) {\r\n\t\t\tdestPanOffset[axis] = self.currItem.initialPosition[axis];\r\n\t\t\treturn true;\r\n\t\t} else {\r\n\t\t\tdestPanOffset[axis] = _calculatePanOffset(axis, destZoomLevel);\r\n\r\n\t\t\tif(destPanOffset[axis] > destPanBounds.min[axis]) {\r\n\t\t\t\tdestPanOffset[axis] = destPanBounds.min[axis];\r\n\t\t\t\treturn true;\r\n\t\t\t} else if(destPanOffset[axis] < destPanBounds.max[axis] ) {\r\n\t\t\t\tdestPanOffset[axis] = destPanBounds.max[axis];\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn false;\r\n\t},\r\n\r\n\t_setupTransforms = function() {\r\n\r\n\t\tif(_transformKey) {\r\n\t\t\t// setup 3d transforms\r\n\t\t\tvar allow3dTransform = _features.perspective && !_likelyTouchDevice;\r\n\t\t\t_translatePrefix = 'translate' + (allow3dTransform ? '3d(' : '(');\r\n\t\t\t_translateSufix = _features.perspective ? ', 0px)' : ')';\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t// Override zoom/pan/move functions in case old browser is used (most likely IE)\r\n\t\t// (so they use left/top/width/height, instead of CSS transform)\r\n\r\n\t\t_transformKey = 'left';\r\n\t\tframework.addClass(template, 'pswp--ie');\r\n\r\n\t\t_setTranslateX = function(x, elStyle) {\r\n\t\t\telStyle.left = x + 'px';\r\n\t\t};\r\n\t\t_applyZoomPanToItem = function(item) {\r\n\r\n\t\t\tvar zoomRatio = item.fitRatio > 1 ? 1 : item.fitRatio,\r\n\t\t\t\ts = item.container.style,\r\n\t\t\t\tw = zoomRatio * item.w,\r\n\t\t\t\th = zoomRatio * item.h;\r\n\r\n\t\t\ts.width = w + 'px';\r\n\t\t\ts.height = h + 'px';\r\n\t\t\ts.left = item.initialPosition.x + 'px';\r\n\t\t\ts.top = item.initialPosition.y + 'px';\r\n\r\n\t\t};\r\n\t\t_applyCurrentZoomPan = function() {\r\n\t\t\tif(_currZoomElementStyle) {\r\n\r\n\t\t\t\tvar s = _currZoomElementStyle,\r\n\t\t\t\t\titem = self.currItem,\r\n\t\t\t\t\tzoomRatio = item.fitRatio > 1 ? 1 : item.fitRatio,\r\n\t\t\t\t\tw = zoomRatio * item.w,\r\n\t\t\t\t\th = zoomRatio * item.h;\r\n\r\n\t\t\t\ts.width = w + 'px';\r\n\t\t\t\ts.height = h + 'px';\r\n\r\n\r\n\t\t\t\ts.left = _panOffset.x + 'px';\r\n\t\t\t\ts.top = _panOffset.y + 'px';\r\n\t\t\t}\r\n\r\n\t\t};\r\n\t},\r\n\r\n\t_onKeyDown = function(e) {\r\n\t\tvar keydownAction = '';\r\n\t\tif(_options.escKey && e.keyCode === 27) {\r\n\t\t\tkeydownAction = 'close';\r\n\t\t} else if(_options.arrowKeys) {\r\n\t\t\tif(e.keyCode === 37) {\r\n\t\t\t\tkeydownAction = 'prev';\r\n\t\t\t} else if(e.keyCode === 39) {\r\n\t\t\t\tkeydownAction = 'next';\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif(keydownAction) {\r\n\t\t\t// don't do anything if special key pressed to prevent from overriding default browser actions\r\n\t\t\t// e.g. in Chrome on Mac cmd+arrow-left returns to previous page\r\n\t\t\tif( !e.ctrlKey && !e.altKey && !e.shiftKey && !e.metaKey ) {\r\n\t\t\t\tif(e.preventDefault) {\r\n\t\t\t\t\te.preventDefault();\r\n\t\t\t\t} else {\r\n\t\t\t\t\te.returnValue = false;\r\n\t\t\t\t}\r\n\t\t\t\tself[keydownAction]();\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\t_onGlobalClick = function(e) {\r\n\t\tif(!e) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t// don't allow click event to pass through when triggering after drag or some other gesture\r\n\t\tif(_moved || _zoomStarted || _mainScrollAnimating || _verticalDragInitiated) {\r\n\t\t\te.preventDefault();\r\n\t\t\te.stopPropagation();\r\n\t\t}\r\n\t},\r\n\r\n\t_updatePageScrollOffset = function() {\r\n\t\tself.setScrollOffset(0, framework.getScrollY());\r\n\t};\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n// Micro animation engine\r\nvar _animations = {},\r\n\t_numAnimations = 0,\r\n\t_stopAnimation = function(name) {\r\n\t\tif(_animations[name]) {\r\n\t\t\tif(_animations[name].raf) {\r\n\t\t\t\t_cancelAF( _animations[name].raf );\r\n\t\t\t}\r\n\t\t\t_numAnimations--;\r\n\t\t\tdelete _animations[name];\r\n\t\t}\r\n\t},\r\n\t_registerStartAnimation = function(name) {\r\n\t\tif(_animations[name]) {\r\n\t\t\t_stopAnimation(name);\r\n\t\t}\r\n\t\tif(!_animations[name]) {\r\n\t\t\t_numAnimations++;\r\n\t\t\t_animations[name] = {};\r\n\t\t}\r\n\t},\r\n\t_stopAllAnimations = function() {\r\n\t\tfor (var prop in _animations) {\r\n\r\n\t\t\tif( _animations.hasOwnProperty( prop ) ) {\r\n\t\t\t\t_stopAnimation(prop);\r\n\t\t\t}\r\n\r\n\t\t}\r\n\t},\r\n\t_animateProp = function(name, b, endProp, d, easingFn, onUpdate, onComplete) {\r\n\t\tvar startAnimTime = _getCurrentTime(), t;\r\n\t\t_registerStartAnimation(name);\r\n\r\n\t\tvar animloop = function(){\r\n\t\t\tif ( _animations[name] ) {\r\n\r\n\t\t\t\tt = _getCurrentTime() - startAnimTime; // time diff\r\n\t\t\t\t//b - beginning (start prop)\r\n\t\t\t\t//d - anim duration\r\n\r\n\t\t\t\tif ( t >= d ) {\r\n\t\t\t\t\t_stopAnimation(name);\r\n\t\t\t\t\tonUpdate(endProp);\r\n\t\t\t\t\tif(onComplete) {\r\n\t\t\t\t\t\tonComplete();\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tonUpdate( (endProp - b) * easingFn(t/d) + b );\r\n\r\n\t\t\t\t_animations[name].raf = _requestAF(animloop);\r\n\t\t\t}\r\n\t\t};\r\n\t\tanimloop();\r\n\t};\r\n\r\n\r\n\r\nvar publicMethods = {\r\n\r\n\t// make a few local variables and functions public\r\n\tshout: _shout,\r\n\tlisten: _listen,\r\n\tviewportSize: _viewportSize,\r\n\toptions: _options,\r\n\r\n\tisMainScrollAnimating: function() {\r\n\t\treturn _mainScrollAnimating;\r\n\t},\r\n\tgetZoomLevel: function() {\r\n\t\treturn _currZoomLevel;\r\n\t},\r\n\tgetCurrentIndex: function() {\r\n\t\treturn _currentItemIndex;\r\n\t},\r\n\tisDragging: function() {\r\n\t\treturn _isDragging;\r\n\t},\r\n\tisZooming: function() {\r\n\t\treturn _isZooming;\r\n\t},\r\n\tsetScrollOffset: function(x,y) {\r\n\t\t_offset.x = x;\r\n\t\t_currentWindowScrollY = _offset.y = y;\r\n\t\t_shout('updateScrollOffset', _offset);\r\n\t},\r\n\tapplyZoomPan: function(zoomLevel,panX,panY,allowRenderResolution) {\r\n\t\t_panOffset.x = panX;\r\n\t\t_panOffset.y = panY;\r\n\t\t_currZoomLevel = zoomLevel;\r\n\t\t_applyCurrentZoomPan( allowRenderResolution );\r\n\t},\r\n\r\n\tinit: function() {\r\n\r\n\t\tif(_isOpen || _isDestroying) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tvar i;\r\n\r\n\t\tself.framework = framework; // basic functionality\r\n\t\tself.template = template; // root DOM element of PhotoSwipe\r\n\t\tself.bg = framework.getChildByClass(template, 'pswp__bg');\r\n\r\n\t\t_initalClassName = template.className;\r\n\t\t_isOpen = true;\r\n\r\n\t\t_features = framework.detectFeatures();\r\n\t\t_requestAF = _features.raf;\r\n\t\t_cancelAF = _features.caf;\r\n\t\t_transformKey = _features.transform;\r\n\t\t_oldIE = _features.oldIE;\r\n\r\n\t\tself.scrollWrap = framework.getChildByClass(template, 'pswp__scroll-wrap');\r\n\t\tself.container = framework.getChildByClass(self.scrollWrap, 'pswp__container');\r\n\r\n\t\t_containerStyle = self.container.style; // for fast access\r\n\r\n\t\t// Objects that hold slides (there are only 3 in DOM)\r\n\t\tself.itemHolders = _itemHolders = [\r\n\t\t\t{el:self.container.children[0] , wrap:0, index: -1},\r\n\t\t\t{el:self.container.children[1] , wrap:0, index: -1},\r\n\t\t\t{el:self.container.children[2] , wrap:0, index: -1}\r\n\t\t];\r\n\r\n\t\t// hide nearby item holders until initial zoom animation finishes (to avoid extra Paints)\r\n\t\t_itemHolders[0].el.style.display = _itemHolders[2].el.style.display = 'none';\r\n\r\n\t\t_setupTransforms();\r\n\r\n\t\t// Setup global events\r\n\t\t_globalEventHandlers = {\r\n\t\t\tresize: self.updateSize,\r\n\r\n\t\t\t// Fixes: iOS 10.3 resize event\r\n\t\t\t// does not update scrollWrap.clientWidth instantly after resize\r\n\t\t\t// https://github.com/dimsemenov/PhotoSwipe/issues/1315\r\n\t\t\torientationchange: function() {\r\n\t\t\t\tclearTimeout(_orientationChangeTimeout);\r\n\t\t\t\t_orientationChangeTimeout = setTimeout(function() {\r\n\t\t\t\t\tif(_viewportSize.x !== self.scrollWrap.clientWidth) {\r\n\t\t\t\t\t\tself.updateSize();\r\n\t\t\t\t\t}\r\n\t\t\t\t}, 500);\r\n\t\t\t},\r\n\t\t\tscroll: _updatePageScrollOffset,\r\n\t\t\tkeydown: _onKeyDown,\r\n\t\t\tclick: _onGlobalClick\r\n\t\t};\r\n\r\n\t\t// disable show/hide effects on old browsers that don't support CSS animations or transforms,\r\n\t\t// old IOS, Android and Opera mobile. Blackberry seems to work fine, even older models.\r\n\t\tvar oldPhone = _features.isOldIOSPhone || _features.isOldAndroid || _features.isMobileOpera;\r\n\t\tif(!_features.animationName || !_features.transform || oldPhone) {\r\n\t\t\t_options.showAnimationDuration = _options.hideAnimationDuration = 0;\r\n\t\t}\r\n\r\n\t\t// init modules\r\n\t\tfor(i = 0; i < _modules.length; i++) {\r\n\t\t\tself['init' + _modules[i]]();\r\n\t\t}\r\n\r\n\t\t// init\r\n\t\tif(UiClass) {\r\n\t\t\tvar ui = self.ui = new UiClass(self, framework);\r\n\t\t\tui.init();\r\n\t\t}\r\n\r\n\t\t_shout('firstUpdate');\r\n\t\t_currentItemIndex = _currentItemIndex || _options.index || 0;\r\n\t\t// validate index\r\n\t\tif( isNaN(_currentItemIndex) || _currentItemIndex < 0 || _currentItemIndex >= _getNumItems() ) {\r\n\t\t\t_currentItemIndex = 0;\r\n\t\t}\r\n\t\tself.currItem = _getItemAt( _currentItemIndex );\r\n\r\n\r\n\t\tif(_features.isOldIOSPhone || _features.isOldAndroid) {\r\n\t\t\t_isFixedPosition = false;\r\n\t\t}\r\n\r\n\t\ttemplate.setAttribute('aria-hidden', 'false');\r\n\t\tif(_options.modal) {\r\n\t\t\tif(!_isFixedPosition) {\r\n\t\t\t\ttemplate.style.position = 'absolute';\r\n\t\t\t\ttemplate.style.top = framework.getScrollY() + 'px';\r\n\t\t\t} else {\r\n\t\t\t\ttemplate.style.position = 'fixed';\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif(_currentWindowScrollY === undefined) {\r\n\t\t\t_shout('initialLayout');\r\n\t\t\t_currentWindowScrollY = _initalWindowScrollY = framework.getScrollY();\r\n\t\t}\r\n\r\n\t\t// add classes to root element of PhotoSwipe\r\n\t\tvar rootClasses = 'pswp--open ';\r\n\t\tif(_options.mainClass) {\r\n\t\t\trootClasses += _options.mainClass + ' ';\r\n\t\t}\r\n\t\tif(_options.showHideOpacity) {\r\n\t\t\trootClasses += 'pswp--animate_opacity ';\r\n\t\t}\r\n\t\trootClasses += _likelyTouchDevice ? 'pswp--touch' : 'pswp--notouch';\r\n\t\trootClasses += _features.animationName ? ' pswp--css_animation' : '';\r\n\t\trootClasses += _features.svg ? ' pswp--svg' : '';\r\n\t\tframework.addClass(template, rootClasses);\r\n\r\n\t\tself.updateSize();\r\n\r\n\t\t// initial update\r\n\t\t_containerShiftIndex = -1;\r\n\t\t_indexDiff = null;\r\n\t\tfor(i = 0; i < NUM_HOLDERS; i++) {\r\n\t\t\t_setTranslateX( (i+_containerShiftIndex) * _slideSize.x, _itemHolders[i].el.style);\r\n\t\t}\r\n\r\n\t\tif(!_oldIE) {\r\n\t\t\tframework.bind(self.scrollWrap, _downEvents, self); // no dragging for old IE\r\n\t\t}\r\n\r\n\t\t_listen('initialZoomInEnd', function() {\r\n\t\t\tself.setContent(_itemHolders[0], _currentItemIndex-1);\r\n\t\t\tself.setContent(_itemHolders[2], _currentItemIndex+1);\r\n\r\n\t\t\t_itemHolders[0].el.style.display = _itemHolders[2].el.style.display = 'block';\r\n\r\n\t\t\tif(_options.focus) {\r\n\t\t\t\t// focus causes layout,\r\n\t\t\t\t// which causes lag during the animation,\r\n\t\t\t\t// that's why we delay it untill the initial zoom transition ends\r\n\t\t\t\ttemplate.focus();\r\n\t\t\t}\r\n\r\n\r\n\t\t\t_bindEvents();\r\n\t\t});\r\n\r\n\t\t// set content for center slide (first time)\r\n\t\tself.setContent(_itemHolders[1], _currentItemIndex);\r\n\r\n\t\tself.updateCurrItem();\r\n\r\n\t\t_shout('afterInit');\r\n\r\n\t\tif(!_isFixedPosition) {\r\n\r\n\t\t\t// On all versions of iOS lower than 8.0, we check size of viewport every second.\r\n\t\t\t//\r\n\t\t\t// This is done to detect when Safari top & bottom bars appear,\r\n\t\t\t// as this action doesn't trigger any events (like resize).\r\n\t\t\t//\r\n\t\t\t// On iOS8 they fixed this.\r\n\t\t\t//\r\n\t\t\t// 10 Nov 2014: iOS 7 usage ~40%. iOS 8 usage 56%.\r\n\r\n\t\t\t_updateSizeInterval = setInterval(function() {\r\n\t\t\t\tif(!_numAnimations && !_isDragging && !_isZooming && (_currZoomLevel === self.currItem.initialZoomLevel)  ) {\r\n\t\t\t\t\tself.updateSize();\r\n\t\t\t\t}\r\n\t\t\t}, 1000);\r\n\t\t}\r\n\r\n\t\tframework.addClass(template, 'pswp--visible');\r\n\t},\r\n\r\n\t// Close the gallery, then destroy it\r\n\tclose: function() {\r\n\t\tif(!_isOpen) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t_isOpen = false;\r\n\t\t_isDestroying = true;\r\n\t\t_shout('close');\r\n\t\t_unbindEvents();\r\n\r\n\t\t_showOrHide(self.currItem, null, true, self.destroy);\r\n\t},\r\n\r\n\t// destroys the gallery (unbinds events, cleans up intervals and timeouts to avoid memory leaks)\r\n\tdestroy: function() {\r\n\t\t_shout('destroy');\r\n\r\n\t\tif(_showOrHideTimeout) {\r\n\t\t\tclearTimeout(_showOrHideTimeout);\r\n\t\t}\r\n\r\n\t\ttemplate.setAttribute('aria-hidden', 'true');\r\n\t\ttemplate.className = _initalClassName;\r\n\r\n\t\tif(_updateSizeInterval) {\r\n\t\t\tclearInterval(_updateSizeInterval);\r\n\t\t}\r\n\r\n\t\tframework.unbind(self.scrollWrap, _downEvents, self);\r\n\r\n\t\t// we unbind scroll event at the end, as closing animation may depend on it\r\n\t\tframework.unbind(window, 'scroll', self);\r\n\r\n\t\t_stopDragUpdateLoop();\r\n\r\n\t\t_stopAllAnimations();\r\n\r\n\t\t_listeners = null;\r\n\t},\r\n\r\n\t/**\r\n\t * Pan image to position\r\n\t * @param {Number} x\r\n\t * @param {Number} y\r\n\t * @param {Boolean} force Will ignore bounds if set to true.\r\n\t */\r\n\tpanTo: function(x,y,force) {\r\n\t\tif(!force) {\r\n\t\t\tif(x > _currPanBounds.min.x) {\r\n\t\t\t\tx = _currPanBounds.min.x;\r\n\t\t\t} else if(x < _currPanBounds.max.x) {\r\n\t\t\t\tx = _currPanBounds.max.x;\r\n\t\t\t}\r\n\r\n\t\t\tif(y > _currPanBounds.min.y) {\r\n\t\t\t\ty = _currPanBounds.min.y;\r\n\t\t\t} else if(y < _currPanBounds.max.y) {\r\n\t\t\t\ty = _currPanBounds.max.y;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t_panOffset.x = x;\r\n\t\t_panOffset.y = y;\r\n\t\t_applyCurrentZoomPan();\r\n\t},\r\n\r\n\thandleEvent: function (e) {\r\n\t\te = e || window.event;\r\n\t\tif(_globalEventHandlers[e.type]) {\r\n\t\t\t_globalEventHandlers[e.type](e);\r\n\t\t}\r\n\t},\r\n\r\n\r\n\tgoTo: function(index) {\r\n\r\n\t\tindex = _getLoopedId(index);\r\n\r\n\t\tvar diff = index - _currentItemIndex;\r\n\t\t_indexDiff = diff;\r\n\r\n\t\t_currentItemIndex = index;\r\n\t\tself.currItem = _getItemAt( _currentItemIndex );\r\n\t\t_currPositionIndex -= diff;\r\n\r\n\t\t_moveMainScroll(_slideSize.x * _currPositionIndex);\r\n\r\n\r\n\t\t_stopAllAnimations();\r\n\t\t_mainScrollAnimating = false;\r\n\r\n\t\tself.updateCurrItem();\r\n\t},\r\n\tnext: function() {\r\n\t\tself.goTo( _currentItemIndex + 1);\r\n\t},\r\n\tprev: function() {\r\n\t\tself.goTo( _currentItemIndex - 1);\r\n\t},\r\n\r\n\t// update current zoom/pan objects\r\n\tupdateCurrZoomItem: function(emulateSetContent) {\r\n\t\tif(emulateSetContent) {\r\n\t\t\t_shout('beforeChange', 0);\r\n\t\t}\r\n\r\n\t\t// itemHolder[1] is middle (current) item\r\n\t\tif(_itemHolders[1].el.children.length) {\r\n\t\t\tvar zoomElement = _itemHolders[1].el.children[0];\r\n\t\t\tif( framework.hasClass(zoomElement, 'pswp__zoom-wrap') ) {\r\n\t\t\t\t_currZoomElementStyle = zoomElement.style;\r\n\t\t\t} else {\r\n\t\t\t\t_currZoomElementStyle = null;\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\t_currZoomElementStyle = null;\r\n\t\t}\r\n\r\n\t\t_currPanBounds = self.currItem.bounds;\r\n\t\t_startZoomLevel = _currZoomLevel = self.currItem.initialZoomLevel;\r\n\r\n\t\t_panOffset.x = _currPanBounds.center.x;\r\n\t\t_panOffset.y = _currPanBounds.center.y;\r\n\r\n\t\tif(emulateSetContent) {\r\n\t\t\t_shout('afterChange');\r\n\t\t}\r\n\t},\r\n\r\n\r\n\tinvalidateCurrItems: function() {\r\n\t\t_itemsNeedUpdate = true;\r\n\t\tfor(var i = 0; i < NUM_HOLDERS; i++) {\r\n\t\t\tif( _itemHolders[i].item ) {\r\n\t\t\t\t_itemHolders[i].item.needsUpdate = true;\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\tupdateCurrItem: function(beforeAnimation) {\r\n\r\n\t\tif(_indexDiff === 0) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tvar diffAbs = Math.abs(_indexDiff),\r\n\t\t\ttempHolder;\r\n\r\n\t\tif(beforeAnimation && diffAbs < 2) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\r\n\t\tself.currItem = _getItemAt( _currentItemIndex );\r\n\t\t_renderMaxResolution = false;\r\n\r\n\t\t_shout('beforeChange', _indexDiff);\r\n\r\n\t\tif(diffAbs >= NUM_HOLDERS) {\r\n\t\t\t_containerShiftIndex += _indexDiff + (_indexDiff > 0 ? -NUM_HOLDERS : NUM_HOLDERS);\r\n\t\t\tdiffAbs = NUM_HOLDERS;\r\n\t\t}\r\n\t\tfor(var i = 0; i < diffAbs; i++) {\r\n\t\t\tif(_indexDiff > 0) {\r\n\t\t\t\ttempHolder = _itemHolders.shift();\r\n\t\t\t\t_itemHolders[NUM_HOLDERS-1] = tempHolder; // move first to last\r\n\r\n\t\t\t\t_containerShiftIndex++;\r\n\t\t\t\t_setTranslateX( (_containerShiftIndex+2) * _slideSize.x, tempHolder.el.style);\r\n\t\t\t\tself.setContent(tempHolder, _currentItemIndex - diffAbs + i + 1 + 1);\r\n\t\t\t} else {\r\n\t\t\t\ttempHolder = _itemHolders.pop();\r\n\t\t\t\t_itemHolders.unshift( tempHolder ); // move last to first\r\n\r\n\t\t\t\t_containerShiftIndex--;\r\n\t\t\t\t_setTranslateX( _containerShiftIndex * _slideSize.x, tempHolder.el.style);\r\n\t\t\t\tself.setContent(tempHolder, _currentItemIndex + diffAbs - i - 1 - 1);\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t// reset zoom/pan on previous item\r\n\t\tif(_currZoomElementStyle && Math.abs(_indexDiff) === 1) {\r\n\r\n\t\t\tvar prevItem = _getItemAt(_prevItemIndex);\r\n\t\t\tif(prevItem.initialZoomLevel !== _currZoomLevel) {\r\n\t\t\t\t_calculateItemSize(prevItem , _viewportSize );\r\n\t\t\t\t_setImageSize(prevItem);\r\n\t\t\t\t_applyZoomPanToItem( prevItem );\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t// reset diff after update\r\n\t\t_indexDiff = 0;\r\n\r\n\t\tself.updateCurrZoomItem();\r\n\r\n\t\t_prevItemIndex = _currentItemIndex;\r\n\r\n\t\t_shout('afterChange');\r\n\r\n\t},\r\n\r\n\r\n\r\n\tupdateSize: function(force) {\r\n\r\n\t\tif(!_isFixedPosition && _options.modal) {\r\n\t\t\tvar windowScrollY = framework.getScrollY();\r\n\t\t\tif(_currentWindowScrollY !== windowScrollY) {\r\n\t\t\t\ttemplate.style.top = windowScrollY + 'px';\r\n\t\t\t\t_currentWindowScrollY = windowScrollY;\r\n\t\t\t}\r\n\t\t\tif(!force && _windowVisibleSize.x === window.innerWidth && _windowVisibleSize.y === window.innerHeight) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\t_windowVisibleSize.x = window.innerWidth;\r\n\t\t\t_windowVisibleSize.y = window.innerHeight;\r\n\r\n\t\t\t//template.style.width = _windowVisibleSize.x + 'px';\r\n\t\t\ttemplate.style.height = _windowVisibleSize.y + 'px';\r\n\t\t}\r\n\r\n\r\n\r\n\t\t_viewportSize.x = self.scrollWrap.clientWidth;\r\n\t\t_viewportSize.y = self.scrollWrap.clientHeight;\r\n\r\n\t\t_updatePageScrollOffset();\r\n\r\n\t\t_slideSize.x = _viewportSize.x + Math.round(_viewportSize.x * _options.spacing);\r\n\t\t_slideSize.y = _viewportSize.y;\r\n\r\n\t\t_moveMainScroll(_slideSize.x * _currPositionIndex);\r\n\r\n\t\t_shout('beforeResize'); // even may be used for example to switch image sources\r\n\r\n\r\n\t\t// don't re-calculate size on inital size update\r\n\t\tif(_containerShiftIndex !== undefined) {\r\n\r\n\t\t\tvar holder,\r\n\t\t\t\titem,\r\n\t\t\t\thIndex;\r\n\r\n\t\t\tfor(var i = 0; i < NUM_HOLDERS; i++) {\r\n\t\t\t\tholder = _itemHolders[i];\r\n\t\t\t\t_setTranslateX( (i+_containerShiftIndex) * _slideSize.x, holder.el.style);\r\n\r\n\t\t\t\thIndex = _currentItemIndex+i-1;\r\n\r\n\t\t\t\tif(_options.loop && _getNumItems() > 2) {\r\n\t\t\t\t\thIndex = _getLoopedId(hIndex);\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// update zoom level on items and refresh source (if needsUpdate)\r\n\t\t\t\titem = _getItemAt( hIndex );\r\n\r\n\t\t\t\t// re-render gallery item if `needsUpdate`,\r\n\t\t\t\t// or doesn't have `bounds` (entirely new slide object)\r\n\t\t\t\tif( item && (_itemsNeedUpdate || item.needsUpdate || !item.bounds) ) {\r\n\r\n\t\t\t\t\tself.cleanSlide( item );\r\n\r\n\t\t\t\t\tself.setContent( holder, hIndex );\r\n\r\n\t\t\t\t\t// if \"center\" slide\r\n\t\t\t\t\tif(i === 1) {\r\n\t\t\t\t\t\tself.currItem = item;\r\n\t\t\t\t\t\tself.updateCurrZoomItem(true);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\titem.needsUpdate = false;\r\n\r\n\t\t\t\t} else if(holder.index === -1 && hIndex >= 0) {\r\n\t\t\t\t\t// add content first time\r\n\t\t\t\t\tself.setContent( holder, hIndex );\r\n\t\t\t\t}\r\n\t\t\t\tif(item && item.container) {\r\n\t\t\t\t\t_calculateItemSize(item, _viewportSize);\r\n\t\t\t\t\t_setImageSize(item);\r\n\t\t\t\t\t_applyZoomPanToItem( item );\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\t\t\t_itemsNeedUpdate = false;\r\n\t\t}\r\n\r\n\t\t_startZoomLevel = _currZoomLevel = self.currItem.initialZoomLevel;\r\n\t\t_currPanBounds = self.currItem.bounds;\r\n\r\n\t\tif(_currPanBounds) {\r\n\t\t\t_panOffset.x = _currPanBounds.center.x;\r\n\t\t\t_panOffset.y = _currPanBounds.center.y;\r\n\t\t\t_applyCurrentZoomPan( true );\r\n\t\t}\r\n\r\n\t\t_shout('resize');\r\n\t},\r\n\r\n\t// Zoom current item to\r\n\tzoomTo: function(destZoomLevel, centerPoint, speed, easingFn, updateFn) {\r\n\t\t/*\r\n\t\t\tif(destZoomLevel === 'fit') {\r\n\t\t\t\tdestZoomLevel = self.currItem.fitRatio;\r\n\t\t\t} else if(destZoomLevel === 'fill') {\r\n\t\t\t\tdestZoomLevel = self.currItem.fillRatio;\r\n\t\t\t}\r\n\t\t*/\r\n\r\n\t\tif(centerPoint) {\r\n\t\t\t_startZoomLevel = _currZoomLevel;\r\n\t\t\t_midZoomPoint.x = Math.abs(centerPoint.x) - _panOffset.x ;\r\n\t\t\t_midZoomPoint.y = Math.abs(centerPoint.y) - _panOffset.y ;\r\n\t\t\t_equalizePoints(_startPanOffset, _panOffset);\r\n\t\t}\r\n\r\n\t\tvar destPanBounds = _calculatePanBounds(destZoomLevel, false),\r\n\t\t\tdestPanOffset = {};\r\n\r\n\t\t_modifyDestPanOffset('x', destPanBounds, destPanOffset, destZoomLevel);\r\n\t\t_modifyDestPanOffset('y', destPanBounds, destPanOffset, destZoomLevel);\r\n\r\n\t\tvar initialZoomLevel = _currZoomLevel;\r\n\t\tvar initialPanOffset = {\r\n\t\t\tx: _panOffset.x,\r\n\t\t\ty: _panOffset.y\r\n\t\t};\r\n\r\n\t\t_roundPoint(destPanOffset);\r\n\r\n\t\tvar onUpdate = function(now) {\r\n\t\t\tif(now === 1) {\r\n\t\t\t\t_currZoomLevel = destZoomLevel;\r\n\t\t\t\t_panOffset.x = destPanOffset.x;\r\n\t\t\t\t_panOffset.y = destPanOffset.y;\r\n\t\t\t} else {\r\n\t\t\t\t_currZoomLevel = (destZoomLevel - initialZoomLevel) * now + initialZoomLevel;\r\n\t\t\t\t_panOffset.x = (destPanOffset.x - initialPanOffset.x) * now + initialPanOffset.x;\r\n\t\t\t\t_panOffset.y = (destPanOffset.y - initialPanOffset.y) * now + initialPanOffset.y;\r\n\t\t\t}\r\n\r\n\t\t\tif(updateFn) {\r\n\t\t\t\tupdateFn(now);\r\n\t\t\t}\r\n\r\n\t\t\t_applyCurrentZoomPan( now === 1 );\r\n\t\t};\r\n\r\n\t\tif(speed) {\r\n\t\t\t_animateProp('customZoomTo', 0, 1, speed, easingFn || framework.easing.sine.inOut, onUpdate);\r\n\t\t} else {\r\n\t\t\tonUpdate(1);\r\n\t\t}\r\n\t}\r\n\r\n\r\n};\r\n\r\n\r\n/*>>core*/\r\n\r\n/*>>gestures*/\r\n/**\r\n * Mouse/touch/pointer event handlers.\r\n *\r\n * separated from @core.js for readability\r\n */\r\n\r\nvar MIN_SWIPE_DISTANCE = 30,\r\n\tDIRECTION_CHECK_OFFSET = 10; // amount of pixels to drag to determine direction of swipe\r\n\r\nvar _gestureStartTime,\r\n\t_gestureCheckSpeedTime,\r\n\r\n\t// pool of objects that are used during dragging of zooming\r\n\tp = {}, // first point\r\n\tp2 = {}, // second point (for zoom gesture)\r\n\tdelta = {},\r\n\t_currPoint = {},\r\n\t_startPoint = {},\r\n\t_currPointers = [],\r\n\t_startMainScrollPos = {},\r\n\t_releaseAnimData,\r\n\t_posPoints = [], // array of points during dragging, used to determine type of gesture\r\n\t_tempPoint = {},\r\n\r\n\t_isZoomingIn,\r\n\t_verticalDragInitiated,\r\n\t_oldAndroidTouchEndTimeout,\r\n\t_currZoomedItemIndex = 0,\r\n\t_centerPoint = _getEmptyPoint(),\r\n\t_lastReleaseTime = 0,\r\n\t_isDragging, // at least one pointer is down\r\n\t_isMultitouch, // at least two _pointers are down\r\n\t_zoomStarted, // zoom level changed during zoom gesture\r\n\t_moved,\r\n\t_dragAnimFrame,\r\n\t_mainScrollShifted,\r\n\t_currentPoints, // array of current touch points\r\n\t_isZooming,\r\n\t_currPointsDistance,\r\n\t_startPointsDistance,\r\n\t_currPanBounds,\r\n\t_mainScrollPos = _getEmptyPoint(),\r\n\t_currZoomElementStyle,\r\n\t_mainScrollAnimating, // true, if animation after swipe gesture is running\r\n\t_midZoomPoint = _getEmptyPoint(),\r\n\t_currCenterPoint = _getEmptyPoint(),\r\n\t_direction,\r\n\t_isFirstMove,\r\n\t_opacityChanged,\r\n\t_bgOpacity,\r\n\t_wasOverInitialZoom,\r\n\r\n\t_isEqualPoints = function(p1, p2) {\r\n\t\treturn p1.x === p2.x && p1.y === p2.y;\r\n\t},\r\n\t_isNearbyPoints = function(touch0, touch1) {\r\n\t\treturn Math.abs(touch0.x - touch1.x) < DOUBLE_TAP_RADIUS && Math.abs(touch0.y - touch1.y) < DOUBLE_TAP_RADIUS;\r\n\t},\r\n\t_calculatePointsDistance = function(p1, p2) {\r\n\t\t_tempPoint.x = Math.abs( p1.x - p2.x );\r\n\t\t_tempPoint.y = Math.abs( p1.y - p2.y );\r\n\t\treturn Math.sqrt(_tempPoint.x * _tempPoint.x + _tempPoint.y * _tempPoint.y);\r\n\t},\r\n\t_stopDragUpdateLoop = function() {\r\n\t\tif(_dragAnimFrame) {\r\n\t\t\t_cancelAF(_dragAnimFrame);\r\n\t\t\t_dragAnimFrame = null;\r\n\t\t}\r\n\t},\r\n\t_dragUpdateLoop = function() {\r\n\t\tif(_isDragging) {\r\n\t\t\t_dragAnimFrame = _requestAF(_dragUpdateLoop);\r\n\t\t\t_renderMovement();\r\n\t\t}\r\n\t},\r\n\t_canPan = function() {\r\n\t\treturn !(_options.scaleMode === 'fit' && _currZoomLevel ===  self.currItem.initialZoomLevel);\r\n\t},\r\n\r\n\t// find the closest parent DOM element\r\n\t_closestElement = function(el, fn) {\r\n\t  \tif(!el || el === document) {\r\n\t  \t\treturn false;\r\n\t  \t}\r\n\r\n\t  \t// don't search elements above pswp__scroll-wrap\r\n\t  \tif(el.getAttribute('class') && el.getAttribute('class').indexOf('pswp__scroll-wrap') > -1 ) {\r\n\t  \t\treturn false;\r\n\t  \t}\r\n\r\n\t  \tif( fn(el) ) {\r\n\t  \t\treturn el;\r\n\t  \t}\r\n\r\n\t  \treturn _closestElement(el.parentNode, fn);\r\n\t},\r\n\r\n\t_preventObj = {},\r\n\t_preventDefaultEventBehaviour = function(e, isDown) {\r\n\t    _preventObj.prevent = !_closestElement(e.target, _options.isClickableElement);\r\n\r\n\t\t_shout('preventDragEvent', e, isDown, _preventObj);\r\n\t\treturn _preventObj.prevent;\r\n\r\n\t},\r\n\t_convertTouchToPoint = function(touch, p) {\r\n\t\tp.x = touch.pageX;\r\n\t\tp.y = touch.pageY;\r\n\t\tp.id = touch.identifier;\r\n\t\treturn p;\r\n\t},\r\n\t_findCenterOfPoints = function(p1, p2, pCenter) {\r\n\t\tpCenter.x = (p1.x + p2.x) * 0.5;\r\n\t\tpCenter.y = (p1.y + p2.y) * 0.5;\r\n\t},\r\n\t_pushPosPoint = function(time, x, y) {\r\n\t\tif(time - _gestureCheckSpeedTime > 50) {\r\n\t\t\tvar o = _posPoints.length > 2 ? _posPoints.shift() : {};\r\n\t\t\to.x = x;\r\n\t\t\to.y = y;\r\n\t\t\t_posPoints.push(o);\r\n\t\t\t_gestureCheckSpeedTime = time;\r\n\t\t}\r\n\t},\r\n\r\n\t_calculateVerticalDragOpacityRatio = function() {\r\n\t\tvar yOffset = _panOffset.y - self.currItem.initialPosition.y; // difference between initial and current position\r\n\t\treturn 1 -  Math.abs( yOffset / (_viewportSize.y / 2)  );\r\n\t},\r\n\r\n\r\n\t// points pool, reused during touch events\r\n\t_ePoint1 = {},\r\n\t_ePoint2 = {},\r\n\t_tempPointsArr = [],\r\n\t_tempCounter,\r\n\t_getTouchPoints = function(e) {\r\n\t\t// clean up previous points, without recreating array\r\n\t\twhile(_tempPointsArr.length > 0) {\r\n\t\t\t_tempPointsArr.pop();\r\n\t\t}\r\n\r\n\t\tif(!_pointerEventEnabled) {\r\n\t\t\tif(e.type.indexOf('touch') > -1) {\r\n\r\n\t\t\t\tif(e.touches && e.touches.length > 0) {\r\n\t\t\t\t\t_tempPointsArr[0] = _convertTouchToPoint(e.touches[0], _ePoint1);\r\n\t\t\t\t\tif(e.touches.length > 1) {\r\n\t\t\t\t\t\t_tempPointsArr[1] = _convertTouchToPoint(e.touches[1], _ePoint2);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t} else {\r\n\t\t\t\t_ePoint1.x = e.pageX;\r\n\t\t\t\t_ePoint1.y = e.pageY;\r\n\t\t\t\t_ePoint1.id = '';\r\n\t\t\t\t_tempPointsArr[0] = _ePoint1;//_ePoint1;\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\t_tempCounter = 0;\r\n\t\t\t// we can use forEach, as pointer events are supported only in modern browsers\r\n\t\t\t_currPointers.forEach(function(p) {\r\n\t\t\t\tif(_tempCounter === 0) {\r\n\t\t\t\t\t_tempPointsArr[0] = p;\r\n\t\t\t\t} else if(_tempCounter === 1) {\r\n\t\t\t\t\t_tempPointsArr[1] = p;\r\n\t\t\t\t}\r\n\t\t\t\t_tempCounter++;\r\n\r\n\t\t\t});\r\n\t\t}\r\n\t\treturn _tempPointsArr;\r\n\t},\r\n\r\n\t_panOrMoveMainScroll = function(axis, delta) {\r\n\r\n\t\tvar panFriction,\r\n\t\t\toverDiff = 0,\r\n\t\t\tnewOffset = _panOffset[axis] + delta[axis],\r\n\t\t\tstartOverDiff,\r\n\t\t\tdir = delta[axis] > 0,\r\n\t\t\tnewMainScrollPosition = _mainScrollPos.x + delta.x,\r\n\t\t\tmainScrollDiff = _mainScrollPos.x - _startMainScrollPos.x,\r\n\t\t\tnewPanPos,\r\n\t\t\tnewMainScrollPos;\r\n\r\n\t\t// calculate fdistance over the bounds and friction\r\n\t\tif(newOffset > _currPanBounds.min[axis] || newOffset < _currPanBounds.max[axis]) {\r\n\t\t\tpanFriction = _options.panEndFriction;\r\n\t\t\t// Linear increasing of friction, so at 1/4 of viewport it's at max value.\r\n\t\t\t// Looks not as nice as was expected. Left for history.\r\n\t\t\t// panFriction = (1 - (_panOffset[axis] + delta[axis] + panBounds.min[axis]) / (_viewportSize[axis] / 4) );\r\n\t\t} else {\r\n\t\t\tpanFriction = 1;\r\n\t\t}\r\n\r\n\t\tnewOffset = _panOffset[axis] + delta[axis] * panFriction;\r\n\r\n\t\t// move main scroll or start panning\r\n\t\tif(_options.allowPanToNext || _currZoomLevel === self.currItem.initialZoomLevel) {\r\n\r\n\r\n\t\t\tif(!_currZoomElementStyle) {\r\n\r\n\t\t\t\tnewMainScrollPos = newMainScrollPosition;\r\n\r\n\t\t\t} else if(_direction === 'h' && axis === 'x' && !_zoomStarted ) {\r\n\r\n\t\t\t\tif(dir) {\r\n\t\t\t\t\tif(newOffset > _currPanBounds.min[axis]) {\r\n\t\t\t\t\t\tpanFriction = _options.panEndFriction;\r\n\t\t\t\t\t\toverDiff = _currPanBounds.min[axis] - newOffset;\r\n\t\t\t\t\t\tstartOverDiff = _currPanBounds.min[axis] - _startPanOffset[axis];\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// drag right\r\n\t\t\t\t\tif( (startOverDiff <= 0 || mainScrollDiff < 0) && _getNumItems() > 1 ) {\r\n\t\t\t\t\t\tnewMainScrollPos = newMainScrollPosition;\r\n\t\t\t\t\t\tif(mainScrollDiff < 0 && newMainScrollPosition > _startMainScrollPos.x) {\r\n\t\t\t\t\t\t\tnewMainScrollPos = _startMainScrollPos.x;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tif(_currPanBounds.min.x !== _currPanBounds.max.x) {\r\n\t\t\t\t\t\t\tnewPanPos = newOffset;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tif(newOffset < _currPanBounds.max[axis] ) {\r\n\t\t\t\t\t\tpanFriction =_options.panEndFriction;\r\n\t\t\t\t\t\toverDiff = newOffset - _currPanBounds.max[axis];\r\n\t\t\t\t\t\tstartOverDiff = _startPanOffset[axis] - _currPanBounds.max[axis];\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif( (startOverDiff <= 0 || mainScrollDiff > 0) && _getNumItems() > 1 ) {\r\n\t\t\t\t\t\tnewMainScrollPos = newMainScrollPosition;\r\n\r\n\t\t\t\t\t\tif(mainScrollDiff > 0 && newMainScrollPosition < _startMainScrollPos.x) {\r\n\t\t\t\t\t\t\tnewMainScrollPos = _startMainScrollPos.x;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tif(_currPanBounds.min.x !== _currPanBounds.max.x) {\r\n\t\t\t\t\t\t\tnewPanPos = newOffset;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\r\n\t\t\t\t//\r\n\t\t\t}\r\n\r\n\t\t\tif(axis === 'x') {\r\n\r\n\t\t\t\tif(newMainScrollPos !== undefined) {\r\n\t\t\t\t\t_moveMainScroll(newMainScrollPos, true);\r\n\t\t\t\t\tif(newMainScrollPos === _startMainScrollPos.x) {\r\n\t\t\t\t\t\t_mainScrollShifted = false;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\t_mainScrollShifted = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(_currPanBounds.min.x !== _currPanBounds.max.x) {\r\n\t\t\t\t\tif(newPanPos !== undefined) {\r\n\t\t\t\t\t\t_panOffset.x = newPanPos;\r\n\t\t\t\t\t} else if(!_mainScrollShifted) {\r\n\t\t\t\t\t\t_panOffset.x += delta.x * panFriction;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn newMainScrollPos !== undefined;\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif(!_mainScrollAnimating) {\r\n\r\n\t\t\tif(!_mainScrollShifted) {\r\n\t\t\t\tif(_currZoomLevel > self.currItem.fitRatio) {\r\n\t\t\t\t\t_panOffset[axis] += delta[axis] * panFriction;\r\n\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\t// Pointerdown/touchstart/mousedown handler\r\n\t_onDragStart = function(e) {\r\n\r\n\t\t// Allow dragging only via left mouse button.\r\n\t\t// As this handler is not added in IE8 - we ignore e.which\r\n\t\t//\r\n\t\t// http://www.quirksmode.org/js/events_properties.html\r\n\t\t// https://developer.mozilla.org/en-US/docs/Web/API/event.button\r\n\t\tif(e.type === 'mousedown' && e.button > 0  ) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif(_initialZoomRunning) {\r\n\t\t\te.preventDefault();\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif(_oldAndroidTouchEndTimeout && e.type === 'mousedown') {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif(_preventDefaultEventBehaviour(e, true)) {\r\n\t\t\te.preventDefault();\r\n\t\t}\r\n\r\n\r\n\r\n\t\t_shout('pointerDown');\r\n\r\n\t\tif(_pointerEventEnabled) {\r\n\t\t\tvar pointerIndex = framework.arraySearch(_currPointers, e.pointerId, 'id');\r\n\t\t\tif(pointerIndex < 0) {\r\n\t\t\t\tpointerIndex = _currPointers.length;\r\n\t\t\t}\r\n\t\t\t_currPointers[pointerIndex] = {x:e.pageX, y:e.pageY, id: e.pointerId};\r\n\t\t}\r\n\r\n\r\n\r\n\t\tvar startPointsList = _getTouchPoints(e),\r\n\t\t\tnumPoints = startPointsList.length;\r\n\r\n\t\t_currentPoints = null;\r\n\r\n\t\t_stopAllAnimations();\r\n\r\n\t\t// init drag\r\n\t\tif(!_isDragging || numPoints === 1) {\r\n\r\n\r\n\r\n\t\t\t_isDragging = _isFirstMove = true;\r\n\t\t\tframework.bind(window, _upMoveEvents, self);\r\n\r\n\t\t\t_isZoomingIn =\r\n\t\t\t\t_wasOverInitialZoom =\r\n\t\t\t\t_opacityChanged =\r\n\t\t\t\t_verticalDragInitiated =\r\n\t\t\t\t_mainScrollShifted =\r\n\t\t\t\t_moved =\r\n\t\t\t\t_isMultitouch =\r\n\t\t\t\t_zoomStarted = false;\r\n\r\n\t\t\t_direction = null;\r\n\r\n\t\t\t_shout('firstTouchStart', startPointsList);\r\n\r\n\t\t\t_equalizePoints(_startPanOffset, _panOffset);\r\n\r\n\t\t\t_currPanDist.x = _currPanDist.y = 0;\r\n\t\t\t_equalizePoints(_currPoint, startPointsList[0]);\r\n\t\t\t_equalizePoints(_startPoint, _currPoint);\r\n\r\n\t\t\t//_equalizePoints(_startMainScrollPos, _mainScrollPos);\r\n\t\t\t_startMainScrollPos.x = _slideSize.x * _currPositionIndex;\r\n\r\n\t\t\t_posPoints = [{\r\n\t\t\t\tx: _currPoint.x,\r\n\t\t\t\ty: _currPoint.y\r\n\t\t\t}];\r\n\r\n\t\t\t_gestureCheckSpeedTime = _gestureStartTime = _getCurrentTime();\r\n\r\n\t\t\t//_mainScrollAnimationEnd(true);\r\n\t\t\t_calculatePanBounds( _currZoomLevel, true );\r\n\r\n\t\t\t// Start rendering\r\n\t\t\t_stopDragUpdateLoop();\r\n\t\t\t_dragUpdateLoop();\r\n\r\n\t\t}\r\n\r\n\t\t// init zoom\r\n\t\tif(!_isZooming && numPoints > 1 && !_mainScrollAnimating && !_mainScrollShifted) {\r\n\t\t\t_startZoomLevel = _currZoomLevel;\r\n\t\t\t_zoomStarted = false; // true if zoom changed at least once\r\n\r\n\t\t\t_isZooming = _isMultitouch = true;\r\n\t\t\t_currPanDist.y = _currPanDist.x = 0;\r\n\r\n\t\t\t_equalizePoints(_startPanOffset, _panOffset);\r\n\r\n\t\t\t_equalizePoints(p, startPointsList[0]);\r\n\t\t\t_equalizePoints(p2, startPointsList[1]);\r\n\r\n\t\t\t_findCenterOfPoints(p, p2, _currCenterPoint);\r\n\r\n\t\t\t_midZoomPoint.x = Math.abs(_currCenterPoint.x) - _panOffset.x;\r\n\t\t\t_midZoomPoint.y = Math.abs(_currCenterPoint.y) - _panOffset.y;\r\n\t\t\t_currPointsDistance = _startPointsDistance = _calculatePointsDistance(p, p2);\r\n\t\t}\r\n\r\n\r\n\t},\r\n\r\n\t// Pointermove/touchmove/mousemove handler\r\n\t_onDragMove = function(e) {\r\n\r\n\t\te.preventDefault();\r\n\r\n\t\tif(_pointerEventEnabled) {\r\n\t\t\tvar pointerIndex = framework.arraySearch(_currPointers, e.pointerId, 'id');\r\n\t\t\tif(pointerIndex > -1) {\r\n\t\t\t\tvar p = _currPointers[pointerIndex];\r\n\t\t\t\tp.x = e.pageX;\r\n\t\t\t\tp.y = e.pageY;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif(_isDragging) {\r\n\t\t\tvar touchesList = _getTouchPoints(e);\r\n\t\t\tif(!_direction && !_moved && !_isZooming) {\r\n\r\n\t\t\t\tif(_mainScrollPos.x !== _slideSize.x * _currPositionIndex) {\r\n\t\t\t\t\t// if main scroll position is shifted  direction is always horizontal\r\n\t\t\t\t\t_direction = 'h';\r\n\t\t\t\t} else {\r\n\t\t\t\t\tvar diff = Math.abs(touchesList[0].x - _currPoint.x) - Math.abs(touchesList[0].y - _currPoint.y);\r\n\t\t\t\t\t// check the direction of movement\r\n\t\t\t\t\tif(Math.abs(diff) >= DIRECTION_CHECK_OFFSET) {\r\n\t\t\t\t\t\t_direction = diff > 0 ? 'h' : 'v';\r\n\t\t\t\t\t\t_currentPoints = touchesList;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t} else {\r\n\t\t\t\t_currentPoints = touchesList;\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\t//\r\n\t_renderMovement =  function() {\r\n\r\n\t\tif(!_currentPoints) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tvar numPoints = _currentPoints.length;\r\n\r\n\t\tif(numPoints === 0) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t_equalizePoints(p, _currentPoints[0]);\r\n\r\n\t\tdelta.x = p.x - _currPoint.x;\r\n\t\tdelta.y = p.y - _currPoint.y;\r\n\r\n\t\tif(_isZooming && numPoints > 1) {\r\n\t\t\t// Handle behaviour for more than 1 point\r\n\r\n\t\t\t_currPoint.x = p.x;\r\n\t\t\t_currPoint.y = p.y;\r\n\r\n\t\t\t// check if one of two points changed\r\n\t\t\tif( !delta.x && !delta.y && _isEqualPoints(_currentPoints[1], p2) ) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\t_equalizePoints(p2, _currentPoints[1]);\r\n\r\n\r\n\t\t\tif(!_zoomStarted) {\r\n\t\t\t\t_zoomStarted = true;\r\n\t\t\t\t_shout('zoomGestureStarted');\r\n\t\t\t}\r\n\r\n\t\t\t// Distance between two points\r\n\t\t\tvar pointsDistance = _calculatePointsDistance(p,p2);\r\n\r\n\t\t\tvar zoomLevel = _calculateZoomLevel(pointsDistance);\r\n\r\n\t\t\t// slightly over the of initial zoom level\r\n\t\t\tif(zoomLevel > self.currItem.initialZoomLevel + self.currItem.initialZoomLevel / 15) {\r\n\t\t\t\t_wasOverInitialZoom = true;\r\n\t\t\t}\r\n\r\n\t\t\t// Apply the friction if zoom level is out of the bounds\r\n\t\t\tvar zoomFriction = 1,\r\n\t\t\t\tminZoomLevel = _getMinZoomLevel(),\r\n\t\t\t\tmaxZoomLevel = _getMaxZoomLevel();\r\n\r\n\t\t\tif ( zoomLevel < minZoomLevel ) {\r\n\r\n\t\t\t\tif(_options.pinchToClose && !_wasOverInitialZoom && _startZoomLevel <= self.currItem.initialZoomLevel) {\r\n\t\t\t\t\t// fade out background if zooming out\r\n\t\t\t\t\tvar minusDiff = minZoomLevel - zoomLevel;\r\n\t\t\t\t\tvar percent = 1 - minusDiff / (minZoomLevel / 1.2);\r\n\r\n\t\t\t\t\t_applyBgOpacity(percent);\r\n\t\t\t\t\t_shout('onPinchClose', percent);\r\n\t\t\t\t\t_opacityChanged = true;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tzoomFriction = (minZoomLevel - zoomLevel) / minZoomLevel;\r\n\t\t\t\t\tif(zoomFriction > 1) {\r\n\t\t\t\t\t\tzoomFriction = 1;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tzoomLevel = minZoomLevel - zoomFriction * (minZoomLevel / 3);\r\n\t\t\t\t}\r\n\r\n\t\t\t} else if ( zoomLevel > maxZoomLevel ) {\r\n\t\t\t\t// 1.5 - extra zoom level above the max. E.g. if max is x6, real max 6 + 1.5 = 7.5\r\n\t\t\t\tzoomFriction = (zoomLevel - maxZoomLevel) / ( minZoomLevel * 6 );\r\n\t\t\t\tif(zoomFriction > 1) {\r\n\t\t\t\t\tzoomFriction = 1;\r\n\t\t\t\t}\r\n\t\t\t\tzoomLevel = maxZoomLevel + zoomFriction * minZoomLevel;\r\n\t\t\t}\r\n\r\n\t\t\tif(zoomFriction < 0) {\r\n\t\t\t\tzoomFriction = 0;\r\n\t\t\t}\r\n\r\n\t\t\t// distance between touch points after friction is applied\r\n\t\t\t_currPointsDistance = pointsDistance;\r\n\r\n\t\t\t// _centerPoint - The point in the middle of two pointers\r\n\t\t\t_findCenterOfPoints(p, p2, _centerPoint);\r\n\r\n\t\t\t// paning with two pointers pressed\r\n\t\t\t_currPanDist.x += _centerPoint.x - _currCenterPoint.x;\r\n\t\t\t_currPanDist.y += _centerPoint.y - _currCenterPoint.y;\r\n\t\t\t_equalizePoints(_currCenterPoint, _centerPoint);\r\n\r\n\t\t\t_panOffset.x = _calculatePanOffset('x', zoomLevel);\r\n\t\t\t_panOffset.y = _calculatePanOffset('y', zoomLevel);\r\n\r\n\t\t\t_isZoomingIn = zoomLevel > _currZoomLevel;\r\n\t\t\t_currZoomLevel = zoomLevel;\r\n\t\t\t_applyCurrentZoomPan();\r\n\r\n\t\t} else {\r\n\r\n\t\t\t// handle behaviour for one point (dragging or panning)\r\n\r\n\t\t\tif(!_direction) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tif(_isFirstMove) {\r\n\t\t\t\t_isFirstMove = false;\r\n\r\n\t\t\t\t// subtract drag distance that was used during the detection direction\r\n\r\n\t\t\t\tif( Math.abs(delta.x) >= DIRECTION_CHECK_OFFSET) {\r\n\t\t\t\t\tdelta.x -= _currentPoints[0].x - _startPoint.x;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif( Math.abs(delta.y) >= DIRECTION_CHECK_OFFSET) {\r\n\t\t\t\t\tdelta.y -= _currentPoints[0].y - _startPoint.y;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t_currPoint.x = p.x;\r\n\t\t\t_currPoint.y = p.y;\r\n\r\n\t\t\t// do nothing if pointers position hasn't changed\r\n\t\t\tif(delta.x === 0 && delta.y === 0) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tif(_direction === 'v' && _options.closeOnVerticalDrag) {\r\n\t\t\t\tif(!_canPan()) {\r\n\t\t\t\t\t_currPanDist.y += delta.y;\r\n\t\t\t\t\t_panOffset.y += delta.y;\r\n\r\n\t\t\t\t\tvar opacityRatio = _calculateVerticalDragOpacityRatio();\r\n\r\n\t\t\t\t\t_verticalDragInitiated = true;\r\n\t\t\t\t\t_shout('onVerticalDrag', opacityRatio);\r\n\r\n\t\t\t\t\t_applyBgOpacity(opacityRatio);\r\n\t\t\t\t\t_applyCurrentZoomPan();\r\n\t\t\t\t\treturn ;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t_pushPosPoint(_getCurrentTime(), p.x, p.y);\r\n\r\n\t\t\t_moved = true;\r\n\t\t\t_currPanBounds = self.currItem.bounds;\r\n\r\n\t\t\tvar mainScrollChanged = _panOrMoveMainScroll('x', delta);\r\n\t\t\tif(!mainScrollChanged) {\r\n\t\t\t\t_panOrMoveMainScroll('y', delta);\r\n\r\n\t\t\t\t_roundPoint(_panOffset);\r\n\t\t\t\t_applyCurrentZoomPan();\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\t// Pointerup/pointercancel/touchend/touchcancel/mouseup event handler\r\n\t_onDragRelease = function(e) {\r\n\r\n\t\tif(_features.isOldAndroid ) {\r\n\r\n\t\t\tif(_oldAndroidTouchEndTimeout && e.type === 'mouseup') {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\t// on Android (v4.1, 4.2, 4.3 & possibly older)\r\n\t\t\t// ghost mousedown/up event isn't preventable via e.preventDefault,\r\n\t\t\t// which causes fake mousedown event\r\n\t\t\t// so we block mousedown/up for 600ms\r\n\t\t\tif( e.type.indexOf('touch') > -1 ) {\r\n\t\t\t\tclearTimeout(_oldAndroidTouchEndTimeout);\r\n\t\t\t\t_oldAndroidTouchEndTimeout = setTimeout(function() {\r\n\t\t\t\t\t_oldAndroidTouchEndTimeout = 0;\r\n\t\t\t\t}, 600);\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t_shout('pointerUp');\r\n\r\n\t\tif(_preventDefaultEventBehaviour(e, false)) {\r\n\t\t\te.preventDefault();\r\n\t\t}\r\n\r\n\t\tvar releasePoint;\r\n\r\n\t\tif(_pointerEventEnabled) {\r\n\t\t\tvar pointerIndex = framework.arraySearch(_currPointers, e.pointerId, 'id');\r\n\r\n\t\t\tif(pointerIndex > -1) {\r\n\t\t\t\treleasePoint = _currPointers.splice(pointerIndex, 1)[0];\r\n\r\n\t\t\t\tif(navigator.pointerEnabled) {\r\n\t\t\t\t\treleasePoint.type = e.pointerType || 'mouse';\r\n\t\t\t\t} else {\r\n\t\t\t\t\tvar MSPOINTER_TYPES = {\r\n\t\t\t\t\t\t4: 'mouse', // event.MSPOINTER_TYPE_MOUSE\r\n\t\t\t\t\t\t2: 'touch', // event.MSPOINTER_TYPE_TOUCH\r\n\t\t\t\t\t\t3: 'pen' // event.MSPOINTER_TYPE_PEN\r\n\t\t\t\t\t};\r\n\t\t\t\t\treleasePoint.type = MSPOINTER_TYPES[e.pointerType];\r\n\r\n\t\t\t\t\tif(!releasePoint.type) {\r\n\t\t\t\t\t\treleasePoint.type = e.pointerType || 'mouse';\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tvar touchList = _getTouchPoints(e),\r\n\t\t\tgestureType,\r\n\t\t\tnumPoints = touchList.length;\r\n\r\n\t\tif(e.type === 'mouseup') {\r\n\t\t\tnumPoints = 0;\r\n\t\t}\r\n\r\n\t\t// Do nothing if there were 3 touch points or more\r\n\t\tif(numPoints === 2) {\r\n\t\t\t_currentPoints = null;\r\n\t\t\treturn true;\r\n\t\t}\r\n\r\n\t\t// if second pointer released\r\n\t\tif(numPoints === 1) {\r\n\t\t\t_equalizePoints(_startPoint, touchList[0]);\r\n\t\t}\r\n\r\n\r\n\t\t// pointer hasn't moved, send \"tap release\" point\r\n\t\tif(numPoints === 0 && !_direction && !_mainScrollAnimating) {\r\n\t\t\tif(!releasePoint) {\r\n\t\t\t\tif(e.type === 'mouseup') {\r\n\t\t\t\t\treleasePoint = {x: e.pageX, y: e.pageY, type:'mouse'};\r\n\t\t\t\t} else if(e.changedTouches && e.changedTouches[0]) {\r\n\t\t\t\t\treleasePoint = {x: e.changedTouches[0].pageX, y: e.changedTouches[0].pageY, type:'touch'};\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t_shout('touchRelease', e, releasePoint);\r\n\t\t}\r\n\r\n\t\t// Difference in time between releasing of two last touch points (zoom gesture)\r\n\t\tvar releaseTimeDiff = -1;\r\n\r\n\t\t// Gesture completed, no pointers left\r\n\t\tif(numPoints === 0) {\r\n\t\t\t_isDragging = false;\r\n\t\t\tframework.unbind(window, _upMoveEvents, self);\r\n\r\n\t\t\t_stopDragUpdateLoop();\r\n\r\n\t\t\tif(_isZooming) {\r\n\t\t\t\t// Two points released at the same time\r\n\t\t\t\treleaseTimeDiff = 0;\r\n\t\t\t} else if(_lastReleaseTime !== -1) {\r\n\t\t\t\treleaseTimeDiff = _getCurrentTime() - _lastReleaseTime;\r\n\t\t\t}\r\n\t\t}\r\n\t\t_lastReleaseTime = numPoints === 1 ? _getCurrentTime() : -1;\r\n\r\n\t\tif(releaseTimeDiff !== -1 && releaseTimeDiff < 150) {\r\n\t\t\tgestureType = 'zoom';\r\n\t\t} else {\r\n\t\t\tgestureType = 'swipe';\r\n\t\t}\r\n\r\n\t\tif(_isZooming && numPoints < 2) {\r\n\t\t\t_isZooming = false;\r\n\r\n\t\t\t// Only second point released\r\n\t\t\tif(numPoints === 1) {\r\n\t\t\t\tgestureType = 'zoomPointerUp';\r\n\t\t\t}\r\n\t\t\t_shout('zoomGestureEnded');\r\n\t\t}\r\n\r\n\t\t_currentPoints = null;\r\n\t\tif(!_moved && !_zoomStarted && !_mainScrollAnimating && !_verticalDragInitiated) {\r\n\t\t\t// nothing to animate\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t_stopAllAnimations();\r\n\r\n\r\n\t\tif(!_releaseAnimData) {\r\n\t\t\t_releaseAnimData = _initDragReleaseAnimationData();\r\n\t\t}\r\n\r\n\t\t_releaseAnimData.calculateSwipeSpeed('x');\r\n\r\n\r\n\t\tif(_verticalDragInitiated) {\r\n\r\n\t\t\tvar opacityRatio = _calculateVerticalDragOpacityRatio();\r\n\r\n\t\t\tif(opacityRatio < _options.verticalDragRange) {\r\n\t\t\t\tself.close();\r\n\t\t\t} else {\r\n\t\t\t\tvar initalPanY = _panOffset.y,\r\n\t\t\t\t\tinitialBgOpacity = _bgOpacity;\r\n\r\n\t\t\t\t_animateProp('verticalDrag', 0, 1, 300, framework.easing.cubic.out, function(now) {\r\n\r\n\t\t\t\t\t_panOffset.y = (self.currItem.initialPosition.y - initalPanY) * now + initalPanY;\r\n\r\n\t\t\t\t\t_applyBgOpacity(  (1 - initialBgOpacity) * now + initialBgOpacity );\r\n\t\t\t\t\t_applyCurrentZoomPan();\r\n\t\t\t\t});\r\n\r\n\t\t\t\t_shout('onVerticalDrag', 1);\r\n\t\t\t}\r\n\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\r\n\t\t// main scroll\r\n\t\tif(  (_mainScrollShifted || _mainScrollAnimating) && numPoints === 0) {\r\n\t\t\tvar itemChanged = _finishSwipeMainScrollGesture(gestureType, _releaseAnimData);\r\n\t\t\tif(itemChanged) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tgestureType = 'zoomPointerUp';\r\n\t\t}\r\n\r\n\t\t// prevent zoom/pan animation when main scroll animation runs\r\n\t\tif(_mainScrollAnimating) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t// Complete simple zoom gesture (reset zoom level if it's out of the bounds)\r\n\t\tif(gestureType !== 'swipe') {\r\n\t\t\t_completeZoomGesture();\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t// Complete pan gesture if main scroll is not shifted, and it's possible to pan current image\r\n\t\tif(!_mainScrollShifted && _currZoomLevel > self.currItem.fitRatio) {\r\n\t\t\t_completePanGesture(_releaseAnimData);\r\n\t\t}\r\n\t},\r\n\r\n\r\n\t// Returns object with data about gesture\r\n\t// It's created only once and then reused\r\n\t_initDragReleaseAnimationData  = function() {\r\n\t\t// temp local vars\r\n\t\tvar lastFlickDuration,\r\n\t\t\ttempReleasePos;\r\n\r\n\t\t// s = this\r\n\t\tvar s = {\r\n\t\t\tlastFlickOffset: {},\r\n\t\t\tlastFlickDist: {},\r\n\t\t\tlastFlickSpeed: {},\r\n\t\t\tslowDownRatio:  {},\r\n\t\t\tslowDownRatioReverse:  {},\r\n\t\t\tspeedDecelerationRatio:  {},\r\n\t\t\tspeedDecelerationRatioAbs:  {},\r\n\t\t\tdistanceOffset:  {},\r\n\t\t\tbackAnimDestination: {},\r\n\t\t\tbackAnimStarted: {},\r\n\t\t\tcalculateSwipeSpeed: function(axis) {\r\n\r\n\r\n\t\t\t\tif( _posPoints.length > 1) {\r\n\t\t\t\t\tlastFlickDuration = _getCurrentTime() - _gestureCheckSpeedTime + 50;\r\n\t\t\t\t\ttempReleasePos = _posPoints[_posPoints.length-2][axis];\r\n\t\t\t\t} else {\r\n\t\t\t\t\tlastFlickDuration = _getCurrentTime() - _gestureStartTime; // total gesture duration\r\n\t\t\t\t\ttempReleasePos = _startPoint[axis];\r\n\t\t\t\t}\r\n\t\t\t\ts.lastFlickOffset[axis] = _currPoint[axis] - tempReleasePos;\r\n\t\t\t\ts.lastFlickDist[axis] = Math.abs(s.lastFlickOffset[axis]);\r\n\t\t\t\tif(s.lastFlickDist[axis] > 20) {\r\n\t\t\t\t\ts.lastFlickSpeed[axis] = s.lastFlickOffset[axis] / lastFlickDuration;\r\n\t\t\t\t} else {\r\n\t\t\t\t\ts.lastFlickSpeed[axis] = 0;\r\n\t\t\t\t}\r\n\t\t\t\tif( Math.abs(s.lastFlickSpeed[axis]) < 0.1 ) {\r\n\t\t\t\t\ts.lastFlickSpeed[axis] = 0;\r\n\t\t\t\t}\r\n\r\n\t\t\t\ts.slowDownRatio[axis] = 0.95;\r\n\t\t\t\ts.slowDownRatioReverse[axis] = 1 - s.slowDownRatio[axis];\r\n\t\t\t\ts.speedDecelerationRatio[axis] = 1;\r\n\t\t\t},\r\n\r\n\t\t\tcalculateOverBoundsAnimOffset: function(axis, speed) {\r\n\t\t\t\tif(!s.backAnimStarted[axis]) {\r\n\r\n\t\t\t\t\tif(_panOffset[axis] > _currPanBounds.min[axis]) {\r\n\t\t\t\t\t\ts.backAnimDestination[axis] = _currPanBounds.min[axis];\r\n\r\n\t\t\t\t\t} else if(_panOffset[axis] < _currPanBounds.max[axis]) {\r\n\t\t\t\t\t\ts.backAnimDestination[axis] = _currPanBounds.max[axis];\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif(s.backAnimDestination[axis] !== undefined) {\r\n\t\t\t\t\t\ts.slowDownRatio[axis] = 0.7;\r\n\t\t\t\t\t\ts.slowDownRatioReverse[axis] = 1 - s.slowDownRatio[axis];\r\n\t\t\t\t\t\tif(s.speedDecelerationRatioAbs[axis] < 0.05) {\r\n\r\n\t\t\t\t\t\t\ts.lastFlickSpeed[axis] = 0;\r\n\t\t\t\t\t\t\ts.backAnimStarted[axis] = true;\r\n\r\n\t\t\t\t\t\t\t_animateProp('bounceZoomPan'+axis,_panOffset[axis],\r\n\t\t\t\t\t\t\t\ts.backAnimDestination[axis],\r\n\t\t\t\t\t\t\t\tspeed || 300,\r\n\t\t\t\t\t\t\t\tframework.easing.sine.out,\r\n\t\t\t\t\t\t\t\tfunction(pos) {\r\n\t\t\t\t\t\t\t\t\t_panOffset[axis] = pos;\r\n\t\t\t\t\t\t\t\t\t_applyCurrentZoomPan();\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t);\r\n\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\t\t\t// Reduces the speed by slowDownRatio (per 10ms)\r\n\t\t\tcalculateAnimOffset: function(axis) {\r\n\t\t\t\tif(!s.backAnimStarted[axis]) {\r\n\t\t\t\t\ts.speedDecelerationRatio[axis] = s.speedDecelerationRatio[axis] * (s.slowDownRatio[axis] +\r\n\t\t\t\t\t\t\t\t\t\t\t\ts.slowDownRatioReverse[axis] -\r\n\t\t\t\t\t\t\t\t\t\t\t\ts.slowDownRatioReverse[axis] * s.timeDiff / 10);\r\n\r\n\t\t\t\t\ts.speedDecelerationRatioAbs[axis] = Math.abs(s.lastFlickSpeed[axis] * s.speedDecelerationRatio[axis]);\r\n\t\t\t\t\ts.distanceOffset[axis] = s.lastFlickSpeed[axis] * s.speedDecelerationRatio[axis] * s.timeDiff;\r\n\t\t\t\t\t_panOffset[axis] += s.distanceOffset[axis];\r\n\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\t\t\tpanAnimLoop: function() {\r\n\t\t\t\tif ( _animations.zoomPan ) {\r\n\t\t\t\t\t_animations.zoomPan.raf = _requestAF(s.panAnimLoop);\r\n\r\n\t\t\t\t\ts.now = _getCurrentTime();\r\n\t\t\t\t\ts.timeDiff = s.now - s.lastNow;\r\n\t\t\t\t\ts.lastNow = s.now;\r\n\r\n\t\t\t\t\ts.calculateAnimOffset('x');\r\n\t\t\t\t\ts.calculateAnimOffset('y');\r\n\r\n\t\t\t\t\t_applyCurrentZoomPan();\r\n\r\n\t\t\t\t\ts.calculateOverBoundsAnimOffset('x');\r\n\t\t\t\t\ts.calculateOverBoundsAnimOffset('y');\r\n\r\n\r\n\t\t\t\t\tif (s.speedDecelerationRatioAbs.x < 0.05 && s.speedDecelerationRatioAbs.y < 0.05) {\r\n\r\n\t\t\t\t\t\t// round pan position\r\n\t\t\t\t\t\t_panOffset.x = Math.round(_panOffset.x);\r\n\t\t\t\t\t\t_panOffset.y = Math.round(_panOffset.y);\r\n\t\t\t\t\t\t_applyCurrentZoomPan();\r\n\r\n\t\t\t\t\t\t_stopAnimation('zoomPan');\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\t\t};\r\n\t\treturn s;\r\n\t},\r\n\r\n\t_completePanGesture = function(animData) {\r\n\t\t// calculate swipe speed for Y axis (paanning)\r\n\t\tanimData.calculateSwipeSpeed('y');\r\n\r\n\t\t_currPanBounds = self.currItem.bounds;\r\n\r\n\t\tanimData.backAnimDestination = {};\r\n\t\tanimData.backAnimStarted = {};\r\n\r\n\t\t// Avoid acceleration animation if speed is too low\r\n\t\tif(Math.abs(animData.lastFlickSpeed.x) <= 0.05 && Math.abs(animData.lastFlickSpeed.y) <= 0.05 ) {\r\n\t\t\tanimData.speedDecelerationRatioAbs.x = animData.speedDecelerationRatioAbs.y = 0;\r\n\r\n\t\t\t// Run pan drag release animation. E.g. if you drag image and release finger without momentum.\r\n\t\t\tanimData.calculateOverBoundsAnimOffset('x');\r\n\t\t\tanimData.calculateOverBoundsAnimOffset('y');\r\n\t\t\treturn true;\r\n\t\t}\r\n\r\n\t\t// Animation loop that controls the acceleration after pan gesture ends\r\n\t\t_registerStartAnimation('zoomPan');\r\n\t\tanimData.lastNow = _getCurrentTime();\r\n\t\tanimData.panAnimLoop();\r\n\t},\r\n\r\n\r\n\t_finishSwipeMainScrollGesture = function(gestureType, _releaseAnimData) {\r\n\t\tvar itemChanged;\r\n\t\tif(!_mainScrollAnimating) {\r\n\t\t\t_currZoomedItemIndex = _currentItemIndex;\r\n\t\t}\r\n\r\n\r\n\r\n\t\tvar itemsDiff;\r\n\r\n\t\tif(gestureType === 'swipe') {\r\n\t\t\tvar totalShiftDist = _currPoint.x - _startPoint.x,\r\n\t\t\t\tisFastLastFlick = _releaseAnimData.lastFlickDist.x < 10;\r\n\r\n\t\t\t// if container is shifted for more than MIN_SWIPE_DISTANCE,\r\n\t\t\t// and last flick gesture was in right direction\r\n\t\t\tif(totalShiftDist > MIN_SWIPE_DISTANCE &&\r\n\t\t\t\t(isFastLastFlick || _releaseAnimData.lastFlickOffset.x > 20) ) {\r\n\t\t\t\t// go to prev item\r\n\t\t\t\titemsDiff = -1;\r\n\t\t\t} else if(totalShiftDist < -MIN_SWIPE_DISTANCE &&\r\n\t\t\t\t(isFastLastFlick || _releaseAnimData.lastFlickOffset.x < -20) ) {\r\n\t\t\t\t// go to next item\r\n\t\t\t\titemsDiff = 1;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tvar nextCircle;\r\n\r\n\t\tif(itemsDiff) {\r\n\r\n\t\t\t_currentItemIndex += itemsDiff;\r\n\r\n\t\t\tif(_currentItemIndex < 0) {\r\n\t\t\t\t_currentItemIndex = _options.loop ? _getNumItems()-1 : 0;\r\n\t\t\t\tnextCircle = true;\r\n\t\t\t} else if(_currentItemIndex >= _getNumItems()) {\r\n\t\t\t\t_currentItemIndex = _options.loop ? 0 : _getNumItems()-1;\r\n\t\t\t\tnextCircle = true;\r\n\t\t\t}\r\n\r\n\t\t\tif(!nextCircle || _options.loop) {\r\n\t\t\t\t_indexDiff += itemsDiff;\r\n\t\t\t\t_currPositionIndex -= itemsDiff;\r\n\t\t\t\titemChanged = true;\r\n\t\t\t}\r\n\r\n\r\n\r\n\t\t}\r\n\r\n\t\tvar animateToX = _slideSize.x * _currPositionIndex;\r\n\t\tvar animateToDist = Math.abs( animateToX - _mainScrollPos.x );\r\n\t\tvar finishAnimDuration;\r\n\r\n\r\n\t\tif(!itemChanged && animateToX > _mainScrollPos.x !== _releaseAnimData.lastFlickSpeed.x > 0) {\r\n\t\t\t// \"return to current\" duration, e.g. when dragging from slide 0 to -1\r\n\t\t\tfinishAnimDuration = 333;\r\n\t\t} else {\r\n\t\t\tfinishAnimDuration = Math.abs(_releaseAnimData.lastFlickSpeed.x) > 0 ?\r\n\t\t\t\t\t\t\t\t\tanimateToDist / Math.abs(_releaseAnimData.lastFlickSpeed.x) :\r\n\t\t\t\t\t\t\t\t\t333;\r\n\r\n\t\t\tfinishAnimDuration = Math.min(finishAnimDuration, 400);\r\n\t\t\tfinishAnimDuration = Math.max(finishAnimDuration, 250);\r\n\t\t}\r\n\r\n\t\tif(_currZoomedItemIndex === _currentItemIndex) {\r\n\t\t\titemChanged = false;\r\n\t\t}\r\n\r\n\t\t_mainScrollAnimating = true;\r\n\r\n\t\t_shout('mainScrollAnimStart');\r\n\r\n\t\t_animateProp('mainScroll', _mainScrollPos.x, animateToX, finishAnimDuration, framework.easing.cubic.out,\r\n\t\t\t_moveMainScroll,\r\n\t\t\tfunction() {\r\n\t\t\t\t_stopAllAnimations();\r\n\t\t\t\t_mainScrollAnimating = false;\r\n\t\t\t\t_currZoomedItemIndex = -1;\r\n\r\n\t\t\t\tif(itemChanged || _currZoomedItemIndex !== _currentItemIndex) {\r\n\t\t\t\t\tself.updateCurrItem();\r\n\t\t\t\t}\r\n\r\n\t\t\t\t_shout('mainScrollAnimComplete');\r\n\t\t\t}\r\n\t\t);\r\n\r\n\t\tif(itemChanged) {\r\n\t\t\tself.updateCurrItem(true);\r\n\t\t}\r\n\r\n\t\treturn itemChanged;\r\n\t},\r\n\r\n\t_calculateZoomLevel = function(touchesDistance) {\r\n\t\treturn  1 / _startPointsDistance * touchesDistance * _startZoomLevel;\r\n\t},\r\n\r\n\t// Resets zoom if it's out of bounds\r\n\t_completeZoomGesture = function() {\r\n\t\tvar destZoomLevel = _currZoomLevel,\r\n\t\t\tminZoomLevel = _getMinZoomLevel(),\r\n\t\t\tmaxZoomLevel = _getMaxZoomLevel();\r\n\r\n\t\tif ( _currZoomLevel < minZoomLevel ) {\r\n\t\t\tdestZoomLevel = minZoomLevel;\r\n\t\t} else if ( _currZoomLevel > maxZoomLevel ) {\r\n\t\t\tdestZoomLevel = maxZoomLevel;\r\n\t\t}\r\n\r\n\t\tvar destOpacity = 1,\r\n\t\t\tonUpdate,\r\n\t\t\tinitialOpacity = _bgOpacity;\r\n\r\n\t\tif(_opacityChanged && !_isZoomingIn && !_wasOverInitialZoom && _currZoomLevel < minZoomLevel) {\r\n\t\t\t//_closedByScroll = true;\r\n\t\t\tself.close();\r\n\t\t\treturn true;\r\n\t\t}\r\n\r\n\t\tif(_opacityChanged) {\r\n\t\t\tonUpdate = function(now) {\r\n\t\t\t\t_applyBgOpacity(  (destOpacity - initialOpacity) * now + initialOpacity );\r\n\t\t\t};\r\n\t\t}\r\n\r\n\t\tself.zoomTo(destZoomLevel, 0, 200,  framework.easing.cubic.out, onUpdate);\r\n\t\treturn true;\r\n\t};\r\n\r\n\r\n_registerModule('Gestures', {\r\n\tpublicMethods: {\r\n\r\n\t\tinitGestures: function() {\r\n\r\n\t\t\t// helper function that builds touch/pointer/mouse events\r\n\t\t\tvar addEventNames = function(pref, down, move, up, cancel) {\r\n\t\t\t\t_dragStartEvent = pref + down;\r\n\t\t\t\t_dragMoveEvent = pref + move;\r\n\t\t\t\t_dragEndEvent = pref + up;\r\n\t\t\t\tif(cancel) {\r\n\t\t\t\t\t_dragCancelEvent = pref + cancel;\r\n\t\t\t\t} else {\r\n\t\t\t\t\t_dragCancelEvent = '';\r\n\t\t\t\t}\r\n\t\t\t};\r\n\r\n\t\t\t_pointerEventEnabled = _features.pointerEvent;\r\n\t\t\tif(_pointerEventEnabled && _features.touch) {\r\n\t\t\t\t// we don't need touch events, if browser supports pointer events\r\n\t\t\t\t_features.touch = false;\r\n\t\t\t}\r\n\r\n\t\t\tif(_pointerEventEnabled) {\r\n\t\t\t\tif(navigator.pointerEnabled) {\r\n\t\t\t\t\taddEventNames('pointer', 'down', 'move', 'up', 'cancel');\r\n\t\t\t\t} else {\r\n\t\t\t\t\t// IE10 pointer events are case-sensitive\r\n\t\t\t\t\taddEventNames('MSPointer', 'Down', 'Move', 'Up', 'Cancel');\r\n\t\t\t\t}\r\n\t\t\t} else if(_features.touch) {\r\n\t\t\t\taddEventNames('touch', 'start', 'move', 'end', 'cancel');\r\n\t\t\t\t_likelyTouchDevice = true;\r\n\t\t\t} else {\r\n\t\t\t\taddEventNames('mouse', 'down', 'move', 'up');\r\n\t\t\t}\r\n\r\n\t\t\t_upMoveEvents = _dragMoveEvent + ' ' + _dragEndEvent  + ' ' +  _dragCancelEvent;\r\n\t\t\t_downEvents = _dragStartEvent;\r\n\r\n\t\t\tif(_pointerEventEnabled && !_likelyTouchDevice) {\r\n\t\t\t\t_likelyTouchDevice = (navigator.maxTouchPoints > 1) || (navigator.msMaxTouchPoints > 1);\r\n\t\t\t}\r\n\t\t\t// make variable public\r\n\t\t\tself.likelyTouchDevice = _likelyTouchDevice;\r\n\r\n\t\t\t_globalEventHandlers[_dragStartEvent] = _onDragStart;\r\n\t\t\t_globalEventHandlers[_dragMoveEvent] = _onDragMove;\r\n\t\t\t_globalEventHandlers[_dragEndEvent] = _onDragRelease; // the Kraken\r\n\r\n\t\t\tif(_dragCancelEvent) {\r\n\t\t\t\t_globalEventHandlers[_dragCancelEvent] = _globalEventHandlers[_dragEndEvent];\r\n\t\t\t}\r\n\r\n\t\t\t// Bind mouse events on device with detected hardware touch support, in case it supports multiple types of input.\r\n\t\t\tif(_features.touch) {\r\n\t\t\t\t_downEvents += ' mousedown';\r\n\t\t\t\t_upMoveEvents += ' mousemove mouseup';\r\n\t\t\t\t_globalEventHandlers.mousedown = _globalEventHandlers[_dragStartEvent];\r\n\t\t\t\t_globalEventHandlers.mousemove = _globalEventHandlers[_dragMoveEvent];\r\n\t\t\t\t_globalEventHandlers.mouseup = _globalEventHandlers[_dragEndEvent];\r\n\t\t\t}\r\n\r\n\t\t\tif(!_likelyTouchDevice) {\r\n\t\t\t\t// don't allow pan to next slide from zoomed state on Desktop\r\n\t\t\t\t_options.allowPanToNext = false;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t}\r\n});\r\n\r\n\r\n/*>>gestures*/\r\n\r\n/*>>show-hide-transition*/\r\n/**\r\n * show-hide-transition.js:\r\n *\r\n * Manages initial opening or closing transition.\r\n *\r\n * If you're not planning to use transition for gallery at all,\r\n * you may set options hideAnimationDuration and showAnimationDuration to 0,\r\n * and just delete startAnimation function.\r\n *\r\n */\r\n\r\n\r\nvar _showOrHideTimeout,\r\n\t_showOrHide = function(item, img, out, completeFn) {\r\n\r\n\t\tif(_showOrHideTimeout) {\r\n\t\t\tclearTimeout(_showOrHideTimeout);\r\n\t\t}\r\n\r\n\t\t_initialZoomRunning = true;\r\n\t\t_initialContentSet = true;\r\n\r\n\t\t// dimensions of small thumbnail {x:,y:,w:}.\r\n\t\t// Height is optional, as calculated based on large image.\r\n\t\tvar thumbBounds;\r\n\t\tif(item.initialLayout) {\r\n\t\t\tthumbBounds = item.initialLayout;\r\n\t\t\titem.initialLayout = null;\r\n\t\t} else {\r\n\t\t\tthumbBounds = _options.getThumbBoundsFn && _options.getThumbBoundsFn(_currentItemIndex);\r\n\t\t}\r\n\r\n\t\tvar duration = out ? _options.hideAnimationDuration : _options.showAnimationDuration;\r\n\r\n\t\tvar onComplete = function() {\r\n\t\t\t_stopAnimation('initialZoom');\r\n\t\t\tif(!out) {\r\n\t\t\t\t_applyBgOpacity(1);\r\n\t\t\t\tif(img) {\r\n\t\t\t\t\timg.style.display = 'block';\r\n\t\t\t\t}\r\n\t\t\t\tframework.addClass(template, 'pswp--animated-in');\r\n\t\t\t\t_shout('initialZoom' + (out ? 'OutEnd' : 'InEnd'));\r\n\t\t\t} else {\r\n\t\t\t\tself.template.removeAttribute('style');\r\n\t\t\t\tself.bg.removeAttribute('style');\r\n\t\t\t}\r\n\r\n\t\t\tif(completeFn) {\r\n\t\t\t\tcompleteFn();\r\n\t\t\t}\r\n\t\t\t_initialZoomRunning = false;\r\n\t\t};\r\n\r\n\t\t// if bounds aren't provided, just open gallery without animation\r\n\t\tif(!duration || !thumbBounds || thumbBounds.x === undefined) {\r\n\r\n\t\t\t_shout('initialZoom' + (out ? 'Out' : 'In') );\r\n\r\n\t\t\t_currZoomLevel = item.initialZoomLevel;\r\n\t\t\t_equalizePoints(_panOffset,  item.initialPosition );\r\n\t\t\t_applyCurrentZoomPan();\r\n\r\n\t\t\ttemplate.style.opacity = out ? 0 : 1;\r\n\t\t\t_applyBgOpacity(1);\r\n\r\n\t\t\tif(duration) {\r\n\t\t\t\tsetTimeout(function() {\r\n\t\t\t\t\tonComplete();\r\n\t\t\t\t}, duration);\r\n\t\t\t} else {\r\n\t\t\t\tonComplete();\r\n\t\t\t}\r\n\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tvar startAnimation = function() {\r\n\t\t\tvar closeWithRaf = _closedByScroll,\r\n\t\t\t\tfadeEverything = !self.currItem.src || self.currItem.loadError || _options.showHideOpacity;\r\n\r\n\t\t\t// apply hw-acceleration to image\r\n\t\t\tif(item.miniImg) {\r\n\t\t\t\titem.miniImg.style.webkitBackfaceVisibility = 'hidden';\r\n\t\t\t}\r\n\r\n\t\t\tif(!out) {\r\n\t\t\t\t_currZoomLevel = thumbBounds.w / item.w;\r\n\t\t\t\t_panOffset.x = thumbBounds.x;\r\n\t\t\t\t_panOffset.y = thumbBounds.y - _initalWindowScrollY;\r\n\r\n\t\t\t\tself[fadeEverything ? 'template' : 'bg'].style.opacity = 0.001;\r\n\t\t\t\t_applyCurrentZoomPan();\r\n\t\t\t}\r\n\r\n\t\t\t_registerStartAnimation('initialZoom');\r\n\r\n\t\t\tif(out && !closeWithRaf) {\r\n\t\t\t\tframework.removeClass(template, 'pswp--animated-in');\r\n\t\t\t}\r\n\r\n\t\t\tif(fadeEverything) {\r\n\t\t\t\tif(out) {\r\n\t\t\t\t\tframework[ (closeWithRaf ? 'remove' : 'add') + 'Class' ](template, 'pswp--animate_opacity');\r\n\t\t\t\t} else {\r\n\t\t\t\t\tsetTimeout(function() {\r\n\t\t\t\t\t\tframework.addClass(template, 'pswp--animate_opacity');\r\n\t\t\t\t\t}, 30);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t_showOrHideTimeout = setTimeout(function() {\r\n\r\n\t\t\t\t_shout('initialZoom' + (out ? 'Out' : 'In') );\r\n\r\n\r\n\t\t\t\tif(!out) {\r\n\r\n\t\t\t\t\t// \"in\" animation always uses CSS transitions (instead of rAF).\r\n\t\t\t\t\t// CSS transition work faster here,\r\n\t\t\t\t\t// as developer may also want to animate other things,\r\n\t\t\t\t\t// like ui on top of sliding area, which can be animated just via CSS\r\n\r\n\t\t\t\t\t_currZoomLevel = item.initialZoomLevel;\r\n\t\t\t\t\t_equalizePoints(_panOffset,  item.initialPosition );\r\n\t\t\t\t\t_applyCurrentZoomPan();\r\n\t\t\t\t\t_applyBgOpacity(1);\r\n\r\n\t\t\t\t\tif(fadeEverything) {\r\n\t\t\t\t\t\ttemplate.style.opacity = 1;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\t_applyBgOpacity(1);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t_showOrHideTimeout = setTimeout(onComplete, duration + 20);\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\t// \"out\" animation uses rAF only when PhotoSwipe is closed by browser scroll, to recalculate position\r\n\t\t\t\t\tvar destZoomLevel = thumbBounds.w / item.w,\r\n\t\t\t\t\t\tinitialPanOffset = {\r\n\t\t\t\t\t\t\tx: _panOffset.x,\r\n\t\t\t\t\t\t\ty: _panOffset.y\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tinitialZoomLevel = _currZoomLevel,\r\n\t\t\t\t\t\tinitalBgOpacity = _bgOpacity,\r\n\t\t\t\t\t\tonUpdate = function(now) {\r\n\r\n\t\t\t\t\t\t\tif(now === 1) {\r\n\t\t\t\t\t\t\t\t_currZoomLevel = destZoomLevel;\r\n\t\t\t\t\t\t\t\t_panOffset.x = thumbBounds.x;\r\n\t\t\t\t\t\t\t\t_panOffset.y = thumbBounds.y  - _currentWindowScrollY;\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t_currZoomLevel = (destZoomLevel - initialZoomLevel) * now + initialZoomLevel;\r\n\t\t\t\t\t\t\t\t_panOffset.x = (thumbBounds.x - initialPanOffset.x) * now + initialPanOffset.x;\r\n\t\t\t\t\t\t\t\t_panOffset.y = (thumbBounds.y - _currentWindowScrollY - initialPanOffset.y) * now + initialPanOffset.y;\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t_applyCurrentZoomPan();\r\n\t\t\t\t\t\t\tif(fadeEverything) {\r\n\t\t\t\t\t\t\t\ttemplate.style.opacity = 1 - now;\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t_applyBgOpacity( initalBgOpacity - now * initalBgOpacity );\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t};\r\n\r\n\t\t\t\t\tif(closeWithRaf) {\r\n\t\t\t\t\t\t_animateProp('initialZoom', 0, 1, duration, framework.easing.cubic.out, onUpdate, onComplete);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tonUpdate(1);\r\n\t\t\t\t\t\t_showOrHideTimeout = setTimeout(onComplete, duration + 20);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t}, out ? 25 : 90); // Main purpose of this delay is to give browser time to paint and\r\n\t\t\t\t\t// create composite layers of PhotoSwipe UI parts (background, controls, caption, arrows).\r\n\t\t\t\t\t// Which avoids lag at the beginning of scale transition.\r\n\t\t};\r\n\t\tstartAnimation();\r\n\r\n\r\n\t};\r\n\r\n/*>>show-hide-transition*/\r\n\r\n/*>>items-controller*/\r\n/**\r\n*\r\n* Controller manages gallery items, their dimensions, and their content.\r\n*\r\n*/\r\n\r\nvar _items,\r\n\t_tempPanAreaSize = {},\r\n\t_imagesToAppendPool = [],\r\n\t_initialContentSet,\r\n\t_initialZoomRunning,\r\n\t_controllerDefaultOptions = {\r\n\t\tindex: 0,\r\n\t\terrorMsg: '<div class=\"pswp__error-msg\"><a href=\"%url%\" target=\"_blank\">The image</a> could not be loaded.</div>',\r\n\t\tforceProgressiveLoading: false, // TODO\r\n\t\tpreload: [1,1],\r\n\t\tgetNumItemsFn: function() {\r\n\t\t\treturn _items.length;\r\n\t\t}\r\n\t};\r\n\r\n\r\nvar _getItemAt,\r\n\t_getNumItems,\r\n\t_initialIsLoop,\r\n\t_getZeroBounds = function() {\r\n\t\treturn {\r\n\t\t\tcenter:{x:0,y:0},\r\n\t\t\tmax:{x:0,y:0},\r\n\t\t\tmin:{x:0,y:0}\r\n\t\t};\r\n\t},\r\n\t_calculateSingleItemPanBounds = function(item, realPanElementW, realPanElementH ) {\r\n\t\tvar bounds = item.bounds;\r\n\r\n\t\t// position of element when it's centered\r\n\t\tbounds.center.x = Math.round((_tempPanAreaSize.x - realPanElementW) / 2);\r\n\t\tbounds.center.y = Math.round((_tempPanAreaSize.y - realPanElementH) / 2) + item.vGap.top;\r\n\r\n\t\t// maximum pan position\r\n\t\tbounds.max.x = (realPanElementW > _tempPanAreaSize.x) ?\r\n\t\t\t\t\t\t\tMath.round(_tempPanAreaSize.x - realPanElementW) :\r\n\t\t\t\t\t\t\tbounds.center.x;\r\n\r\n\t\tbounds.max.y = (realPanElementH > _tempPanAreaSize.y) ?\r\n\t\t\t\t\t\t\tMath.round(_tempPanAreaSize.y - realPanElementH) + item.vGap.top :\r\n\t\t\t\t\t\t\tbounds.center.y;\r\n\r\n\t\t// minimum pan position\r\n\t\tbounds.min.x = (realPanElementW > _tempPanAreaSize.x) ? 0 : bounds.center.x;\r\n\t\tbounds.min.y = (realPanElementH > _tempPanAreaSize.y) ? item.vGap.top : bounds.center.y;\r\n\t},\r\n\t_calculateItemSize = function(item, viewportSize, zoomLevel) {\r\n\r\n\t\tif (item.src && !item.loadError) {\r\n\t\t\tvar isInitial = !zoomLevel;\r\n\r\n\t\t\tif(isInitial) {\r\n\t\t\t\tif(!item.vGap) {\r\n\t\t\t\t\titem.vGap = {top:0,bottom:0};\r\n\t\t\t\t}\r\n\t\t\t\t// allows overriding vertical margin for individual items\r\n\t\t\t\t_shout('parseVerticalMargin', item);\r\n\t\t\t}\r\n\r\n\r\n\t\t\t_tempPanAreaSize.x = viewportSize.x;\r\n\t\t\t_tempPanAreaSize.y = viewportSize.y - item.vGap.top - item.vGap.bottom;\r\n\r\n\t\t\tif (isInitial) {\r\n\t\t\t\tvar hRatio = _tempPanAreaSize.x / item.w;\r\n\t\t\t\tvar vRatio = _tempPanAreaSize.y / item.h;\r\n\r\n\t\t\t\titem.fitRatio = hRatio < vRatio ? hRatio : vRatio;\r\n\t\t\t\t//item.fillRatio = hRatio > vRatio ? hRatio : vRatio;\r\n\r\n\t\t\t\tvar scaleMode = _options.scaleMode;\r\n\r\n\t\t\t\tif (scaleMode === 'orig') {\r\n\t\t\t\t\tzoomLevel = 1;\r\n\t\t\t\t} else if (scaleMode === 'fit') {\r\n\t\t\t\t\tzoomLevel = item.fitRatio;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (zoomLevel > 1) {\r\n\t\t\t\t\tzoomLevel = 1;\r\n\t\t\t\t}\r\n\r\n\t\t\t\titem.initialZoomLevel = zoomLevel;\r\n\r\n\t\t\t\tif(!item.bounds) {\r\n\t\t\t\t\t// reuse bounds object\r\n\t\t\t\t\titem.bounds = _getZeroBounds();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif(!zoomLevel) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\t_calculateSingleItemPanBounds(item, item.w * zoomLevel, item.h * zoomLevel);\r\n\r\n\t\t\tif (isInitial && zoomLevel === item.initialZoomLevel) {\r\n\t\t\t\titem.initialPosition = item.bounds.center;\r\n\t\t\t}\r\n\r\n\t\t\treturn item.bounds;\r\n\t\t} else {\r\n\t\t\titem.w = item.h = 0;\r\n\t\t\titem.initialZoomLevel = item.fitRatio = 1;\r\n\t\t\titem.bounds = _getZeroBounds();\r\n\t\t\titem.initialPosition = item.bounds.center;\r\n\r\n\t\t\t// if it's not image, we return zero bounds (content is not zoomable)\r\n\t\t\treturn item.bounds;\r\n\t\t}\r\n\r\n\t},\r\n\r\n\r\n\r\n\r\n\t_appendImage = function(index, item, baseDiv, img, preventAnimation, keepPlaceholder) {\r\n\r\n\r\n\t\tif(item.loadError) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif(img) {\r\n\r\n\t\t\titem.imageAppended = true;\r\n\t\t\t_setImageSize(item, img, (item === self.currItem && _renderMaxResolution) );\r\n\r\n\t\t\tbaseDiv.appendChild(img);\r\n\r\n\t\t\tif(keepPlaceholder) {\r\n\t\t\t\tsetTimeout(function() {\r\n\t\t\t\t\tif(item && item.loaded && item.placeholder) {\r\n\t\t\t\t\t\titem.placeholder.style.display = 'none';\r\n\t\t\t\t\t\titem.placeholder = null;\r\n\t\t\t\t\t}\r\n\t\t\t\t}, 500);\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\r\n\r\n\t_preloadImage = function(item) {\r\n\t\titem.loading = true;\r\n\t\titem.loaded = false;\r\n\t\tvar img = item.img = framework.createEl('pswp__img', 'img');\r\n\t\tvar onComplete = function() {\r\n\t\t\titem.loading = false;\r\n\t\t\titem.loaded = true;\r\n\r\n\t\t\tif(item.loadComplete) {\r\n\t\t\t\titem.loadComplete(item);\r\n\t\t\t} else {\r\n\t\t\t\titem.img = null; // no need to store image object\r\n\t\t\t}\r\n\t\t\timg.onload = img.onerror = null;\r\n\t\t\timg = null;\r\n\t\t};\r\n\t\timg.onload = onComplete;\r\n\t\timg.onerror = function() {\r\n\t\t\titem.loadError = true;\r\n\t\t\tonComplete();\r\n\t\t};\r\n\r\n\t\timg.src = item.src;// + '?a=' + Math.random();\r\n\r\n\t\treturn img;\r\n\t},\r\n\t_checkForError = function(item, cleanUp) {\r\n\t\tif(item.src && item.loadError && item.container) {\r\n\r\n\t\t\tif(cleanUp) {\r\n\t\t\t\titem.container.innerHTML = '';\r\n\t\t\t}\r\n\r\n\t\t\titem.container.innerHTML = _options.errorMsg.replace('%url%',  item.src );\r\n\t\t\treturn true;\r\n\r\n\t\t}\r\n\t},\r\n\t_setImageSize = function(item, img, maxRes) {\r\n\t\tif(!item.src) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif(!img) {\r\n\t\t\timg = item.container.lastChild;\r\n\t\t}\r\n\r\n\t\tvar w = maxRes ? item.w : Math.round(item.w * item.fitRatio),\r\n\t\t\th = maxRes ? item.h : Math.round(item.h * item.fitRatio);\r\n\r\n\t\tif(item.placeholder && !item.loaded) {\r\n\t\t\titem.placeholder.style.width = w + 'px';\r\n\t\t\titem.placeholder.style.height = h + 'px';\r\n\t\t}\r\n\r\n\t\timg.style.width = w + 'px';\r\n\t\timg.style.height = h + 'px';\r\n\t},\r\n\t_appendImagesPool = function() {\r\n\r\n\t\tif(_imagesToAppendPool.length) {\r\n\t\t\tvar poolItem;\r\n\r\n\t\t\tfor(var i = 0; i < _imagesToAppendPool.length; i++) {\r\n\t\t\t\tpoolItem = _imagesToAppendPool[i];\r\n\t\t\t\tif( poolItem.holder.index === poolItem.index ) {\r\n\t\t\t\t\t_appendImage(poolItem.index, poolItem.item, poolItem.baseDiv, poolItem.img, false, poolItem.clearPlaceholder);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t_imagesToAppendPool = [];\r\n\t\t}\r\n\t};\r\n\r\n\r\n\r\n_registerModule('Controller', {\r\n\r\n\tpublicMethods: {\r\n\r\n\t\tlazyLoadItem: function(index) {\r\n\t\t\tindex = _getLoopedId(index);\r\n\t\t\tvar item = _getItemAt(index);\r\n\r\n\t\t\tif(!item || ((item.loaded || item.loading) && !_itemsNeedUpdate)) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\t_shout('gettingData', index, item);\r\n\r\n\t\t\tif (!item.src) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\t_preloadImage(item);\r\n\t\t},\r\n\t\tinitController: function() {\r\n\t\t\tframework.extend(_options, _controllerDefaultOptions, true);\r\n\t\t\tself.items = _items = items;\r\n\t\t\t_getItemAt = self.getItemAt;\r\n\t\t\t_getNumItems = _options.getNumItemsFn; //self.getNumItems;\r\n\r\n\r\n\r\n\t\t\t_initialIsLoop = _options.loop;\r\n\t\t\tif(_getNumItems() < 3) {\r\n\t\t\t\t_options.loop = false; // disable loop if less then 3 items\r\n\t\t\t}\r\n\r\n\t\t\t_listen('beforeChange', function(diff) {\r\n\r\n\t\t\t\tvar p = _options.preload,\r\n\t\t\t\t\tisNext = diff === null ? true : (diff >= 0),\r\n\t\t\t\t\tpreloadBefore = Math.min(p[0], _getNumItems() ),\r\n\t\t\t\t\tpreloadAfter = Math.min(p[1], _getNumItems() ),\r\n\t\t\t\t\ti;\r\n\r\n\r\n\t\t\t\tfor(i = 1; i <= (isNext ? preloadAfter : preloadBefore); i++) {\r\n\t\t\t\t\tself.lazyLoadItem(_currentItemIndex+i);\r\n\t\t\t\t}\r\n\t\t\t\tfor(i = 1; i <= (isNext ? preloadBefore : preloadAfter); i++) {\r\n\t\t\t\t\tself.lazyLoadItem(_currentItemIndex-i);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\t_listen('initialLayout', function() {\r\n\t\t\t\tself.currItem.initialLayout = _options.getThumbBoundsFn && _options.getThumbBoundsFn(_currentItemIndex);\r\n\t\t\t});\r\n\r\n\t\t\t_listen('mainScrollAnimComplete', _appendImagesPool);\r\n\t\t\t_listen('initialZoomInEnd', _appendImagesPool);\r\n\r\n\r\n\r\n\t\t\t_listen('destroy', function() {\r\n\t\t\t\tvar item;\r\n\t\t\t\tfor(var i = 0; i < _items.length; i++) {\r\n\t\t\t\t\titem = _items[i];\r\n\t\t\t\t\t// remove reference to DOM elements, for GC\r\n\t\t\t\t\tif(item.container) {\r\n\t\t\t\t\t\titem.container = null;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif(item.placeholder) {\r\n\t\t\t\t\t\titem.placeholder = null;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif(item.img) {\r\n\t\t\t\t\t\titem.img = null;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif(item.preloader) {\r\n\t\t\t\t\t\titem.preloader = null;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif(item.loadError) {\r\n\t\t\t\t\t\titem.loaded = item.loadError = false;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t_imagesToAppendPool = null;\r\n\t\t\t});\r\n\t\t},\r\n\r\n\r\n\t\tgetItemAt: function(index) {\r\n\t\t\tif (index >= 0) {\r\n\t\t\t\treturn _items[index] !== undefined ? _items[index] : false;\r\n\t\t\t}\r\n\t\t\treturn false;\r\n\t\t},\r\n\r\n\t\tallowProgressiveImg: function() {\r\n\t\t\t// 1. Progressive image loading isn't working on webkit/blink\r\n\t\t\t//    when hw-acceleration (e.g. translateZ) is applied to IMG element.\r\n\t\t\t//    That's why in PhotoSwipe parent element gets zoom transform, not image itself.\r\n\t\t\t//\r\n\t\t\t// 2. Progressive image loading sometimes blinks in webkit/blink when applying animation to parent element.\r\n\t\t\t//    That's why it's disabled on touch devices (mainly because of swipe transition)\r\n\t\t\t//\r\n\t\t\t// 3. Progressive image loading sometimes doesn't work in IE (up to 11).\r\n\r\n\t\t\t// Don't allow progressive loading on non-large touch devices\r\n\t\t\treturn _options.forceProgressiveLoading || !_likelyTouchDevice || _options.mouseUsed || screen.width > 1200;\r\n\t\t\t// 1200 - to eliminate touch devices with large screen (like Chromebook Pixel)\r\n\t\t},\r\n\r\n\t\tsetContent: function(holder, index) {\r\n\r\n\t\t\tif(_options.loop) {\r\n\t\t\t\tindex = _getLoopedId(index);\r\n\t\t\t}\r\n\r\n\t\t\tvar prevItem = self.getItemAt(holder.index);\r\n\t\t\tif(prevItem) {\r\n\t\t\t\tprevItem.container = null;\r\n\t\t\t}\r\n\r\n\t\t\tvar item = self.getItemAt(index),\r\n\t\t\t\timg;\r\n\r\n\t\t\tif(!item) {\r\n\t\t\t\tholder.el.innerHTML = '';\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\t// allow to override data\r\n\t\t\t_shout('gettingData', index, item);\r\n\r\n\t\t\tholder.index = index;\r\n\t\t\tholder.item = item;\r\n\r\n\t\t\t// base container DIV is created only once for each of 3 holders\r\n\t\t\tvar baseDiv = item.container = framework.createEl('pswp__zoom-wrap');\r\n\r\n\r\n\r\n\t\t\tif(!item.src && item.html) {\r\n\t\t\t\tif(item.html.tagName) {\r\n\t\t\t\t\tbaseDiv.appendChild(item.html);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tbaseDiv.innerHTML = item.html;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t_checkForError(item);\r\n\r\n\t\t\t_calculateItemSize(item, _viewportSize);\r\n\r\n\t\t\tif(item.src && !item.loadError && !item.loaded) {\r\n\r\n\t\t\t\titem.loadComplete = function(item) {\r\n\r\n\t\t\t\t\t// gallery closed before image finished loading\r\n\t\t\t\t\tif(!_isOpen) {\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// check if holder hasn't changed while image was loading\r\n\t\t\t\t\tif(holder && holder.index === index ) {\r\n\t\t\t\t\t\tif( _checkForError(item, true) ) {\r\n\t\t\t\t\t\t\titem.loadComplete = item.img = null;\r\n\t\t\t\t\t\t\t_calculateItemSize(item, _viewportSize);\r\n\t\t\t\t\t\t\t_applyZoomPanToItem(item);\r\n\r\n\t\t\t\t\t\t\tif(holder.index === _currentItemIndex) {\r\n\t\t\t\t\t\t\t\t// recalculate dimensions\r\n\t\t\t\t\t\t\t\tself.updateCurrZoomItem();\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif( !item.imageAppended ) {\r\n\t\t\t\t\t\t\tif(_features.transform && (_mainScrollAnimating || _initialZoomRunning) ) {\r\n\t\t\t\t\t\t\t\t_imagesToAppendPool.push({\r\n\t\t\t\t\t\t\t\t\titem:item,\r\n\t\t\t\t\t\t\t\t\tbaseDiv:baseDiv,\r\n\t\t\t\t\t\t\t\t\timg:item.img,\r\n\t\t\t\t\t\t\t\t\tindex:index,\r\n\t\t\t\t\t\t\t\t\tholder:holder,\r\n\t\t\t\t\t\t\t\t\tclearPlaceholder:true\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t_appendImage(index, item, baseDiv, item.img, _mainScrollAnimating || _initialZoomRunning, true);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t// remove preloader & mini-img\r\n\t\t\t\t\t\t\tif(!_initialZoomRunning && item.placeholder) {\r\n\t\t\t\t\t\t\t\titem.placeholder.style.display = 'none';\r\n\t\t\t\t\t\t\t\titem.placeholder = null;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\titem.loadComplete = null;\r\n\t\t\t\t\titem.img = null; // no need to store image element after it's added\r\n\r\n\t\t\t\t\t_shout('imageLoadComplete', index, item);\r\n\t\t\t\t};\r\n\r\n\t\t\t\tif(framework.features.transform) {\r\n\r\n\t\t\t\t\tvar placeholderClassName = 'pswp__img pswp__img--placeholder';\r\n\t\t\t\t\tplaceholderClassName += (item.msrc ? '' : ' pswp__img--placeholder--blank');\r\n\r\n\t\t\t\t\tvar placeholder = framework.createEl(placeholderClassName, item.msrc ? 'img' : '');\r\n\t\t\t\t\tif(item.msrc) {\r\n\t\t\t\t\t\tplaceholder.src = item.msrc;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t_setImageSize(item, placeholder);\r\n\r\n\t\t\t\t\tbaseDiv.appendChild(placeholder);\r\n\t\t\t\t\titem.placeholder = placeholder;\r\n\r\n\t\t\t\t}\r\n\r\n\r\n\r\n\r\n\t\t\t\tif(!item.loading) {\r\n\t\t\t\t\t_preloadImage(item);\r\n\t\t\t\t}\r\n\r\n\r\n\t\t\t\tif( self.allowProgressiveImg() ) {\r\n\t\t\t\t\t// just append image\r\n\t\t\t\t\tif(!_initialContentSet && _features.transform) {\r\n\t\t\t\t\t\t_imagesToAppendPool.push({\r\n\t\t\t\t\t\t\titem:item,\r\n\t\t\t\t\t\t\tbaseDiv:baseDiv,\r\n\t\t\t\t\t\t\timg:item.img,\r\n\t\t\t\t\t\t\tindex:index,\r\n\t\t\t\t\t\t\tholder:holder\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\t_appendImage(index, item, baseDiv, item.img, true, true);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t} else if(item.src && !item.loadError) {\r\n\t\t\t\t// image object is created every time, due to bugs of image loading & delay when switching images\r\n\t\t\t\timg = framework.createEl('pswp__img', 'img');\r\n\t\t\t\timg.style.opacity = 1;\r\n\t\t\t\timg.src = item.src;\r\n\t\t\t\t_setImageSize(item, img);\r\n\t\t\t\t_appendImage(index, item, baseDiv, img, true);\r\n\t\t\t}\r\n\r\n\r\n\t\t\tif(!_initialContentSet && index === _currentItemIndex) {\r\n\t\t\t\t_currZoomElementStyle = baseDiv.style;\r\n\t\t\t\t_showOrHide(item, (img ||item.img) );\r\n\t\t\t} else {\r\n\t\t\t\t_applyZoomPanToItem(item);\r\n\t\t\t}\r\n\r\n\t\t\tholder.el.innerHTML = '';\r\n\t\t\tholder.el.appendChild(baseDiv);\r\n\t\t},\r\n\r\n\t\tcleanSlide: function( item ) {\r\n\t\t\tif(item.img ) {\r\n\t\t\t\titem.img.onload = item.img.onerror = null;\r\n\t\t\t}\r\n\t\t\titem.loaded = item.loading = item.img = item.imageAppended = false;\r\n\t\t}\r\n\r\n\t}\r\n});\r\n\r\n/*>>items-controller*/\r\n\r\n/*>>tap*/\r\n/**\r\n * tap.js:\r\n *\r\n * Displatches tap and double-tap events.\r\n *\r\n */\r\n\r\nvar tapTimer,\r\n\ttapReleasePoint = {},\r\n\t_dispatchTapEvent = function(origEvent, releasePoint, pointerType) {\r\n\t\tvar e = document.createEvent( 'CustomEvent' ),\r\n\t\t\teDetail = {\r\n\t\t\t\torigEvent:origEvent,\r\n\t\t\t\ttarget:origEvent.target,\r\n\t\t\t\treleasePoint: releasePoint,\r\n\t\t\t\tpointerType:pointerType || 'touch'\r\n\t\t\t};\r\n\r\n\t\te.initCustomEvent( 'pswpTap', true, true, eDetail );\r\n\t\torigEvent.target.dispatchEvent(e);\r\n\t};\r\n\r\n_registerModule('Tap', {\r\n\tpublicMethods: {\r\n\t\tinitTap: function() {\r\n\t\t\t_listen('firstTouchStart', self.onTapStart);\r\n\t\t\t_listen('touchRelease', self.onTapRelease);\r\n\t\t\t_listen('destroy', function() {\r\n\t\t\t\ttapReleasePoint = {};\r\n\t\t\t\ttapTimer = null;\r\n\t\t\t});\r\n\t\t},\r\n\t\tonTapStart: function(touchList) {\r\n\t\t\tif(touchList.length > 1) {\r\n\t\t\t\tclearTimeout(tapTimer);\r\n\t\t\t\ttapTimer = null;\r\n\t\t\t}\r\n\t\t},\r\n\t\tonTapRelease: function(e, releasePoint) {\r\n\t\t\tif(!releasePoint) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tif(!_moved && !_isMultitouch && !_numAnimations) {\r\n\t\t\t\tvar p0 = releasePoint;\r\n\t\t\t\tif(tapTimer) {\r\n\t\t\t\t\tclearTimeout(tapTimer);\r\n\t\t\t\t\ttapTimer = null;\r\n\r\n\t\t\t\t\t// Check if taped on the same place\r\n\t\t\t\t\tif ( _isNearbyPoints(p0, tapReleasePoint) ) {\r\n\t\t\t\t\t\t_shout('doubleTap', p0);\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(releasePoint.type === 'mouse') {\r\n\t\t\t\t\t_dispatchTapEvent(e, releasePoint, 'mouse');\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar clickedTagName = e.target.tagName.toUpperCase();\r\n\t\t\t\t// avoid double tap delay on buttons and elements that have class pswp__single-tap\r\n\t\t\t\tif(clickedTagName === 'BUTTON' || framework.hasClass(e.target, 'pswp__single-tap') ) {\r\n\t\t\t\t\t_dispatchTapEvent(e, releasePoint);\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t_equalizePoints(tapReleasePoint, p0);\r\n\r\n\t\t\t\ttapTimer = setTimeout(function() {\r\n\t\t\t\t\t_dispatchTapEvent(e, releasePoint);\r\n\t\t\t\t\ttapTimer = null;\r\n\t\t\t\t}, 300);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n});\r\n\r\n/*>>tap*/\r\n\r\n/*>>desktop-zoom*/\r\n/**\r\n *\r\n * desktop-zoom.js:\r\n *\r\n * - Binds mousewheel event for paning zoomed image.\r\n * - Manages \"dragging\", \"zoomed-in\", \"zoom-out\" classes.\r\n *   (which are used for cursors and zoom icon)\r\n * - Adds toggleDesktopZoom function.\r\n *\r\n */\r\n\r\nvar _wheelDelta;\r\n\r\n_registerModule('DesktopZoom', {\r\n\r\n\tpublicMethods: {\r\n\r\n\t\tinitDesktopZoom: function() {\r\n\r\n\t\t\tif(_oldIE) {\r\n\t\t\t\t// no zoom for old IE (<=8)\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tif(_likelyTouchDevice) {\r\n\t\t\t\t// if detected hardware touch support, we wait until mouse is used,\r\n\t\t\t\t// and only then apply desktop-zoom features\r\n\t\t\t\t_listen('mouseUsed', function() {\r\n\t\t\t\t\tself.setupDesktopZoom();\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\tself.setupDesktopZoom(true);\r\n\t\t\t}\r\n\r\n\t\t},\r\n\r\n\t\tsetupDesktopZoom: function(onInit) {\r\n\r\n\t\t\t_wheelDelta = {};\r\n\r\n\t\t\tvar events = 'wheel mousewheel DOMMouseScroll';\r\n\r\n\t\t\t_listen('bindEvents', function() {\r\n\t\t\t\tframework.bind(template, events,  self.handleMouseWheel);\r\n\t\t\t});\r\n\r\n\t\t\t_listen('unbindEvents', function() {\r\n\t\t\t\tif(_wheelDelta) {\r\n\t\t\t\t\tframework.unbind(template, events, self.handleMouseWheel);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tself.mouseZoomedIn = false;\r\n\r\n\t\t\tvar hasDraggingClass,\r\n\t\t\t\tupdateZoomable = function() {\r\n\t\t\t\t\tif(self.mouseZoomedIn) {\r\n\t\t\t\t\t\tframework.removeClass(template, 'pswp--zoomed-in');\r\n\t\t\t\t\t\tself.mouseZoomedIn = false;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif(_currZoomLevel < 1) {\r\n\t\t\t\t\t\tframework.addClass(template, 'pswp--zoom-allowed');\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tframework.removeClass(template, 'pswp--zoom-allowed');\r\n\t\t\t\t\t}\r\n\t\t\t\t\tremoveDraggingClass();\r\n\t\t\t\t},\r\n\t\t\t\tremoveDraggingClass = function() {\r\n\t\t\t\t\tif(hasDraggingClass) {\r\n\t\t\t\t\t\tframework.removeClass(template, 'pswp--dragging');\r\n\t\t\t\t\t\thasDraggingClass = false;\r\n\t\t\t\t\t}\r\n\t\t\t\t};\r\n\r\n\t\t\t_listen('resize' , updateZoomable);\r\n\t\t\t_listen('afterChange' , updateZoomable);\r\n\t\t\t_listen('pointerDown', function() {\r\n\t\t\t\tif(self.mouseZoomedIn) {\r\n\t\t\t\t\thasDraggingClass = true;\r\n\t\t\t\t\tframework.addClass(template, 'pswp--dragging');\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\t_listen('pointerUp', removeDraggingClass);\r\n\r\n\t\t\tif(!onInit) {\r\n\t\t\t\tupdateZoomable();\r\n\t\t\t}\r\n\r\n\t\t},\r\n\r\n\t\thandleMouseWheel: function(e) {\r\n\r\n\t\t\tif(_currZoomLevel <= self.currItem.fitRatio) {\r\n\t\t\t\tif( _options.modal ) {\r\n\r\n\t\t\t\t\tif (!_options.closeOnScroll || _numAnimations || _isDragging) {\r\n\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t} else if(_transformKey && Math.abs(e.deltaY) > 2) {\r\n\t\t\t\t\t\t// close PhotoSwipe\r\n\t\t\t\t\t\t// if browser supports transforms & scroll changed enough\r\n\t\t\t\t\t\t_closedByScroll = true;\r\n\t\t\t\t\t\tself.close();\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\r\n\t\t\t// allow just one event to fire\r\n\t\t\te.stopPropagation();\r\n\r\n\t\t\t// https://developer.mozilla.org/en-US/docs/Web/Events/wheel\r\n\t\t\t_wheelDelta.x = 0;\r\n\r\n\t\t\tif('deltaX' in e) {\r\n\t\t\t\tif(e.deltaMode === 1 /* DOM_DELTA_LINE */) {\r\n\t\t\t\t\t// 18 - average line height\r\n\t\t\t\t\t_wheelDelta.x = e.deltaX * 18;\r\n\t\t\t\t\t_wheelDelta.y = e.deltaY * 18;\r\n\t\t\t\t} else {\r\n\t\t\t\t\t_wheelDelta.x = e.deltaX;\r\n\t\t\t\t\t_wheelDelta.y = e.deltaY;\r\n\t\t\t\t}\r\n\t\t\t} else if('wheelDelta' in e) {\r\n\t\t\t\tif(e.wheelDeltaX) {\r\n\t\t\t\t\t_wheelDelta.x = -0.16 * e.wheelDeltaX;\r\n\t\t\t\t}\r\n\t\t\t\tif(e.wheelDeltaY) {\r\n\t\t\t\t\t_wheelDelta.y = -0.16 * e.wheelDeltaY;\r\n\t\t\t\t} else {\r\n\t\t\t\t\t_wheelDelta.y = -0.16 * e.wheelDelta;\r\n\t\t\t\t}\r\n\t\t\t} else if('detail' in e) {\r\n\t\t\t\t_wheelDelta.y = e.detail;\r\n\t\t\t} else {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\t_calculatePanBounds(_currZoomLevel, true);\r\n\r\n\t\t\tvar newPanX = _panOffset.x - _wheelDelta.x,\r\n\t\t\t\tnewPanY = _panOffset.y - _wheelDelta.y;\r\n\r\n\t\t\t// only prevent scrolling in nonmodal mode when not at edges\r\n\t\t\tif (_options.modal ||\r\n\t\t\t\t(\r\n\t\t\t\tnewPanX <= _currPanBounds.min.x && newPanX >= _currPanBounds.max.x &&\r\n\t\t\t\tnewPanY <= _currPanBounds.min.y && newPanY >= _currPanBounds.max.y\r\n\t\t\t\t) ) {\r\n\t\t\t\te.preventDefault();\r\n\t\t\t}\r\n\r\n\t\t\t// TODO: use rAF instead of mousewheel?\r\n\t\t\tself.panTo(newPanX, newPanY);\r\n\t\t},\r\n\r\n\t\ttoggleDesktopZoom: function(centerPoint) {\r\n\t\t\tcenterPoint = centerPoint || {x:_viewportSize.x/2 + _offset.x, y:_viewportSize.y/2 + _offset.y };\r\n\r\n\t\t\tvar doubleTapZoomLevel = _options.getDoubleTapZoom(true, self.currItem);\r\n\t\t\tvar zoomOut = _currZoomLevel === doubleTapZoomLevel;\r\n\r\n\t\t\tself.mouseZoomedIn = !zoomOut;\r\n\r\n\t\t\tself.zoomTo(zoomOut ? self.currItem.initialZoomLevel : doubleTapZoomLevel, centerPoint, 333);\r\n\t\t\tframework[ (!zoomOut ? 'add' : 'remove') + 'Class'](template, 'pswp--zoomed-in');\r\n\t\t}\r\n\r\n\t}\r\n});\r\n\r\n\r\n/*>>desktop-zoom*/\r\n\r\n/*>>history*/\r\n/**\r\n *\r\n * history.js:\r\n *\r\n * - Back button to close gallery.\r\n *\r\n * - Unique URL for each slide: example.com/&pid=1&gid=3\r\n *   (where PID is picture index, and GID and gallery index)\r\n *\r\n * - Switch URL when slides change.\r\n *\r\n */\r\n\r\n\r\nvar _historyDefaultOptions = {\r\n\thistory: true,\r\n\tgalleryUID: 1\r\n};\r\n\r\nvar _historyUpdateTimeout,\r\n\t_hashChangeTimeout,\r\n\t_hashAnimCheckTimeout,\r\n\t_hashChangedByScript,\r\n\t_hashChangedByHistory,\r\n\t_hashReseted,\r\n\t_initialHash,\r\n\t_historyChanged,\r\n\t_closedFromURL,\r\n\t_urlChangedOnce,\r\n\t_windowLoc,\r\n\r\n\t_supportsPushState,\r\n\r\n\t_getHash = function() {\r\n\t\treturn _windowLoc.hash.substring(1);\r\n\t},\r\n\t_cleanHistoryTimeouts = function() {\r\n\r\n\t\tif(_historyUpdateTimeout) {\r\n\t\t\tclearTimeout(_historyUpdateTimeout);\r\n\t\t}\r\n\r\n\t\tif(_hashAnimCheckTimeout) {\r\n\t\t\tclearTimeout(_hashAnimCheckTimeout);\r\n\t\t}\r\n\t},\r\n\r\n\t// pid - Picture index\r\n\t// gid - Gallery index\r\n\t_parseItemIndexFromURL = function() {\r\n\t\tvar hash = _getHash(),\r\n\t\t\tparams = {};\r\n\r\n\t\tif(hash.length < 5) { // pid=1\r\n\t\t\treturn params;\r\n\t\t}\r\n\r\n\t\tvar i, vars = hash.split('&');\r\n\t\tfor (i = 0; i < vars.length; i++) {\r\n\t\t\tif(!vars[i]) {\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\t\t\tvar pair = vars[i].split('=');\r\n\t\t\tif(pair.length < 2) {\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\t\t\tparams[pair[0]] = pair[1];\r\n\t\t}\r\n\t\tif(_options.galleryPIDs) {\r\n\t\t\t// detect custom pid in hash and search for it among the items collection\r\n\t\t\tvar searchfor = params.pid;\r\n\t\t\tparams.pid = 0; // if custom pid cannot be found, fallback to the first item\r\n\t\t\tfor(i = 0; i < _items.length; i++) {\r\n\t\t\t\tif(_items[i].pid === searchfor) {\r\n\t\t\t\t\tparams.pid = i;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tparams.pid = parseInt(params.pid,10)-1;\r\n\t\t}\r\n\t\tif( params.pid < 0 ) {\r\n\t\t\tparams.pid = 0;\r\n\t\t}\r\n\t\treturn params;\r\n\t},\r\n\t_updateHash = function() {\r\n\r\n\t\tif(_hashAnimCheckTimeout) {\r\n\t\t\tclearTimeout(_hashAnimCheckTimeout);\r\n\t\t}\r\n\r\n\r\n\t\tif(_numAnimations || _isDragging) {\r\n\t\t\t// changing browser URL forces layout/paint in some browsers, which causes noticable lag during animation\r\n\t\t\t// that's why we update hash only when no animations running\r\n\t\t\t_hashAnimCheckTimeout = setTimeout(_updateHash, 500);\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif(_hashChangedByScript) {\r\n\t\t\tclearTimeout(_hashChangeTimeout);\r\n\t\t} else {\r\n\t\t\t_hashChangedByScript = true;\r\n\t\t}\r\n\r\n\r\n\t\tvar pid = (_currentItemIndex + 1);\r\n\t\tvar item = _getItemAt( _currentItemIndex );\r\n\t\tif(item.hasOwnProperty('pid')) {\r\n\t\t\t// carry forward any custom pid assigned to the item\r\n\t\t\tpid = item.pid;\r\n\t\t}\r\n\t\tvar newHash = _initialHash + '&'  +  'gid=' + _options.galleryUID + '&' + 'pid=' + pid;\r\n\r\n\t\tif(!_historyChanged) {\r\n\t\t\tif(_windowLoc.hash.indexOf(newHash) === -1) {\r\n\t\t\t\t_urlChangedOnce = true;\r\n\t\t\t}\r\n\t\t\t// first time - add new hisory record, then just replace\r\n\t\t}\r\n\r\n\t\tvar newURL = _windowLoc.href.split('#')[0] + '#' +  newHash;\r\n\r\n\t\tif( _supportsPushState ) {\r\n\r\n\t\t\tif('#' + newHash !== window.location.hash) {\r\n\t\t\t\thistory[_historyChanged ? 'replaceState' : 'pushState']('', document.title, newURL);\r\n\t\t\t}\r\n\r\n\t\t} else {\r\n\t\t\tif(_historyChanged) {\r\n\t\t\t\t_windowLoc.replace( newURL );\r\n\t\t\t} else {\r\n\t\t\t\t_windowLoc.hash = newHash;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\r\n\r\n\t\t_historyChanged = true;\r\n\t\t_hashChangeTimeout = setTimeout(function() {\r\n\t\t\t_hashChangedByScript = false;\r\n\t\t}, 60);\r\n\t};\r\n\r\n\r\n\r\n\r\n\r\n_registerModule('History', {\r\n\r\n\r\n\r\n\tpublicMethods: {\r\n\t\tinitHistory: function() {\r\n\r\n\t\t\tframework.extend(_options, _historyDefaultOptions, true);\r\n\r\n\t\t\tif( !_options.history ) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\r\n\t\t\t_windowLoc = window.location;\r\n\t\t\t_urlChangedOnce = false;\r\n\t\t\t_closedFromURL = false;\r\n\t\t\t_historyChanged = false;\r\n\t\t\t_initialHash = _getHash();\r\n\t\t\t_supportsPushState = ('pushState' in history);\r\n\r\n\r\n\t\t\tif(_initialHash.indexOf('gid=') > -1) {\r\n\t\t\t\t_initialHash = _initialHash.split('&gid=')[0];\r\n\t\t\t\t_initialHash = _initialHash.split('?gid=')[0];\r\n\t\t\t}\r\n\r\n\r\n\t\t\t_listen('afterChange', self.updateURL);\r\n\t\t\t_listen('unbindEvents', function() {\r\n\t\t\t\tframework.unbind(window, 'hashchange', self.onHashChange);\r\n\t\t\t});\r\n\r\n\r\n\t\t\tvar returnToOriginal = function() {\r\n\t\t\t\t_hashReseted = true;\r\n\t\t\t\tif(!_closedFromURL) {\r\n\r\n\t\t\t\t\tif(_urlChangedOnce) {\r\n\t\t\t\t\t\thistory.back();\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\tif(_initialHash) {\r\n\t\t\t\t\t\t\t_windowLoc.hash = _initialHash;\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tif (_supportsPushState) {\r\n\r\n\t\t\t\t\t\t\t\t// remove hash from url without refreshing it or scrolling to top\r\n\t\t\t\t\t\t\t\thistory.pushState('', document.title,  _windowLoc.pathname + _windowLoc.search );\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t_windowLoc.hash = '';\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\t_cleanHistoryTimeouts();\r\n\t\t\t};\r\n\r\n\r\n\t\t\t_listen('unbindEvents', function() {\r\n\t\t\t\tif(_closedByScroll) {\r\n\t\t\t\t\t// if PhotoSwipe is closed by scroll, we go \"back\" before the closing animation starts\r\n\t\t\t\t\t// this is done to keep the scroll position\r\n\t\t\t\t\treturnToOriginal();\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\t_listen('destroy', function() {\r\n\t\t\t\tif(!_hashReseted) {\r\n\t\t\t\t\treturnToOriginal();\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\t_listen('firstUpdate', function() {\r\n\t\t\t\t_currentItemIndex = _parseItemIndexFromURL().pid;\r\n\t\t\t});\r\n\r\n\r\n\r\n\r\n\t\t\tvar index = _initialHash.indexOf('pid=');\r\n\t\t\tif(index > -1) {\r\n\t\t\t\t_initialHash = _initialHash.substring(0, index);\r\n\t\t\t\tif(_initialHash.slice(-1) === '&') {\r\n\t\t\t\t\t_initialHash = _initialHash.slice(0, -1);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\r\n\t\t\tsetTimeout(function() {\r\n\t\t\t\tif(_isOpen) { // hasn't destroyed yet\r\n\t\t\t\t\tframework.bind(window, 'hashchange', self.onHashChange);\r\n\t\t\t\t}\r\n\t\t\t}, 40);\r\n\r\n\t\t},\r\n\t\tonHashChange: function() {\r\n\r\n\t\t\tif(_getHash() === _initialHash) {\r\n\r\n\t\t\t\t_closedFromURL = true;\r\n\t\t\t\tself.close();\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif(!_hashChangedByScript) {\r\n\r\n\t\t\t\t_hashChangedByHistory = true;\r\n\t\t\t\tself.goTo( _parseItemIndexFromURL().pid );\r\n\t\t\t\t_hashChangedByHistory = false;\r\n\t\t\t}\r\n\r\n\t\t},\r\n\t\tupdateURL: function() {\r\n\r\n\t\t\t// Delay the update of URL, to avoid lag during transition,\r\n\t\t\t// and to not to trigger actions like \"refresh page sound\" or \"blinking favicon\" to often\r\n\r\n\t\t\t_cleanHistoryTimeouts();\r\n\r\n\r\n\t\t\tif(_hashChangedByHistory) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tif(!_historyChanged) {\r\n\t\t\t\t_updateHash(); // first time\r\n\t\t\t} else {\r\n\t\t\t\t_historyUpdateTimeout = setTimeout(_updateHash, 800);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t}\r\n});\r\n\r\n\r\n/*>>history*/\r\n\tframework.extend(self, publicMethods); };\r\n"],"sourceRoot":""}